/*! For license information please see common-316c78ced063bc454801.js.LICENSE.txt */
(self.webpackChunkchat_web = self.webpackChunkchat_web || []).push([[592], {
  1037: (e,t,n)=>{
    var r = {
      "./wz-a.entry.js": [7538, 736],
      "./wz-alert-dismiss.entry.js": [6715, 736],
      "./wz-alert-pagination.entry.js": [8197, 736],
      "./wz-alert.entry.js": [5174, 736],
      "./wz-alerts-group.entry.js": [8391, 736],
      "./wz-app-launcher-item.entry.js": [2197, 736],
      "./wz-app-launcher.entry.js": [4400, 736],
      "./wz-autocomplete-item-text.entry.js": [1434, 736],
      "./wz-autocomplete-item-text_4.entry.js": [1629, 736],
      "./wz-autocomplete.entry.js": [6414, 736],
      "./wz-autocomplete_2.entry.js": [4994, 736],
      "./wz-badge.entry.js": [9763, 736],
      "./wz-banner.entry.js": [8173, 736],
      "./wz-basic-tooltip.entry.js": [8946, 736],
      "./wz-basic-tooltip_5.entry.js": [7044, 736],
      "./wz-body1.entry.js": [853, 736],
      "./wz-body1_2.entry.js": [1127, 736],
      "./wz-body2.entry.js": [6262, 736],
      "./wz-breadcrumb.entry.js": [8615, 736],
      "./wz-breadcrumbs.entry.js": [2301, 736],
      "./wz-button.entry.js": [5779, 736],
      "./wz-button_2.entry.js": [6082, 736],
      "./wz-caption.entry.js": [6411, 736],
      "./wz-card-section.entry.js": [3178, 736],
      "./wz-card.entry.js": [7394, 736],
      "./wz-carousel-item.entry.js": [3241, 736],
      "./wz-carousel.entry.js": [566, 736],
      "./wz-checkable-chip.entry.js": [4206, 736],
      "./wz-checkbox.entry.js": [7405, 736],
      "./wz-chip-multi-select.entry.js": [163, 736],
      "./wz-chip-select.entry.js": [9702, 736],
      "./wz-dialog-content.entry.js": [4744, 736],
      "./wz-dialog-controls.entry.js": [2841, 736],
      "./wz-dialog-header.entry.js": [2309, 736],
      "./wz-dialog.entry.js": [7398, 736],
      "./wz-dialog_3.entry.js": [7170, 736],
      "./wz-drag-and-drop-container.entry.js": [1373, 736],
      "./wz-drag-and-drop-container_2.entry.js": [8163, 736],
      "./wz-empty-state.entry.js": [333, 736],
      "./wz-file-input.entry.js": [250, 736],
      "./wz-filter.entry.js": [7849, 736],
      "./wz-filter_5.entry.js": [5223, 736],
      "./wz-h1.entry.js": [4296, 736],
      "./wz-h2.entry.js": [5305, 736],
      "./wz-h3.entry.js": [126, 736],
      "./wz-h4.entry.js": [8625, 736],
      "./wz-h5.entry.js": [8432, 736],
      "./wz-h6.entry.js": [3855, 736],
      "./wz-h7.entry.js": [8328, 736],
      "./wz-header-branding.entry.js": [8940, 736],
      "./wz-header-controls.entry.js": [6330, 736],
      "./wz-header-user-panel.entry.js": [6722, 736],
      "./wz-header.entry.js": [9988, 736],
      "./wz-icon.entry.js": [5335, 736],
      "./wz-image-chip.entry.js": [841, 736],
      "./wz-label.entry.js": [4286, 736],
      "./wz-label_2.entry.js": [2045, 736],
      "./wz-list-item.entry.js": [3117, 736],
      "./wz-list.entry.js": [2607, 736],
      "./wz-menu-chip.entry.js": [9721, 736],
      "./wz-menu-divider.entry.js": [1784, 736],
      "./wz-menu-item.entry.js": [2329, 736],
      "./wz-menu-item_2.entry.js": [1667, 736],
      "./wz-menu-sub-menu.entry.js": [1135, 736],
      "./wz-menu-title.entry.js": [8813, 736],
      "./wz-menu.entry.js": [9844, 736],
      "./wz-multi-select.entry.js": [104, 736],
      "./wz-navigation-drawer.entry.js": [9859, 736],
      "./wz-navigation-item.entry.js": [8699, 736],
      "./wz-navigation-section.entry.js": [3571, 736],
      "./wz-notification-indicator.entry.js": [1344, 736],
      "./wz-option.entry.js": [2542, 736],
      "./wz-overline.entry.js": [6581, 736],
      "./wz-page-content.entry.js": [1153, 736],
      "./wz-page.entry.js": [8723, 736],
      "./wz-progressbar.entry.js": [6998, 736],
      "./wz-radio-button.entry.js": [6368, 736],
      "./wz-radio-group.entry.js": [5557, 736],
      "./wz-rich-tooltip.entry.js": [2798, 736],
      "./wz-script-to-be-deleted.entry.js": [5645, 736],
      "./wz-section-header.entry.js": [4323, 736],
      "./wz-select.entry.js": [7275, 736],
      "./wz-snackbar-actions.entry.js": [400, 736],
      "./wz-snackbar.entry.js": [3929, 736],
      "./wz-spinner.entry.js": [4494, 736],
      "./wz-star-rating-icon.entry.js": [8634, 736],
      "./wz-star-rating.entry.js": [4795, 736],
      "./wz-status-chip.entry.js": [3401, 736],
      "./wz-subhead1.entry.js": [5871, 736],
      "./wz-subhead2.entry.js": [5880, 736],
      "./wz-subhead3.entry.js": [4610, 736],
      "./wz-subhead4.entry.js": [1412, 736],
      "./wz-subhead5.entry.js": [6580, 736],
      "./wz-tab.entry.js": [8540, 736],
      "./wz-table-controller.entry.js": [5619, 736],
      "./wz-table-expandable-search.entry.js": [4626, 736],
      "./wz-table-page-controls.entry.js": [6126, 736],
      "./wz-table-searchable-header.entry.js": [8900, 736],
      "./wz-table.entry.js": [3858, 736],
      "./wz-tabs.entry.js": [1480, 736],
      "./wz-td.entry.js": [8195, 736],
      "./wz-text-input.entry.js": [6815, 736],
      "./wz-textarea.entry.js": [7299, 736],
      "./wz-th.entry.js": [6673, 736],
      "./wz-toggle-switch.entry.js": [3068, 736],
      "./wz-tooltip-content.entry.js": [2933, 736],
      "./wz-tooltip-source.entry.js": [1932, 736],
      "./wz-tooltip-target.entry.js": [9623, 736],
      "./wz-tooltip.entry.js": [5100, 736],
      "./wz-tr.entry.js": [559, 736],
      "./wz-truncate.entry.js": [4065, 736],
      "./wz-user-box-avatar.entry.js": [243, 736],
      "./wz-user-box-score.entry.js": [359, 736],
      "./wz-user-box.entry.js": [7350, 736]
    };
    function i(e) {
      if (!n.o(r, e))
        return Promise.resolve().then((()=>{
          var t = new Error("Cannot find module '" + e + "'");
          throw t.code = "MODULE_NOT_FOUND",
          t
        }
        ));
      var t = r[e]
        , i = t[0];
      return n.e(t[1]).then((()=>n(i)))
    }
    i.keys = ()=>Object.keys(r),
    i.id = 1037,
    e.exports = i
  }
  ,
  2515: (e,t,n)=>{
    var r = {
      "./wz-a.entry.js": [7538, 736],
      "./wz-alert-dismiss.entry.js": [6715, 736],
      "./wz-alert-pagination.entry.js": [8197, 736],
      "./wz-alert.entry.js": [5174, 736],
      "./wz-alerts-group.entry.js": [8391, 736],
      "./wz-app-launcher-item.entry.js": [2197, 736],
      "./wz-app-launcher.entry.js": [4400, 736],
      "./wz-autocomplete-item-text.entry.js": [1434, 736],
      "./wz-autocomplete-item-text_4.entry.js": [1629, 736, 592],
      "./wz-autocomplete.entry.js": [6414, 736],
      "./wz-autocomplete_2.entry.js": [4994, 736, 592],
      "./wz-badge.entry.js": [9763, 736],
      "./wz-banner.entry.js": [8173, 736],
      "./wz-basic-tooltip.entry.js": [8946, 736],
      "./wz-basic-tooltip_5.entry.js": [7044, 736, 592],
      "./wz-body1.entry.js": [853, 736],
      "./wz-body1_2.entry.js": [1127, 736, 592],
      "./wz-body2.entry.js": [6262, 736],
      "./wz-breadcrumb.entry.js": [8615, 736],
      "./wz-breadcrumbs.entry.js": [2301, 736],
      "./wz-button.entry.js": [5779, 736],
      "./wz-button_2.entry.js": [6082, 736, 592],
      "./wz-caption.entry.js": [6411, 736],
      "./wz-card-section.entry.js": [3178, 736],
      "./wz-card.entry.js": [7394, 736],
      "./wz-carousel-item.entry.js": [3241, 736],
      "./wz-carousel.entry.js": [566, 736],
      "./wz-checkable-chip.entry.js": [4206, 736],
      "./wz-checkbox.entry.js": [7405, 736],
      "./wz-chip-multi-select.entry.js": [163, 736],
      "./wz-chip-select.entry.js": [9702, 736],
      "./wz-dialog-content.entry.js": [4744, 736],
      "./wz-dialog-controls.entry.js": [2841, 736],
      "./wz-dialog-header.entry.js": [2309, 736],
      "./wz-dialog.entry.js": [7398, 736],
      "./wz-dialog_3.entry.js": [7170, 736, 592],
      "./wz-drag-and-drop-container.entry.js": [1373, 736],
      "./wz-drag-and-drop-container_2.entry.js": [8163, 736, 592],
      "./wz-empty-state.entry.js": [333, 736],
      "./wz-file-input.entry.js": [250, 736],
      "./wz-filter.entry.js": [7849, 736],
      "./wz-filter_5.entry.js": [5223, 736, 592],
      "./wz-h1.entry.js": [4296, 736],
      "./wz-h2.entry.js": [5305, 736],
      "./wz-h3.entry.js": [126, 736],
      "./wz-h4.entry.js": [8625, 736],
      "./wz-h5.entry.js": [8432, 736],
      "./wz-h6.entry.js": [3855, 736],
      "./wz-h7.entry.js": [8328, 736],
      "./wz-header-branding.entry.js": [8940, 736],
      "./wz-header-controls.entry.js": [6330, 736],
      "./wz-header-user-panel.entry.js": [6722, 736],
      "./wz-header.entry.js": [9988, 736],
      "./wz-icon.entry.js": [5335, 736],
      "./wz-image-chip.entry.js": [841, 736],
      "./wz-label.entry.js": [4286, 736],
      "./wz-label_2.entry.js": [2045, 736, 592],
      "./wz-list-item.entry.js": [3117, 736],
      "./wz-list.entry.js": [2607, 736],
      "./wz-menu-chip.entry.js": [9721, 736],
      "./wz-menu-divider.entry.js": [1784, 736],
      "./wz-menu-item.entry.js": [2329, 736],
      "./wz-menu-item_2.entry.js": [1667, 736, 592],
      "./wz-menu-sub-menu.entry.js": [1135, 736],
      "./wz-menu-title.entry.js": [8813, 736],
      "./wz-menu.entry.js": [9844, 736],
      "./wz-multi-select.entry.js": [104, 736],
      "./wz-navigation-drawer.entry.js": [9859, 736],
      "./wz-navigation-item.entry.js": [8699, 736],
      "./wz-navigation-section.entry.js": [3571, 736],
      "./wz-notification-indicator.entry.js": [1344, 736],
      "./wz-option.entry.js": [2542, 736],
      "./wz-overline.entry.js": [6581, 736],
      "./wz-page-content.entry.js": [1153, 736],
      "./wz-page.entry.js": [8723, 736],
      "./wz-progressbar.entry.js": [6998, 736],
      "./wz-radio-button.entry.js": [6368, 736],
      "./wz-radio-group.entry.js": [5557, 736],
      "./wz-rich-tooltip.entry.js": [2798, 736],
      "./wz-script-to-be-deleted.entry.js": [5645, 736],
      "./wz-section-header.entry.js": [4323, 736],
      "./wz-select.entry.js": [7275, 736],
      "./wz-snackbar-actions.entry.js": [400, 736],
      "./wz-snackbar.entry.js": [3929, 736],
      "./wz-spinner.entry.js": [4494, 736],
      "./wz-star-rating-icon.entry.js": [8634, 736],
      "./wz-star-rating.entry.js": [4795, 736],
      "./wz-status-chip.entry.js": [3401, 736],
      "./wz-subhead1.entry.js": [5871, 736],
      "./wz-subhead2.entry.js": [5880, 736],
      "./wz-subhead3.entry.js": [4610, 736],
      "./wz-subhead4.entry.js": [1412, 736],
      "./wz-subhead5.entry.js": [6580, 736],
      "./wz-tab.entry.js": [8540, 736],
      "./wz-table-controller.entry.js": [5619, 736],
      "./wz-table-expandable-search.entry.js": [4626, 736],
      "./wz-table-page-controls.entry.js": [6126, 736],
      "./wz-table-searchable-header.entry.js": [8900, 736],
      "./wz-table.entry.js": [3858, 736],
      "./wz-tabs.entry.js": [1480, 736],
      "./wz-td.entry.js": [8195, 736],
      "./wz-text-input.entry.js": [6815, 736],
      "./wz-textarea.entry.js": [7299, 736],
      "./wz-th.entry.js": [6673, 736],
      "./wz-toggle-switch.entry.js": [3068, 736],
      "./wz-tooltip-content.entry.js": [2933, 736],
      "./wz-tooltip-source.entry.js": [1932, 736],
      "./wz-tooltip-target.entry.js": [9623, 736],
      "./wz-tooltip.entry.js": [5100, 736],
      "./wz-tr.entry.js": [559, 736],
      "./wz-truncate.entry.js": [4065, 736],
      "./wz-user-box-avatar.entry.js": [243, 736],
      "./wz-user-box-score.entry.js": [359, 736],
      "./wz-user-box.entry.js": [7350, 736]
    };
    function i(e) {
      if (!n.o(r, e))
        return Promise.resolve().then((()=>{
          var t = new Error("Cannot find module '" + e + "'");
          throw t.code = "MODULE_NOT_FOUND",
          t
        }
        ));
      var t = r[e]
        , i = t[0];
      return Promise.all(t.slice(1).map(n.e)).then((()=>n(i)))
    }
    i.keys = ()=>Object.keys(r),
    i.id = 2515,
    e.exports = i
  }
  ,
  9876: (e,t)=>{
    (()=>{
      "use strict";
      var e = {
        352: (e,t,n)=>{
          t.dJ = void 0,
          n(68);
          var r = n(133);
          n(618),
          n(700),
          t.dJ = function(e) {
            for (var t = [], n = 1; n < arguments.length; n++)
              t[n - 1] = arguments[n];
            if (0 === t.length)
              return (0,
              r.createResourceUrl)(e[0]);
            e[0].toLowerCase();
            for (var i = [e[0]], o = 0; o < t.length; o++)
              i.push(encodeURIComponent(t[o])),
              i.push(e[o + 1]);
            return (0,
            r.createResourceUrl)(i.join(""))
          }
        }
        ,
        577: (e,t,n)=>{
          t.xG = void 0;
          var r = n(133);
          n(618),
          t.xG = function(e, t) {
            e.src = (0,
            r.unwrapResourceUrl)(t),
            function(e) {
              var t = function(e) {
                var t, n = e.document, r = null === (t = n.querySelector) || void 0 === t ? void 0 : t.call(n, "script[nonce]");
                return r && (r.nonce || r.getAttribute("nonce")) || ""
              }(e.ownerDocument && e.ownerDocument.defaultView || window);
              t && e.setAttribute("nonce", t)
            }(e)
          }
        }
        ,
        68: ()=>{}
        ,
        133: (e,t,n)=>{
          Object.defineProperty(t, "__esModule", {
            value: !0
          }),
          t.unwrapResourceUrl = t.isResourceUrl = t.createResourceUrl = t.TrustedResourceUrl = void 0,
          n(68);
          var r = n(498)
            , i = n(687)
            , o = function() {
            function e(e, t) {
              (0,
              r.ensureTokenIsValid)(t),
              this.privateDoNotAccessOrElseWrappedResourceUrl = e
            }
            return e.prototype.toString = function() {
              return this.privateDoNotAccessOrElseWrappedResourceUrl.toString()
            }
            ,
            e
          }()
            , a = void 0 !== typeof window ? window.TrustedScriptURL : void 0;
          t.TrustedResourceUrl = null != a ? a : o,
          t.createResourceUrl = function(e) {
            var t, n = e, a = null === (t = (0,
            i.getTrustedTypesPolicy)()) || void 0 === t ? void 0 : t.createScriptURL(n);
            return null != a ? a : new o(n,r.secretToken)
          }
          ,
          t.isResourceUrl = function(e) {
            var t;
            return (null === (t = (0,
            i.getTrustedTypes)()) || void 0 === t ? void 0 : t.isScriptURL(e)) || e instanceof o
          }
          ,
          t.unwrapResourceUrl = function(e) {
            var t;
            if (null === (t = (0,
            i.getTrustedTypes)()) || void 0 === t ? void 0 : t.isScriptURL(e))
              return e;
            if (e instanceof o)
              return e.privateDoNotAccessOrElseWrappedResourceUrl;
            throw new Error("")
          }
        }
        ,
        618: (e,t,n)=>{
          Object.defineProperty(t, "__esModule", {
            value: !0
          }),
          t.unwrapScript = t.isScript = t.EMPTY_SCRIPT = t.createScript = t.SafeScript = void 0,
          n(68);
          var r = n(498)
            , i = n(687)
            , o = function() {
            function e(e, t) {
              (0,
              r.ensureTokenIsValid)(t),
              this.privateDoNotAccessOrElseWrappedScript = e
            }
            return e.prototype.toString = function() {
              return this.privateDoNotAccessOrElseWrappedScript.toString()
            }
            ,
            e
          }();
          function a(e, t) {
            return null != t ? t : new o(e,r.secretToken)
          }
          var s = void 0 !== typeof window ? window.TrustedScript : void 0;
          t.SafeScript = null != s ? s : o,
          t.createScript = function(e) {
            var t, n = e;
            return a(n, null === (t = (0,
            i.getTrustedTypesPolicy)()) || void 0 === t ? void 0 : t.createScript(n))
          }
          ,
          t.EMPTY_SCRIPT = function() {
            var e;
            return a("", null === (e = (0,
            i.getTrustedTypes)()) || void 0 === e ? void 0 : e.emptyScript)
          }(),
          t.isScript = function(e) {
            var t;
            return (null === (t = (0,
            i.getTrustedTypes)()) || void 0 === t ? void 0 : t.isScript(e)) || e instanceof o
          }
          ,
          t.unwrapScript = function(e) {
            var t;
            if (null === (t = (0,
            i.getTrustedTypes)()) || void 0 === t ? void 0 : t.isScript(e))
              return e;
            if (e instanceof o)
              return e.privateDoNotAccessOrElseWrappedScript;
            throw new Error("")
          }
        }
        ,
        498: (e,t,n)=>{
          Object.defineProperty(t, "__esModule", {
            value: !0
          }),
          t.ensureTokenIsValid = t.secretToken = void 0,
          n(68),
          t.secretToken = {},
          t.ensureTokenIsValid = function(e) {}
        }
        ,
        700: (e,t)=>{
          Object.defineProperty(t, "__esModule", {
            value: !0
          }),
          t.assertIsTemplateObject = void 0,
          t.assertIsTemplateObject = function(e, t, n) {
            if (!Array.isArray(e) || !Array.isArray(e.raw) || !t && 1 !== e.length)
              throw new TypeError(n)
          }
        }
        ,
        687: (e,t)=>{
          Object.defineProperty(t, "__esModule", {
            value: !0
          }),
          t.TEST_ONLY = t.getTrustedTypesPolicy = t.getTrustedTypes = void 0;
          var n, r = "google#safe";
          function i() {
            var e;
            return "" !== r && null !== (e = function() {
              if ("undefined" != typeof window)
                return window.trustedTypes
            }()) && void 0 !== e ? e : null
          }
          t.getTrustedTypes = i,
          t.getTrustedTypesPolicy = function() {
            var e, t;
            if (void 0 === n)
              try {
                n = null !== (t = null === (e = i()) || void 0 === e ? void 0 : e.createPolicy(r, {
                  createHTML: function(e) {
                    return e
                  },
                  createScript: function(e) {
                    return e
                  },
                  createScriptURL: function(e) {
                    return e
                  }
                })) && void 0 !== t ? t : null
              } catch (e) {
                n = null
              }
            return n
          }
          ,
          t.TEST_ONLY = {
            resetDefaults: function() {
              n = void 0,
              r = "google#safe"
            },
            setTrustedTypesPolicyName: function(e) {
              r = e
            }
          }
        }
        ,
        269: (e,t,n)=>{
          var r, i;
          n.d(t, {
            ChatSdkAppIdentifier: ()=>r,
            MessageType: ()=>i
          }),
          function(e) {
            e[e.APP_IDENTIFIER_UNSPECIFIED = 0] = "APP_IDENTIFIER_UNSPECIFIED",
            e[e.WAZE_INBOX_WEBVIEW = 1] = "WAZE_INBOX_WEBVIEW",
            e[e.WAZE_MAP_EDITOR = 2] = "WAZE_MAP_EDITOR",
            e[e.WAZE_FORUM = 3] = "WAZE_FORUM",
            e[e.WAZE_DISCUSS = 4] = "WAZE_DISCUSS",
            e[e.AUTOMATED_PROBER = 5] = "AUTOMATED_PROBER",
            e[e.WAZE_EDITOR_PROFILE = 6] = "WAZE_EDITOR_PROFILE",
            e[e.WAZEOPEDIA = 7] = "WAZEOPEDIA"
          }(r || (r = {})),
          function(e) {
            e.ChatReady = "ChatReady",
            e.ChatUnreadCount = "ChatUnreadCount",
            e.ChatVisibility = "ChatVisibility",
            e.ChatSetVisibility = "ChatSetVisibility",
            e.ChatOpenConversation = "ChatOpenConversation"
          }(i || (i = {}))
        }
        ,
        9: (e,t,n)=>{
          n.d(t, {
            WMPChatV1Service: ()=>o
          });
          var r = n(352)
            , i = n(577);
          class o {
            constructor(e) {
              this.options = e,
              this.afterInitCallbacks = []
            }
            init() {
              if (this.initPromise)
                return this.initPromise;
              const e = this.getTrustedSrcUrl();
              if (null == e)
                return Promise.reject(new Error("[WMPChatV1Service] could not determine src url"));
              const t = document.createElement("script");
              return i.xG(t, e),
              t.type = "text/javascript",
              this.initPromise = new Promise(((e,n)=>{
                t.onload = ()=>this.initSDK(e, n),
                document.head.appendChild(t)
              }
              )),
              this.initPromise
            }
            getVisibility() {
              return null != this.chatSDK && this.chatSDK.getVisibility()
            }
            setVisibility(e) {
              if (null != this.chatSDK)
                return this.chatSDK.setVisibility(e);
              this.afterInitCallbacks.push((()=>{
                var t;
                return null === (t = this.chatSDK) || void 0 === t ? void 0 : t.setVisibility(e)
              }
              ))
            }
            startChat(e, t) {
              if (null != this.chatSDK)
                return this.chatSDK.startChat(e, t);
              this.afterInitCallbacks.push((()=>{
                var n;
                return null === (n = this.chatSDK) || void 0 === n ? void 0 : n.startChat(e, t)
              }
              ))
            }
            getUnreadChatCount() {
              return null == this.chatSDK ? 0 : this.chatSDK.getUnreadChatCount()
            }
            subscribe(e) {
              null != this.chatSDK ? this.chatSDK.subscribe(e) : this.afterInitCallbacks.push((()=>{
                var t;
                return null === (t = this.chatSDK) || void 0 === t ? void 0 : t.subscribe(e)
              }
              ))
            }
            unsubscribe(e) {
              null != this.chatSDK ? this.chatSDK.unsubscribe(e) : this.afterInitCallbacks.push((()=>{
                var t;
                return null === (t = this.chatSDK) || void 0 === t ? void 0 : t.unsubscribe(e)
              }
              ))
            }
            initSDK(e, t) {
              window.ChatSDK.create(this.options).then((t=>{
                var n;
                for (this.chatSDK = t; this.afterInitCallbacks.length; )
                  null === (n = this.afterInitCallbacks.shift()) || void 0 === n || n.call(this);
                e()
              }
              )).catch((e=>{
                console.error("[WMPChatV1Service] Chat sdk create error", e),
                t(e)
              }
              ))
            }
            getTrustedSrcUrl() {
              const e = window.location.hostname
                , t = window.location.pathname;
              if ("localhost" === e && t.includes("sdk-playground"))
                return r.dJ`http://localhost:3000/chat/sdk/v1`;
              switch (e) {
              case "localhost":
              case "editor.localhost":
              case "www.gcp.wazestg.com":
              case "dev.gcp.wazestg.com":
                return r.dJ`https://www.gcp.wazestg.com/chat/sdk/v1`;
              case "beta.waze.com":
              case "www.waze.com":
                return r.dJ`https://www.waze.com/chat/sdk/v1`;
              default:
                console.warn("[WMPChatV1Service] Unable to determine chat environment")
              }
            }
          }
        }
      }
        , n = {};
      function r(t) {
        var i = n[t];
        if (void 0 !== i)
          return i.exports;
        var o = n[t] = {
          exports: {}
        };
        return e[t](o, o.exports, r),
        o.exports
      }
      r.d = (e,t)=>{
        for (var n in t)
          r.o(t, n) && !r.o(e, n) && Object.defineProperty(e, n, {
            enumerable: !0,
            get: t[n]
          })
      }
      ,
      r.o = (e,t)=>Object.prototype.hasOwnProperty.call(e, t),
      r.r = e=>{
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
          value: "Module"
        }),
        Object.defineProperty(e, "__esModule", {
          value: !0
        })
      }
      ;
      var i = {};
      (()=>{
        r.r(i),
        r.d(i, {
          ChatSdkAppIdentifier: ()=>e.ChatSdkAppIdentifier,
          MessageType: ()=>e.MessageType,
          WMPChatV1Service: ()=>t.WMPChatV1Service
        });
        var e = r(269)
          , t = r(9)
      }
      )();
      var o = t;
      for (var a in i)
        o[a] = i[a];
      i.__esModule && Object.defineProperty(o, "__esModule", {
        value: !0
      })
    }
    )()
  }
  ,
  8819: (e,t,n)=>{
    "use strict";
    if (n.d(t, {
      E_: ()=>E,
      Ew: ()=>_,
      GZ: ()=>M,
      Tp: ()=>I,
      Wk: ()=>y,
      bs: ()=>j,
      cJ: ()=>S,
      fu: ()=>m,
      h8: ()=>N,
      j0: ()=>C,
      mW: ()=>h,
      r_: ()=>O,
      tb: ()=>T,
      uU: ()=>R
    }),
    900 != n.j)
      var r = n(4144);
    var i, o, a, s, l, u = n(4345), c = n(3584), f = n(2318), d = n(7766), p = n(9302), b = n(4295), m = Object.freeze(((i = {})[d.p1.Received] = c.MessageReceipt.Type.RECEIVED,
    i[d.p1.Read] = c.MessageReceipt.Type.READ,
    i)), h = Object.freeze(((o = {})[c.MessageReceipt.Type.RECEIVED] = d.rJ.Received,
    o[c.MessageReceipt.Type.READ] = d.rJ.Read,
    o[c.MessageReceipt.Type.UNKNOWN] = void 0,
    o)), v = Object.freeze(((a = {})[u.Identifier.Type.USER_ID] = d.pq.User,
    a[u.Identifier.Type.GROUP_ID] = d.pq.Group,
    a[u.Identifier.Type.UNKNOWN_ID_TYPE] = void 0,
    a)), g = ((s = {})[p.MembershipRole.ADMIN] = d.VC.Admin,
    s[p.MembershipRole.MEMBER] = d.VC.Member,
    s[p.MembershipRole.MEMBERSHIP_ROLE_UNKNOWN] = void 0,
    s), y = ((l = {})[d.VC.Admin] = p.MembershipRole.ADMIN,
    l[d.VC.Member] = p.MembershipRole.MEMBER,
    l);
    function w(e) {
      var t = v[e];
      if (!t)
        throw new Error("Unsupported identifier type ".concat(e));
      return t
    }
    function E(e) {
      return {
        id: e.getId(),
        type: w(e.getIdType())
      }
    }
    function O(e) {
      var t = g[e];
      if (!t)
        throw new Error("Unsupported membership role ".concat(e));
      return t
    }
    function S(e) {
      return (new u.Identifier).setIdType(function(e) {
        switch (e) {
        case d.pq.User:
          return u.Identifier.Type.USER_ID;
        case d.pq.Group:
          return u.Identifier.Type.GROUP_ID
        }
      }(e.type)).setId(e.id)
    }
    function P(e) {
      return (new u.Identifier).setIdType(u.Identifier.Type.USER_ID).setId(e)
    }
    function j(e, t) {
      return (new u.RequestHeader).setRequestId((0,
      r.Z)()).setDeviceType(f.DeviceType.WEB).setAppIdentifier(t).setInstallationId(e)
    }
    function M(e) {
      return {
        timestamp: Date.now().toString(),
        method: e
      }
    }
    function C(e, t) {
      var n = (new c.Message).setId((0,
      r.Z)()).setSenderId(P(e)).setDestinationId(b.W.getIdentifier(t).toWmpIdentifier());
      return n.setType(c.Message.Type.DELETE),
      n.setDelete((new c.MessageDelete).setType(c.MessageDelete.Type.ONLY_FOR_SENDER)),
      n
    }
    function I(e, t, n) {
      var i = (new c.Message).setId((0,
      r.Z)()).setSenderId(P(e)).setDestinationId(b.W.getIdentifier(t).toWmpIdentifier());
      i.setType(c.Message.Type.ACTION);
      var o = (new c.Action).setType(c.Action.Type.BLOCK).setBlock((new c.Action.Block).setBlock(n));
      return i.setAction(o),
      i
    }
    function R(e) {
      var t = e.toObject();
      return {
        showProfileFullName: t.showProfileFullName,
        showProfileImage: t.showProfileImage
      }
    }
    function _(e) {
      return e.getType() === c.Message.Type.GROUP_UPDATE
    }
    function T(e) {
      var t;
      return e.getType() === c.Message.Type.GROUP_UPDATE && (null === (t = e.getGroupUpdate()) || void 0 === t ? void 0 : t.getPayloadCase()) === c.GroupUpdate.PayloadCase.INVITATION_UPDATED
    }
    function N(e) {
      if (null != e) {
        for (var t = new u.Context, n = 0, r = Object.entries(e); n < r.length; n++) {
          var i = r[n]
            , o = i[0]
            , a = i[1];
          t.addOpaqueKvPair((new u.ContextKeyValuePair).setKey(o).setValue(a))
        }
        return t
      }
    }
  }
  ,
  17: (e,t,n)=>{
    "use strict";
    n.d(t, {
      P: ()=>f
    });
    const r = "MqPVY3jeXHzQhBwtwq7HDQ=="
      , i = "K6-azKCDb4C8xql9X7xqvQ=="
      , o = "QqhfyA6nU0LC2-azKzecBA=="
      , a = "b8SSZ5t1lJmOOw93mDej9w==";
    var s = n(8098)
      , l = n.n(s)
      , u = n(5466)
      , c = n(9983)
      , f = function(e) {
      var t = e.actions
        , n = e.onMenuToggle
        , s = u.useRef(null);
      return u.createElement("div", null, u.createElement(c.WzButton, {
        color: "clear-icon",
        onClick: function(e) {
          s.current && (s.current.toggleMenu(e),
          null == n || n())
        }
      }, u.createElement("i", {
        className: l()(r, "w-icon w-icon-dot-menu"),
        slot: "left-icon"
      })), u.createElement("div", {
        className: i
      }, u.createElement(c.WzMenu, {
        ref: s,
        className: o
      }, t.map((function(e, t) {
        var n;
        return u.createElement(c.WzMenuItem, {
          key: t,
          onClick: e.onClick
        }, u.createElement("span", {
          className: l()((n = {},
          n[a] = e.danger,
          n))
        }, e.label))
      }
      )))))
    }
  }
  ,
  5176: (e,t,n)=>{
    "use strict";
    n.d(t, {
      g: ()=>T
    });
    const r = "-z2y+2lN8Ca+fRcLt5Mqlw=="
      , i = "gESSDj2JNW+JAMW2ZrzQGw=="
      , o = "_5d6lIe5QH1hQalF2ro-gXw=="
      , a = "j8tjyFApa3J9fRrL2Z5mqw=="
      , s = "AWvVXzxu+gxK6h5pDsWkjQ==";
    var l, u, c = n(2832), f = n(5466), d = n(2806), p = n(8759), b = n(1997), m = n(6116), h = n(2388), v = n(4454), g = function() {
      return g = Object.assign || function(e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in t = arguments[n])
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e
      }
      ,
      g.apply(this, arguments)
    };
    !function(e) {
      e.InteractiveWidget = "interactive-widget"
    }(l || (l = {})),
    function(e) {
      e.ResizesVisual = "resizes-visual",
      e.ResizesContent = "resizes-content",
      e.OverlaysContent = "overlays-content"
    }(u || (u = {}));
    var y = function() {
      function e() {}
      return Object.defineProperty(e, "getValue", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return this.metaViewportContent[e]
        }
      }),
      Object.defineProperty(e, "setValue", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          var n;
          this.setMetaViewportContent(g(g({}, this.metaViewportContent), ((n = {})[e] = t,
          n)))
        }
      }),
      Object.defineProperty(e, "metaViewportElement", {
        get: function() {
          return document.querySelector("meta[name=viewport]")
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e, "metaViewportContent", {
        get: function() {
          var e, t = null === (e = this.metaViewportElement) || void 0 === e ? void 0 : e.getAttribute("content");
          return t ? t.split(",").reduce((function(e, t) {
            var n = t.split("=")
              , r = n[0]
              , i = void 0 === r ? "" : r
              , o = n[1]
              , a = void 0 === o ? "" : o;
            return e[i.trim()] = a.trim(),
            e
          }
          ), {}) : {}
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e, "createMetaViewportElement", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          var e = document.createElement("meta");
          return e.setAttribute("name", "viewport"),
          e.setAttribute("content", ""),
          document.head.appendChild(e),
          e
        }
      }),
      Object.defineProperty(e, "setMetaViewportContent", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t, n = Object.entries(e).map((function(e) {
            return e.join("=")
          }
          )).join(", ");
          (null !== (t = this.metaViewportElement) && void 0 !== t ? t : this.createMetaViewportElement()).setAttribute("content", n)
        }
      }),
      e
    }()
      , w = function() {
      function e(e, t) {
        void 0 === t && (t = {}),
        Object.defineProperty(this, "element", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "options", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "animationFrameRequestId", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "lastViewportHeight", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: 0
        })
      }
      return Object.defineProperty(e.prototype, "init", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          var e = this;
          this.setViewportPositionStyle(),
          this.animationFrameRequestId = window.requestAnimationFrame((function() {
            return e.init()
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "dispose", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          void 0 !== this.animationFrameRequestId && (window.cancelAnimationFrame(this.animationFrameRequestId),
          this.animationFrameRequestId = void 0)
        }
      }),
      Object.defineProperty(e.prototype, "documentHeight", {
        get: function() {
          return window.document.documentElement.clientHeight
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "viewportHeight", {
        get: function() {
          var e, t, n, r;
          return (null !== (t = null === (e = window.visualViewport) || void 0 === e ? void 0 : e.height) && void 0 !== t ? t : this.documentHeight) - (null !== (r = null === (n = window.navigator.virtualKeyboard) || void 0 === n ? void 0 : n.boundingRect.height) && void 0 !== r ? r : 0)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "viewportOffsetTop", {
        get: function() {
          var e, t;
          return null !== (t = null === (e = window.visualViewport) || void 0 === e ? void 0 : e.offsetTop) && void 0 !== t ? t : 0
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "keyboardOpen", {
        get: function() {
          return this.viewportHeight < this.documentHeight
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "setViewportPositionStyle", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          this.lastViewportHeight === this.viewportHeight ? (this.element.style.setProperty("--waze-viewport-height", "".concat(this.viewportHeight, "px")),
          this.element.style.setProperty("--waze-viewport-offset-top", "".concat(this.viewportOffsetTop, "px")),
          this.options.classNameKeyboardOpen && this.element.classList.toggle(this.options.classNameKeyboardOpen, this.keyboardOpen)) : this.lastViewportHeight = this.viewportHeight
        }
      }),
      e
    }()
      , E = function() {
      return E = Object.assign || function(e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in t = arguments[n])
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e
      }
      ,
      E.apply(this, arguments)
    }
      , O = Object.freeze({
      classNameKeyboardOpen: "",
      interactiveWidgetWorkaroundAllowed: !0,
      androidInteractiveWidgetWorkaroundAllowed: !1,
      androidInteractiveWidgetChangeAllowed: !1
    })
      , S = function() {
      function e(e) {
        Object.defineProperty(this, "containerElement", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "contentElement", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "options", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "visualViewportObserver", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        this.options = E(E({}, O), e),
        this.contentElement = document.createElement("div"),
        this.interactiveWidgetWorkaroundEnabled ? (this.containerElement = document.createElement("div"),
        this.containerElement.appendChild(this.contentElement)) : this.containerElement = this.contentElement,
        this.containerElement.className = e.className,
        this.visualViewportObserver = new w(this.containerElement,e)
      }
      return Object.defineProperty(e, "interactiveWidgetContentResizeEnabled", {
        get: function() {
          return y.getValue(l.InteractiveWidget) === u.ResizesContent
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e, "enableInteractiveWidgetContentResize", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          y.setValue(l.InteractiveWidget, u.ResizesContent)
        }
      }),
      Object.defineProperty(e.prototype, "init", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          (0,
          v.isAndroid)() && !e.interactiveWidgetContentResizeEnabled && (this.options.androidInteractiveWidgetChangeAllowed ? e.enableInteractiveWidgetContentResize() : this.options.androidInteractiveWidgetWorkaroundAllowed || console.warn("\nChat SDK warning.\n\nChrome on Android >= 108 is expected to work improperly.\nMore on that can be found here go/waze-chat-web#viewport-resize-behavior-in-chrome-on-android.\n")),
          this.interactiveWidgetWorkaroundEnabled && (this.setInteractiveWidgetWorkaroundStyle(),
          this.visualViewportObserver.init())
        }
      }),
      Object.defineProperty(e.prototype, "dispose", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          this.visualViewportObserver.dispose()
        }
      }),
      Object.defineProperty(e.prototype, "interactiveWidgetWorkaroundEnabled", {
        get: function() {
          var t = (0,
          v.isApple)()
            , n = (0,
          v.isAndroid)() && !e.interactiveWidgetContentResizeEnabled && this.options.androidInteractiveWidgetWorkaroundAllowed;
          return (t || n) && this.options.interactiveWidgetWorkaroundAllowed
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "setInteractiveWidgetWorkaroundStyle", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          this.containerElement.style.overflowY = "scroll",
          this.containerElement.style.overscrollBehavior = "none",
          this.contentElement.style.position = "relative",
          this.contentElement.style.width = "100%",
          this.contentElement.style.height = "calc(100% + 1px)",
          this.contentElement.style.left = "0",
          this.contentElement.style.top = "0"
        }
      }),
      e
    }();
    const P = "Px7W9hVqc2dIKaqFFtvuFQ==";
    var j = function(e) {
      var t = e.appMode
        , n = e.children
        , r = f.useRef(null)
        , i = t !== h.J.Embed
        , o = f.useState((function() {
        return new S({
          className: P,
          interactiveWidgetWorkaroundAllowed: i
        })
      }
      ))[0];
      return f.useEffect((function() {
        var e = r.current;
        if (e)
          return e.appendChild(o.containerElement),
          o.init(),
          function() {
            o.dispose(),
            e.removeChild(o.containerElement)
          }
      }
      ), [t, o]),
      f.createElement(f.Fragment, null, f.createElement("div", {
        ref: r
      }), m.createPortal(n, o.contentElement))
    }
      , M = n(1807)
      , C = n(72)
      , I = n(713)
      , R = n(6929)
      , _ = function(e) {
      var t = e.basename
        , n = (0,
      b.a)()
        , r = f.useState((function() {
        var e = [{
          path: "/",
          element: f.createElement(R.s5, null),
          children: R.j0
        }, {
          path: "*",
          element: f.createElement(M.Fg, {
            to: "/"
          })
        }];
        return n.uiState.appMode === h.J.Embed ? (0,
        M.bi)(e) : (0,
        C.aj)(e, {
          basename: null != t ? t : "/".concat(I.ty, "/").concat(n.uiState.appMode)
        })
      }
      ))[0];
      return f.createElement(M.pG, {
        router: r
      })
    }
      , T = (0,
    c.Pi)((function(e) {
      var t = e.basename
        , n = (0,
      b.a)();
      return f.createElement("div", {
        style: {
          "--waze-chat-placeholder-transition-duration": "".concat(300, "ms")
        }
      }, f.createElement(j, {
        appMode: n.uiState.appMode
      }, f.createElement(d.Z, null, n.uiState.chatOpen ? f.createElement(p.Z, {
        key: "chat",
        classNames: {},
        timeout: 300
      }, f.createElement(_, {
        basename: t
      })) : f.createElement(p.Z, {
        key: "placeholder",
        classNames: {
          enter: i,
          enterActive: o,
          exit: a,
          exitActive: s
        },
        timeout: 300
      }, f.createElement("div", {
        className: r
      })))))
    }
    ));
    T.displayName = "App"
  }
  ,
  3700: (e,t,n)=>{
    "use strict";
    n.d(t, {
      q: ()=>E
    });
    const r = "KpQHr4TfOF2vHRrGXUXzDQ==";
    var i, o, a, s, l, u, c, f, d, p = n(5466), b = n(7766);
    function m() {
      return m = Object.assign ? Object.assign.bind() : function(e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];
          for (var r in n)
            Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
        }
        return e
      }
      ,
      m.apply(this, arguments)
    }
    const h = function(e) {
      return p.createElement("svg", m({
        viewBox: "0 0 44 44",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg"
      }, e), i || (i = p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M22 44c12.15 0 22-9.85 22-22S34.15 0 22 0 0 9.85 0 22s9.85 22 22 22z",
        fill: "#EBF4F6"
      })), o || (o = p.createElement("circle", {
        cx: 22,
        cy: 22,
        r: 22,
        fill: "#E6F7FF"
      })), a || (a = p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M31.422 34.04a3.988 3.988 0 10-7.976 0 3.988 3.988 0 007.976 0",
        fill: "#18427C"
      })), s || (s = p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M9.883 20.482c0-7.488 6.07-13.558 13.559-13.558C30.912 6.924 37 13.012 37 20.482c0 7.488-6.07 13.559-13.558 13.559l-4.785-.003c-7.974-.015-11.987-6.416-11.973-7.982a3.184 3.184 0 003.2-3.181v-2.393z",
        fill: "#EBF4F6"
      })), l || (l = p.createElement("path", {
        clipRule: "evenodd",
        d: "M9.883 20.482c0-7.488 6.07-13.558 13.559-13.558C30.912 6.924 37 13.012 37 20.482c0 7.488-6.07 13.559-13.558 13.559l-4.785-.003c-7.974-.015-11.987-6.416-11.973-7.982a3.184 3.184 0 003.2-3.181v-2.393z",
        stroke: "#18427C",
        strokeWidth: 1.595,
        strokeLinejoin: "round"
      })), u || (u = p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M20.253 34.043a3.988 3.988 0 10-7.975 0 3.988 3.988 0 007.975 0",
        fill: "#18427C"
      })), c || (c = p.createElement("path", {
        d: "M17.975 16.51a2.376 2.376 0 012.255-1.6c1.047 0 1.936.668 2.253 1.595M27.56 16.51a2.376 2.376 0 012.255-1.6c1.047 0 1.936.668 2.254 1.595",
        stroke: "#18427C",
        strokeWidth: 1.595,
        strokeLinecap: "round"
      })), f || (f = p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M17.873 21.248h14.288c.038 0 .068.03.067.068l-.007.652c0 4.018-3.24 7.273-7.233 7.26-3.983-.015-7.182-3.327-7.182-7.339v-.574c0-.037.03-.067.067-.067",
        fill: "#18427C"
      })), d || (d = p.createElement("path", {
        clipRule: "evenodd",
        d: "M17.873 21.248h14.288c.038 0 .068.03.067.068l-.007.652c0 4.018-3.24 7.273-7.233 7.26-3.983-.015-7.182-3.327-7.182-7.339v-.574c0-.037.03-.067.067-.067z",
        stroke: "#18427C",
        strokeWidth: 1.595
      })))
    };
    var v, g;
    function y() {
      return y = Object.assign ? Object.assign.bind() : function(e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];
          for (var r in n)
            Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
        }
        return e
      }
      ,
      y.apply(this, arguments)
    }
    const w = function(e) {
      return p.createElement("svg", y({
        viewBox: "0 0 40 40",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg"
      }, e), v || (v = p.createElement("circle", {
        cx: 20,
        cy: 20,
        r: 20,
        fill: "#F2F4F7"
      })), g || (g = p.createElement("path", {
        d: "M28.36 22.99c1.05-1.19 1.66-2.8 1.66-4.49 0-3.58-2.69-6.5-6-6.5-.69 0-1.35.12-1.99.37-1.26-1.46-3.04-2.37-5.02-2.37-3.81 0-6.91 3.36-6.91 7.5 0 2.12.81 4.08 2.19 5.48-2.77 1.42-3.16 4-3.18 5.17-.01.48.17.94.51 1.28.35.36.85.57 1.37.57h18c1.01 0 1.82-.73 1.89-1.71.08-1.2-.05-3.85-2.52-5.3zM19.03 28h-7.92c.08-1.38.77-3.08 3.45-3.73.4-.1.7-.43.76-.84a.99.99 0 00-.5-1.01c-1.68-.94-2.72-2.82-2.72-4.92 0-3.03 2.2-5.5 4.91-5.5s4.91 2.47 4.91 5.5c0 2.07-1.02 3.95-2.68 4.9a1.005 1.005 0 00.28 1.85c2.75.62 3.38 2.35 3.38 3.76h-3.87V28zm5.88 0c-.01-1.3-.42-3.75-3.12-5.08 1.34-1.39 2.13-3.34 2.13-5.42 0-1.22-.28-2.37-.76-3.39.29-.07.57-.11.86-.11 2.21 0 4 2.02 4 4.5 0 1.63-.79 3.14-2.06 3.94-.34.21-.52.6-.46.99s.34.71.73.82c2.29.62 2.73 2.35 2.67 3.75h-3.99z",
        fill: "#72767D"
      })))
    };
    var E = p.memo((function(e) {
      var t = e.profileType
        , n = e.imageUrl
        , i = e.size
        , o = void 0 === i ? 44 : i;
      return n ? p.createElement("div", {
        className: r,
        style: {
          backgroundImage: 'url("'.concat(n, '")'),
          width: "".concat(o, "px"),
          height: "".concat(o, "px")
        }
      }) : t === b.pq.User ? p.createElement(h, {
        width: o,
        height: o
      }) : p.createElement(w, {
        width: o,
        height: o
      })
    }
    ));
    E.displayName = "Avatar"
  }
  ,
  4049: (e,t,n)=>{
    "use strict";
    n.d(t, {
      p: ()=>d
    });
    const r = "Im2Uj3HB0M4G4kmfAwhULA==";
    var i = n(5466)
      , o = n(9983)
      , a = n(3955)
      , s = n.n(a)
      , l = n(2832)
      , u = n(3751)
      , c = n(3971)
      , f = n(155)
      , d = (0,
    l.Pi)((function(e) {
      var t = e.group
        , n = e.onClose
        , a = (0,
      c.O)().report
        , l = "chat.group_profile.change_description"
        , d = i.useState(t.description)
        , p = d[0]
        , b = d[1]
        , m = i.useState(!1)
        , h = m[0]
        , v = m[1]
        , g = i.useState()
        , y = g[0]
        , w = g[1]
        , E = i.useCallback((function() {
        v(!0),
        t.updateDescription(p).then((function() {
          v(!1),
          n()
        }
        )).catch((function(e) {
          w({
            text: s().t("error", {
              scope: l
            })
          }),
          a(e, f.w.UPDATE_GROUP_DESCRIPTION),
          v(!1)
        }
        ))
      }
      ), [t, p, n]);
      return i.createElement(i.Fragment, null, i.createElement(o.WzDialogHeader, null, s().t("edit_group_description", {
        scope: l
      })), i.createElement(o.WzDialogContent, null, i.createElement(o.WzTextarea, {
        placeholder: s().t("add_group_description", {
          scope: l
        }),
        value: p,
        onChange: function(e) {
          return b(e.currentTarget.value)
        },
        maxlength: 500
      })), i.createElement(o.WzDialogControls, null, i.createElement("div", {
        className: r
      }, i.createElement(o.WzButton, {
        color: "secondary",
        onClick: n,
        disabled: h
      }, s().t("cancel", {
        scope: l
      })), i.createElement(o.WzButton, {
        color: "primary",
        onClick: E,
        busy: h,
        disabled: t.description === p
      }, s().t("save", {
        scope: l
      })))), i.createElement(u.P, {
        message: y
      }))
    }
    ));
    d.displayName = "ChangeDescription"
  }
  ,
  6929: (e,t,n)=>{
    "use strict";
    n.d(t, {
      _1: ()=>Z,
      s5: ()=>$,
      j0: ()=>X
    });
    var r = n(1997)
      , i = n(2832)
      , o = n(5466)
      , a = n(1807)
      , s = n(6014)
      , l = n(1851)
      , u = n(2793);
    const c = "Naa0BYR1PksX-+nIWp-Owg==";
    var f = n(5951)
      , d = n(660)
      , p = n(5690)
      , b = n(5693)
      , m = n(3971)
      , h = n(1300)
      , v = n(966)
      , g = (0,
    i.Pi)((function(e) {
      var t, n = e.status, i = e.conversationContainerRef, u = e.childRoutes, g = void 0 === u ? [] : u, y = (0,
      r.a)(), w = (0,
      f.b)().webEvents;
      o.useEffect((function() {
        return function() {
          return y.uiState.setSelectedConversation(void 0)
        }
      }
      ), [y.uiState]);
      var E = y.uiState.selectedConversation
        , O = (0,
      m.O)().report;
      o.useEffect((function() {
        E || (0,
        d.Or)(w, O)
      }
      ), [E]);
      var S = (0,
      a.TH)()
        , P = g.find((function(e) {
        return (0,
        h.LX)("".concat(e.path, "/*"), S.pathname)
      }
      ))
        , j = o.useRef(null);
      return E ? o.createElement(o.Fragment, null, o.createElement("div", {
        className: c
      }, o.createElement(v.k, {
        containerRef: i,
        status: n,
        transitionDuration: 250,
        selectedConversationId: E.destination.id,
        renderPlaceholder: function() {
          return o.createElement(b.X, {
            conversation: E
          })
        }
      }, o.createElement(p.r, {
        appMode: y.uiState.appMode,
        conversation: E,
        pageVisible: y.uiState.pageVisible
      }))), o.createElement(s.Z, null, o.createElement(l.ZP, {
        key: (null == P ? void 0 : P.path) || S.pathname,
        nodeRef: j,
        timeout: null !== (t = null == P ? void 0 : P.transitionTimeout) && void 0 !== t ? t : 0
      }, (function(e) {
        if (P) {
          var t = P.element;
          return o.createElement("div", {
            ref: j
          }, o.createElement(t, {
            status: e,
            conversationContainerRef: i,
            childRoutes: P.children
          }))
        }
      }
      )))) : null
    }
    ));
    g.displayName = "ConversationRoute";
    var y = n(8098)
      , w = n.n(y)
      , E = n(5519)
      , O = function(e) {
      var t = o.useState(e)
        , n = t[0]
        , r = t[1];
      return o.useEffect((function() {
        var t = requestAnimationFrame((function() {
          return r(e)
        }
        ));
        return function() {
          return cancelAnimationFrame(t)
        }
      }
      ), [e]),
      n
    };
    const S = "Ub7IyyLvUM81En+2qyRwhQ=="
      , P = "Hgkm3uizezfHa-T6XXD8Ow==";
    var j = (0,
    i.Pi)((function(e) {
      var t, n = e.status, i = (0,
      r.a)(), a = O(n);
      return o.createElement("div", {
        className: w()(S, (t = {},
        t[P] = a && ["entering", "entered"].includes(a),
        t)),
        style: {
          "--waze-chat-settings-transition-duration": "".concat(300, "ms")
        }
      }, o.createElement(E.Z, {
        appMode: i.uiState.appMode,
        settings: i.settings
      }))
    }
    ));
    j.displayName = "SettingsRoute";
    const M = "-aCKp-BiDmQMXk92dec8Lw=="
      , C = "_8M8s+KCNxP+sUmq7qx1pqg=="
      , I = "gnp3UkkGbOFXoZnhkTZEow==";
    var R = n(2661)
      , _ = (0,
    i.Pi)((function(e) {
      var t, n, i = e.status, u = e.childRoutes, c = void 0 === u ? [] : u, f = (0,
      r.a)(), d = O(i), p = (0,
      a.TH)(), b = c.find((function(e) {
        return (0,
        h.LX)("".concat(e.path, "/*"), p.pathname)
      }
      )), m = o.useRef(null), v = o.useRef(null), g = f.uiState.selectedConversation;
      return (null == g ? void 0 : g.isGroup()) ? o.createElement(o.Fragment, null, o.createElement("div", {
        className: w()(M, (t = {},
        t[C] = "entering" === d,
        t[I] = "entered" === d,
        t)),
        style: {
          "--waze-chat-group-profile-transition-duration": "".concat(300, "ms")
        },
        ref: v
      }, o.createElement(R.t, {
        conversation: g,
        appMode: f.uiState.appMode
      })), o.createElement(s.Z, null, o.createElement(l.ZP, {
        key: (null == b ? void 0 : b.path) || p.pathname,
        nodeRef: m,
        timeout: null !== (n = null == b ? void 0 : b.transitionTimeout) && void 0 !== n ? n : 0
      }, (function(e) {
        if (b) {
          var t = b.element;
          return o.createElement("div", {
            ref: m
          }, o.createElement(t, {
            status: e,
            conversationContainerRef: v,
            childRoutes: b.children
          }))
        }
      }
      )))) : null
    }
    ));
    _.displayName = "GroupProfileRoute";
    var T = n(9825)
      , N = (0,
    i.Pi)((function(e) {
      var t = e.status
        , n = e.conversationContainerRef
        , i = (0,
      r.a)();
      o.useEffect((function() {
        return function() {
          return i.uiState.setSelectedGroupSubConversation(void 0)
        }
      }
      ), [i.uiState]);
      var a = i.uiState.selectedConversation
        , s = i.uiState.selectedGroupSubConversationIdentifier
        , l = i.uiState.selectedGroupSubConversation;
      if (!(null == a ? void 0 : a.isGroup()) || !s || !l)
        return null;
      var u = a.destination.membershipStore.findMembership(s);
      return u ? o.createElement(v.k, {
        containerRef: n,
        status: t,
        transitionDuration: 250,
        selectedConversationId: l.destination.id,
        renderPlaceholder: function() {
          return o.createElement(T.bD, {
            membership: u
          })
        }
      }, o.createElement(p.r, {
        appMode: i.uiState.appMode,
        conversation: l,
        pageVisible: i.uiState.pageVisible
      })) : null
    }
    ));
    N.displayName = "GroupSubConversationRoute";
    const A = "lSxBdGst2qFPgU8gPjXrOQ=="
      , k = "_3UzXk0HOTlq8R7Xo2uhHRg==";
    var x = n(6791)
      , z = n(3955)
      , U = n.n(z)
      , W = n(6182)
      , D = n(6569)
      , G = n(72);
    const L = "GL9jHSzUyHNXCNO36SJvCg==";
    var F = n(6313)
      , B = n(7766)
      , H = n(2718)
      , V = function() {
      return V = Object.assign || function(e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in t = arguments[n])
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e
      }
      ,
      V.apply(this, arguments)
    }
      , J = function() {
      var e = (0,
      r.a)()
        , t = o.useState(!1)
        , n = t[0]
        , i = t[1]
        , s = o.useState()
        , l = s[0]
        , u = s[1]
        , c = o.useState(!1)
        , f = c[0]
        , d = c[1]
        , p = o.useState(!1)
        , b = p[0]
        , m = p[1]
        , h = o.useState(!1)
        , v = h[0]
        , g = h[1]
        , y = e.uiState.chatInviteId;
      o.useEffect((function() {
        e.ready.value && (y ? e.wmpGroupsClient.getGroupPreviewByInvitation(y).then((function(e) {
          u(e)
        }
        )).catch((function(e) {
          e.code === H.StatusCode.PERMISSION_DENIED ? d(!0) : e.code !== H.StatusCode.NOT_FOUND && m(!0)
        }
        )).finally((function() {
          i(!0)
        }
        )) : i(!0))
      }
      ), [e.ready.value]);
      var w = (0,
      a.s0)()
        , E = o.useCallback((function() {
        e.uiState.setChatInviteId(void 0),
        w("/", {
          replace: !0
        })
      }
      ), [e, w])
        , O = o.useCallback((function(t) {
        E(),
        e.uiState.setSelectedConversation({
          id: t,
          type: B.pq.Group
        })
      }
      ), [e, E]);
      o.useEffect((function() {
        (null == l ? void 0 : l.isGroupMember) && O(l.id)
      }
      ), [l, O]);
      var S = o.useCallback((function() {
        y && l && (g(!0),
        m(!1),
        e.wmpGroupsClient.joinGroupViaInvitation(y).then((function() {
          g(!1),
          O(l.id)
        }
        )).catch((function(e) {
          e.code === H.StatusCode.RESOURCE_EXHAUSTED ? u(V(V({}, l), {
            isGroupFull: !0
          })) : m(!0),
          g(!1)
        }
        )))
      }
      ), [e, l]);
      return o.createElement("div", {
        className: L
      }, n ? o.createElement(F.i, {
        appMode: e.uiState.appMode,
        groupPreview: l,
        isGroupRestricted: f,
        hasError: b,
        isJoinBusy: v,
        onJoinClick: S,
        onClose: E
      }) : o.createElement(W.a, null))
    };
    J.displayName = "GroupJoinRoute";
    var K = n(8829)
      , q = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , Q = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , Z = {
      SETTINGS: "/settings",
      CONVERSATION: "/conversation",
      GROUP_PROFILE: "/conversation/group_profile",
      GROUP_PROFILE_SUB_CONVERSATION: "/conversation/group_profile/conversation",
      GROUP_JOIN: "/group/join"
    }
      , X = [{
      path: Z.SETTINGS,
      element: j,
      transitionTimeout: 300
    }, {
      path: Z.CONVERSATION,
      element: g,
      transitionTimeout: 250,
      children: [{
        path: Z.GROUP_PROFILE,
        element: _,
        transitionTimeout: 300,
        children: [{
          path: Z.GROUP_PROFILE_SUB_CONVERSATION,
          element: N,
          transitionTimeout: 250
        }]
      }]
    }, {
      path: Z.GROUP_JOIN,
      element: J,
      transitionTimeout: 0
    }]
      , Y = "retries"
      , $ = (0,
    i.Pi)((function() {
      var e, t = (0,
      r.a)(), n = o.useCallback((function() {
        return q(void 0, void 0, void 0, (function() {
          return Q(this, (function(e) {
            switch (e.label) {
            case 0:
              return t.ready.value ? [4, t.conversationStore.loadHistoryBatch()] : [3, 2];
            case 1:
              e.sent(),
              e.label = 2;
            case 2:
              return [2]
            }
          }
          ))
        }
        ))
      }
      ), [t]), i = o.useCallback((function() {
        return t.uiState.setChatOpen(!1)
      }
      ), [t]), c = o.useMemo((function() {
        return new URLSearchParams(window.location.search)
      }
      ), [window.location.search]);
      o.useEffect((function() {
        var e, n = c.get(K.Tg);
        n && (t.uiState.setChatInviteId(n),
        t.uiState.setSelectedConversation(void 0),
        t.uiState.setSelectedGroupSubConversation(void 0),
        (e = new URL(window.location.href)).searchParams.delete(K.Tg),
        history.replaceState({}, document.title, e))
      }
      ), [c]);
      var f = (0,
      a.s0)()
        , d = (0,
      a.SN)();
      o.useEffect((function() {
        t.uiState.chatInviteId && !d.some((function(e) {
          return e.pathname === Z.GROUP_JOIN
        }
        )) ? f(Z.GROUP_JOIN) : t.uiState.selectedGroupSubConversationIdentifier && !d.some((function(e) {
          return e.pathname === Z.GROUP_PROFILE_SUB_CONVERSATION
        }
        )) ? f(Z.GROUP_PROFILE_SUB_CONVERSATION) : t.uiState.selectedConversationIdentifier && !d.some((function(e) {
          return e.pathname === Z.CONVERSATION
        }
        )) && f(Z.CONVERSATION)
      }
      ), [t.uiState.chatInviteId, t.uiState.selectedConversationIdentifier, t.uiState.selectedGroupSubConversationIdentifier]);
      var p = (0,
      a.TH)()
        , b = X.find((function(e) {
        return (0,
        h.LX)("".concat(e.path, "/*"), p.pathname)
      }
      ))
        , m = o.useRef(null)
        , v = o.useRef(null)
        , g = (0,
      G.lr)()[1]
        , y = o.useCallback((function() {
        g((function(e) {
          var t = e.get(Y)
            , n = null == t ? 0 : parseInt(t, 10);
          return e.set(Y, "".concat(n + 1)),
          e
        }
        )),
        f(0)
      }
      ), []);
      return t.ready.state === x.$.Error ? o.createElement("div", {
        className: k
      }, o.createElement(D.t, {
        text: U().t("chat.failure.description_failed_to_load"),
        onActionClick: y
      })) : o.createElement(o.Fragment, null, o.createElement("div", {
        ref: v,
        className: A
      }, t.ready.value ? o.createElement(u.p, {
        appMode: t.uiState.appMode,
        conversations: t.conversationStore.sortedConversations,
        onConversationClick: function(e) {
          return t.uiState.setSelectedConversation(e.destination)
        },
        onLoadMore: n,
        onCloseChat: i
      }) : o.createElement(W.a, null)), o.createElement(s.Z, null, o.createElement(l.ZP, {
        key: (null == b ? void 0 : b.path) || p.pathname,
        nodeRef: m,
        timeout: null !== (e = null == b ? void 0 : b.transitionTimeout) && void 0 !== e ? e : 0
      }, (function(e) {
        if (b) {
          var t = b.element;
          return o.createElement("div", {
            ref: m
          }, o.createElement(t, {
            status: e,
            conversationContainerRef: v,
            childRoutes: b.children
          }))
        }
      }
      ))))
    }
    ));
    $.displayName = "RootRoute"
  }
  ,
  1799: (e,t,n)=>{
    "use strict";
    n.d(t, {
      $r: ()=>a
    });
    var r = n(4454)
      , i = n(2885)
      , o = Symbol("CHUNKED_LIST_FIXED_POSITION_BOTTOM")
      , a = function() {
      function e(e) {
        var t = this;
        Object.defineProperty(this, "getItemKey", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "container", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: null
        }),
        Object.defineProperty(this, "_items", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: []
        }),
        Object.defineProperty(this, "_chunkSize", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: 0
        }),
        Object.defineProperty(this, "_fixedStartIndex", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "_edgeDetectionOffset", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: 500
        }),
        Object.defineProperty(this, "fixedPositionKey", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "startItemKey", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "endItemKey", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "zeroOrMore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return Math.max(0, e)
          }
        }),
        Object.defineProperty(this, "lastIndexOrLess", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return Math.min(t.lastItemIndex, e)
          }
        }),
        Object.defineProperty(this, "getItemIndex", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return void 0 !== e ? t.items.indexOf(e) : -1
          }
        }),
        Object.defineProperty(this, "getItemKeyIndex", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return void 0 !== e ? t.items.findIndex((function(n) {
              return t.getItemKey(n) === e
            }
            )) : -1
          }
        }),
        Object.defineProperty(this, "getScrollInfo", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            var e, n = null !== (e = t.container) && void 0 !== e ? e : {}, r = n.clientHeight, i = void 0 === r ? 0 : r, o = n.scrollHeight, a = void 0 === o ? 0 : o, s = n.scrollTop;
            return {
              clientHeight: i,
              scrollHeight: a,
              scrollTop: void 0 === s ? 0 : s
            }
          }
        }),
        Object.defineProperty(this, "setItems", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t._items = e,
            t.reviseChunk({
              resetChunk: -1 === t.startItemIndex || -1 === t.endItemIndex
            })
          }
        }),
        Object.defineProperty(this, "setChunkSize", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t._chunkSize = e,
            t.reviseChunk()
          }
        }),
        Object.defineProperty(this, "setFixedStartIndex", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t._fixedStartIndex = e,
            t.reviseChunk()
          }
        }),
        Object.defineProperty(this, "setEdgeDetectionOffset", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t._edgeDetectionOffset = e
          }
        }),
        Object.defineProperty(this, "setStartItemIndex", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var n = t.items[e];
            t.startItemKey = n ? t.getItemKey(n) : void 0
          }
        }),
        Object.defineProperty(this, "setEndItemIndex", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var n = t.items[e];
            t.endItemKey = n ? t.getItemKey(n) : void 0
          }
        }),
        Object.defineProperty(this, "setFixedPosition", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t.fixedPositionKey = void 0 === e ? void 0 : e === o ? o : t.getItemKey(e)
          }
        }),
        Object.defineProperty(this, "reviseChunk", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var n = (void 0 === e ? {} : e).resetChunk
              , r = void 0 !== t.fixedStartIndex ? t.fixedStartIndex : t.zeroOrMore(Math.min(t.fixedItemIndex > -1 ? t.fixedItemIndex - Math.floor(t.chunkSize / 2) : t.startItemIndex, t.itemCount - t.chunkSize));
            (r < t.startItemIndex || n) && t.setStartItemIndex(r);
            var i = t.lastIndexOrLess(r + t.chunkSize - 1);
            (i > t.endItemIndex || n) && t.setEndItemIndex(i)
          }
        }),
        Object.defineProperty(this, "scrollToFixedPosition", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            if (t.container)
              if (t.bottomFixed)
                t.scrollTo(t.container.scrollHeight - t.container.clientHeight);
              else if (t.fixedItemIndex > -1) {
                var e = t.fixedItemIndex - t.startItemIndex
                  , n = t.container.children[e];
                n && t.scrollTo(n.offsetTop)
              }
          }
        }),
        Object.defineProperty(this, "fixPositionKey", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e, n) {
            var r = t.startItemIndex
              , i = t.endItemIndex;
            t.fixedPositionKey = e,
            t.reviseChunk(n),
            t.startItemIndex === r && t.endItemIndex === i && t.scrollToFixedPosition()
          }
        }),
        Object.defineProperty(this, "fixItem", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e, n) {
            t.fixPositionKey(t.getItemKey(e), n)
          }
        }),
        Object.defineProperty(this, "fixBottom", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t.fixPositionKey(o, e)
          }
        }),
        Object.defineProperty(this, "unfix", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.fixedPositionKey = void 0
          }
        }),
        Object.defineProperty(this, "scrollTo", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t.container && t.container.scrollTop !== e && ((0,
            r.isApple)() && (t.container.style.overflowY = "hidden"),
            t.container.scrollTo({
              top: e
            }),
            (0,
            r.isApple)() && (t.container.style.overflowY = "scroll"))
          }
        }),
        Object.defineProperty(this, "handleScroll", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            if (t.container) {
              var e = t.container
                , n = e.scrollHeight
                , r = e.scrollTop
                , i = e.clientHeight;
              if (r < t.edgeDetectionOffset) {
                var o = t.zeroOrMore(t.startItemIndex - t.chunkSize);
                t.setStartItemIndex(o)
              } else if (r + i > n - t.edgeDetectionOffset) {
                var a = t.lastIndexOrLess(t.endItemIndex + t.chunkSize);
                t.setEndItemIndex(a)
              }
            }
          }
        }),
        Object.defineProperty(this, "handleResize", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.scrollToFixedPosition()
          }
        }),
        Object.defineProperty(this, "handleRender", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.scrollToFixedPosition()
          }
        }),
        (0,
        i.ky)(this, {
          container: !1,
          getScrollInfo: !1
        })
      }
      return Object.defineProperty(e.prototype, "items", {
        get: function() {
          return this._items
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "chunkSize", {
        get: function() {
          return this._chunkSize
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "fixedStartIndex", {
        get: function() {
          return this._fixedStartIndex
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "edgeDetectionOffset", {
        get: function() {
          return this._edgeDetectionOffset
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "itemCount", {
        get: function() {
          return this.items.length
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "lastItemIndex", {
        get: function() {
          return this.itemCount - 1
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "startItemIndex", {
        get: function() {
          return null == this.startItemKey ? -1 : this.getItemKeyIndex(this.startItemKey)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "endItemIndex", {
        get: function() {
          return null == this.endItemKey ? -1 : this.getItemKeyIndex(this.endItemKey)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "fixedItemIndex", {
        get: function() {
          return null == this.fixedPositionKey ? -1 : this.fixedPositionKey === o ? this.lastItemIndex : this.getItemKeyIndex(this.fixedPositionKey)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "fixedItem", {
        get: function() {
          return this.items[this.fixedItemIndex]
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "fixedPosition", {
        get: function() {
          return void 0 === this.fixedPositionKey || this.fixedPositionKey === o ? this.fixedPositionKey : this.items[this.fixedItemIndex]
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "bottomFixed", {
        get: function() {
          return this.fixedPositionKey === o
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "chunk", {
        get: function() {
          return this.items.slice(this.startItemIndex, this.endItemIndex + 1)
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }()
  }
  ,
  1333: (e,t,n)=>{
    "use strict";
    n.d(t, {
      t: ()=>l
    });
    var r = n(2832)
      , i = n(5466);
    function o(e) {
      var t = e.item
        , n = e.index
        , r = e.itemRenderer
        , o = e.onResize
        , a = i.useRef(null);
      return i.useEffect((function() {
        var e = new ResizeObserver(o);
        return a.current && e.observe(a.current),
        function() {
          return e.disconnect()
        }
      }
      ), [o]),
      i.createElement("div", {
        ref: a,
        style: {
          overflowY: "auto"
        }
      }, r(t, n))
    }
    var a = n(4454);
    function s(e) {
      return {
        scrollInfo: e.getScrollInfo(),
        firstItem: e.chunk[0]
      }
    }
    var l = (0,
    r.Pi)((function(e) {
      var t = e.store
        , n = e.itemRenderer
        , r = e.onScroll
        , l = e.onResize
        , u = e.onRenderItems
        , c = i.useRef(null)
        , f = i.useRef(s(t))
        , d = i.useCallback((function() {
        var e = f.current
          , n = s(t);
        if (f.current = n,
        n.scrollInfo.clientHeight === e.scrollInfo.clientHeight && n.scrollInfo.scrollHeight === e.scrollInfo.scrollHeight && n.scrollInfo.scrollTop !== e.scrollInfo.scrollTop)
          t.handleScroll(),
          null == r || r();
        else {
          var i = e.firstItem && t.chunk.indexOf(e.firstItem) > 0;
          if (((0,
          a.isApple)() || (0,
          a.isSafari)()) && i) {
            var o = n.scrollInfo.scrollHeight - e.scrollInfo.scrollHeight;
            t.scrollTo(n.scrollInfo.scrollTop + o)
          }
        }
      }
      ), [t, r])
        , p = i.useCallback((function() {
        t.handleResize(),
        null == l || l()
      }
      ), [t, l]);
      return i.useEffect((function() {
        return t.container = c.current,
        function() {
          t.container = null
        }
      }
      ), []),
      i.useEffect((function() {
        t.handleRender()
      }
      )),
      i.useEffect((function() {
        var e = new ResizeObserver(p);
        return c.current && e.observe(c.current),
        function() {
          return e.disconnect()
        }
      }
      ), [p]),
      i.useEffect((function() {
        null == u || u(t.startItemIndex, t.endItemIndex)
      }
      ), [u, t.startItemIndex, t.endItemIndex]),
      i.createElement("div", {
        ref: c,
        style: {
          height: "100%",
          width: "100%",
          overflowY: "scroll",
          overscrollBehavior: "none",
          WebkitOverflowScrolling: "touch"
        },
        onScroll: d
      }, t.chunk.map((function(e) {
        var r = t.getItemIndex(e)
          , a = t.getItemKey(e);
        return i.createElement(o, {
          key: a,
          item: e,
          index: r,
          itemRenderer: n,
          onResize: p
        })
      }
      )))
    }
    ))
  }
  ,
  5690: (e,t,n)=>{
    "use strict";
    n.d(t, {
      r: ()=>Ye
    });
    const r = "lRQsmqmLspZpp0RIsZsObA=="
      , i = "DEoNwQZw0xqMPc8Ose80pA==";
    var o = n(5466)
      , a = n(2832)
      , s = n(2388);
    const l = "kw-x6XBjx5VmFgt1j8Qe1A=="
      , u = "SuyvqiGnFfL6H-Kz+tVqNA=="
      , c = "HVvALyieYjYp+VPxrIkQ8A=="
      , f = "KnBuFXjBFCnvkIcnT1LJrA=="
      , d = "pLSZGSPyZ0zrJYsgd2DCxg=="
      , p = "kLf5xBZlDqf6n7Dv0tcIMQ==";
    var b = n(3955)
      , m = n.n(b)
      , h = n(2439)
      , v = n(9983)
      , g = n(660)
      , y = n(5951)
      , w = n(1997)
      , E = n(8098)
      , O = n.n(E)
      , S = n(155)
      , P = n(3971);
    const j = "w+rXG7CUtmp-g-S17UXleA=="
      , M = "lLNcrMwhmAfAmW71I4nv3Q==";
    var C = function() {
      return C = Object.assign || function(e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in t = arguments[n])
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e
      }
      ,
      C.apply(this, arguments)
    }
      , I = function(e, t) {
      var n = {};
      for (var r in e)
        Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
      if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
        var i = 0;
        for (r = Object.getOwnPropertySymbols(e); i < r.length; i++)
          t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]])
      }
      return n
    }
      , R = o.forwardRef((function(e, t) {
      var n = e.className
        , r = e.minRows
        , i = void 0 === r ? 1 : r
        , a = e.maxRows
        , s = void 0 === a ? 1 / 0 : a
        , l = e.value
        , u = I(e, ["className", "minRows", "maxRows", "value"])
        , c = o.useRef(null)
        , f = o.useRef(null);
      return o.useImperativeHandle(t, (function() {
        var e = f.current;
        if (!e)
          throw new Error("Textarea ref is not defined.");
        return e
      }
      ), []),
      o.useEffect((function() {
        var e = c.current
          , t = f.current;
        if (e && t) {
          e.style.setProperty("height", "".concat(e.clientHeight, "px")),
          t.setAttribute("rows", "1");
          var n = t.clientHeight > 0 ? Math.round(t.scrollHeight / t.clientHeight) : 1;
          t.setAttribute("rows", String(Math.max(i, Math.min(n, s)))),
          t.style.setProperty("overflow-y", n > s ? "auto" : "hidden"),
          e.style.removeProperty("height")
        }
      }
      ), [l]),
      o.createElement("div", {
        ref: c,
        className: O()(j, n)
      }, o.createElement("textarea", C({}, u, {
        ref: f,
        className: M,
        value: l
      })))
    }
    ))
      , _ = function() {
      return _ = Object.assign || function(e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in t = arguments[n])
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e
      }
      ,
      _.apply(this, arguments)
    }
      , T = /\S+/
      , N = (0,
    a.Pi)((function(e) {
      var t, n = e.conversation, r = (0,
      h.cI)({
        mode: "onChange",
        defaultValues: {
          message: n.draftText
        }
      }), i = (0,
      y.b)().webEvents, a = (0,
      w.a)().uiState.isDesktop, s = (0,
      w.a)().uiState.isRTL, b = (0,
      P.O)().report, E = r.handleSubmit((function(e, t) {
        n.sendTextMessage(e.message).catch((function(e) {
          return b(e, S.w.SEND_NEW_MESSAGE)
        }
        )),
        r.reset({
          message: ""
        }),
        (0,
        g.eF)(i, b, t instanceof KeyboardEvent)
      }
      )), j = r.watch("message");
      o.useEffect((function() {
        n.setDraftText(j)
      }
      ), [j]);
      var M = o.useCallback((function(e) {
        "Enter" === e.key && !e.shiftKey && a && (e.preventDefault(),
        E(e).catch((function(e) {
          return b(e, S.w.SUBMIT_MESSAGE_ON_ENTER)
        }
        )))
      }
      ), [E])
        , C = o.useCallback((function(e) {
        e.preventDefault(),
        E(e).then((function() {
          return r.setFocus("message")
        }
        )).catch((function(e) {
          return b(e, S.w.SEND_MESSAGE_ON_FORM_SUBMIT)
        }
        ))
      }
      ), [r, E]);
      return o.createElement("form", {
        className: O()(l, !a && c),
        onSubmit: C
      }, o.createElement(v.WzBody2, {
        className: u
      }, o.createElement(h.Qr, {
        control: r.control,
        name: "message",
        rules: {
          required: !0,
          pattern: T
        },
        render: function(e) {
          var t = e.field;
          return o.createElement(R, _({}, t, {
            className: f,
            placeholder: m().t("placeholder", {
              scope: "chat.conversation.message_box"
            }),
            minRows: 1,
            maxRows: 5,
            autoFocus: a,
            onFocus: function() {
              return (0,
              g.$m)(i, b)
            },
            disabled: n.blocked,
            onKeyPress: M,
            dir: j ? "auto" : void 0
          }))
        }
      })), o.createElement(v.WzButton, {
        className: d,
        type: "submit",
        disabled: !r.formState.isValid
      }, o.createElement("i", {
        className: O()((t = {
          "w-icon": !0,
          "w-icon-send-fill": !0
        },
        t[p] = s,
        t))
      })))
    }
    ));
    N.displayName = "MessageBox";
    const A = "bXY9671dFRamSvcJQHaqbA==";
    var k = n(7821)
      , x = n(1333)
      , z = n(449)
      , U = n(2885)
      , W = n(1799)
      , D = n(6791)
      , G = n(3298)
      , L = n(7766)
      , F = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , B = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , H = function() {
      function e(e, t) {
        var n = this;
        Object.defineProperty(this, "conversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "report", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "chunkedListStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new W.$r((function(e) {
            return e.id
          }
          ))
        }),
        Object.defineProperty(this, "ready", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new D.O(!1)
        }),
        Object.defineProperty(this, "listItemsReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new G.S((function() {
            return n.createListItemsReaction()
          }
          ))
        }),
        Object.defineProperty(this, "newMessageReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new G.S((function() {
            return n.createNewMessageReaction()
          }
          ))
        }),
        Object.defineProperty(this, "unreadDelimiterReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new G.S((function() {
            return n.createUnreadDelimiterReaction()
          }
          ))
        }),
        Object.defineProperty(this, "readReceiptReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new G.S((function() {
            return n.createReadReceiptReaction()
          }
          ))
        }),
        Object.defineProperty(this, "messageOverlapReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new G.S((function() {
            return n.createMessageOverlapReaction()
          }
          ))
        }),
        Object.defineProperty(this, "_batchStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: this.conversation.streamStore
        }),
        Object.defineProperty(this, "_pageVisible", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: !1
        }),
        Object.defineProperty(this, "_unreadDelimiterMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "jumpToBottomPromise", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "setBatchStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n._batchStore = e
          }
        }),
        Object.defineProperty(this, "setPageVisible", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n._pageVisible = e
          }
        }),
        Object.defineProperty(this, "setUnreadDelimiterMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n._unreadDelimiterMessage = e
          }
        }),
        Object.defineProperty(this, "setJumpToBottomPromise", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.jumpToBottomPromise = e
          }
        }),
        Object.defineProperty(this, "init", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return F(n, void 0, void 0, (function() {
              var e;
              return B(this, (function(t) {
                switch (t.label) {
                case 0:
                  if (this.ready.state === D.$.Success)
                    return [2];
                  this.ready.set(!1, D.$.Pending),
                  t.label = 1;
                case 1:
                  return t.trys.push([1, 3, , 4]),
                  this.chunkedListStore.setChunkSize(k.T7),
                  this.initBatchStore(),
                  this.listItemsReaction.init(),
                  this.newMessageReaction.init(),
                  this.unreadDelimiterReaction.init(),
                  this.readReceiptReaction.init(),
                  this.messageOverlapReaction.init(),
                  [4, this.initHistory()];
                case 2:
                  return t.sent(),
                  this.ready.set(!0, D.$.Success),
                  [3, 4];
                case 3:
                  return e = t.sent(),
                  this.ready.set(!1, D.$.Error),
                  this.report(e, S.w.INIT_MESSAGE_LIST),
                  [3, 4];
                case 4:
                  return [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "dispose", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            n.listItemsReaction.dispose(),
            n.newMessageReaction.dispose(),
            n.unreadDelimiterReaction.dispose(),
            n.readReceiptReaction.dispose(),
            n.messageOverlapReaction.dispose()
          }
        }),
        Object.defineProperty(this, "initBatchStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            n.conversation.unreadMessagesAbsoluteNumber > n.conversation.streamStore.messageStore.messagesNumber && n.setBatchStore(n.conversation.unreadStore)
          }
        }),
        Object.defineProperty(this, "initHistory", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return F(n, void 0, void 0, (function() {
              var e;
              return B(this, (function(t) {
                switch (t.label) {
                case 0:
                  return [4, this.batchStore.initHistory()];
                case 1:
                  return t.sent(),
                  (e = this.batchStore.messageStore.firstUnreadMessage) ? (this.setUnreadDelimiterMessage(e),
                  this.chunkedListStore.fixItem(e, {
                    resetChunk: !0
                  })) : this.chunkedListStore.fixBottom({
                    resetChunk: !0
                  }),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "jumpToBottom", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return F(n, void 0, void 0, (function() {
              var e, t = this;
              return B(this, (function(n) {
                return this.jumpToBottomPromise ? [2, this.jumpToBottomPromise] : (e = this.createJumpToBottomPromise().finally((function() {
                  t.setJumpToBottomPromise(void 0)
                }
                )),
                this.setJumpToBottomPromise(e),
                [2, e])
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "createJumpToBottomPromise", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return F(n, void 0, void 0, (function() {
              return B(this, (function(e) {
                switch (e.label) {
                case 0:
                  return this.batchStore !== this.conversation.unreadStore ? [3, 4] : [4, this.conversation.streamStore.loadPrevHistoryPage()];
                case 1:
                  return e.sent(),
                  [4, this.conversation.streamStore.loadPrevHistoryPage()];
                case 2:
                  return e.sent(),
                  [4, this.conversation.markAllAsRead()];
                case 3:
                  e.sent(),
                  this.setBatchStore(this.conversation.streamStore),
                  e.label = 4;
                case 4:
                  return this.chunkedListStore.fixBottom({
                    resetChunk: !0
                  }),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "createListItemsReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return (0,
            U.U5)((function() {
              return n.batchStore.messageStore.sortedMessages
            }
            ), (function(e) {
              n.chunkedListStore.setItems(e)
            }
            ), {
              fireImmediately: !0
            })
          }
        }),
        Object.defineProperty(this, "createNewMessageReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return (0,
            U.U5)((function() {
              return n.conversation.streamStore.messageStore.lastMessage
            }
            ), (function(e) {
              var t = e instanceof z.XZ && e.direction === L.Tk.Outgoing;
              (n.chunkedListStore.bottomFixed || t) && n.jumpToBottom()
            }
            ))
          }
        }),
        Object.defineProperty(this, "createUnreadDelimiterReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return (0,
            U.U5)((function() {
              return n.batchStore.messageStore.firstUnreadMessage
            }
            ), (function(e) {
              n.chunkedListStore.bottomFixed || n.setUnreadDelimiterMessage(e)
            }
            ))
          }
        }),
        Object.defineProperty(this, "createReadReceiptReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return (0,
            U.U5)((function() {
              return {
                pageVisible: n.pageVisible,
                bottomFixed: n.chunkedListStore.bottomFixed,
                messages: n.conversation.streamStore.messageStore.userMessages.filter((function(e) {
                  return e.direction === L.Tk.Incoming && e.status === L.rJ.Received
                }
                ))
              }
            }
            ), (function(e) {
              var t = e.pageVisible
                , r = e.bottomFixed
                , i = e.messages;
              n.batchStore === n.conversation.streamStore && t && r && i.forEach((function(e) {
                return e.safeSendReadReceipt()
              }
              ))
            }
            ), {
              fireImmediately: !0,
              equals: U.p6.shallow
            })
          }
        }),
        Object.defineProperty(this, "createMessageOverlapReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return (0,
            U.U5)((function() {
              return n.conversation.streamStore.messageStore.messages.some((function(e) {
                return n.conversation.unreadStore.messageStore.messages.indexOf(e) > -1
              }
              ))
            }
            ), (function(e) {
              e && (n.conversation.unreadStore.messageStore.messages.forEach((function(e) {
                n.conversation.streamStore.messageStore.setMessage(e)
              }
              )),
              n.setBatchStore(n.conversation.streamStore),
              n.messageOverlapReaction.dispose())
            }
            ), {
              fireImmediately: !0
            })
          }
        }),
        Object.defineProperty(this, "isScrolledToBottom", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            var e = n.chunkedListStore.getScrollInfo()
              , t = e.scrollTop
              , r = e.scrollHeight
              , i = e.clientHeight;
            return r > 0 && r - (t + i) <= 2
          }
        }),
        Object.defineProperty(this, "handleScroll", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            n.batchStore === n.conversation.streamStore && n.isScrolledToBottom() ? n.chunkedListStore.fixBottom() : n.chunkedListStore.unfix()
          }
        }),
        Object.defineProperty(this, "handleResize", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            n.batchStore === n.conversation.streamStore && n.isScrolledToBottom() && n.chunkedListStore.fixBottom()
          }
        }),
        (0,
        U.ky)(this, {
          conversation: !1,
          report: !1,
          chunkedListStore: !1,
          ready: !1,
          prevScrollInfo: !1,
          isScrolledToBottom: !1
        })
      }
      return Object.defineProperty(e.prototype, "batchStore", {
        get: function() {
          return this._batchStore
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "pageVisible", {
        get: function() {
          return this._pageVisible
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "unreadDelimiterMessage", {
        get: function() {
          return this._unreadDelimiterMessage
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "jumpToBottomPending", {
        get: function() {
          return void 0 !== this.jumpToBottomPromise
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }();
    const V = "oF2oxmJCpITHXKwLP+iNbQ=="
      , J = "+fQ0th6lno40ySC8JmNFrA=="
      , K = "-bEjeTiHRv2PCzP9yPEgJg==";
    var q = n(1529)
      , Q = n(4656)
      , Z = n(4944);
    const X = "BbRyNNRpPXVQHX-5f3DOFw=="
      , Y = "Q6HLMfu5jVmDO1U8q1Mchw==";
    var $ = n(9895)
      , ee = o.memo((function(e) {
      var t = e.timestamp
        , n = e.className
        , r = o.useMemo((function() {
        if (!(0,
        Q.IM)(t, Date.now()))
          return $.ClientTranslator.translate("chat.date_time.today");
        var e = (0,
        Z.o)(t, "weekday")
          , n = (0,
        Q.So)(t) === (0,
        Q.So)(Date.now()) ? "dayMonth" : "dayMonthYear"
          , r = (0,
        Z.o)(t, n);
        return "".concat(e, ", ").concat(r)
      }
      ), [t]);
      return o.createElement("div", {
        className: X
      }, o.createElement(v.WzCaption, {
        className: O()(Y, n)
      }, r))
    }
    ));
    ee.displayName = ee.name;
    const te = "ZoMHBxeWy4PoO90qIRNXcA=="
      , ne = "OatukRpmwb+XKGCoOL9ORQ==";
    var re = o.memo(o.forwardRef((function(e, t) {
      return o.createElement("div", {
        ref: t,
        className: te
      }, o.createElement(v.WzBody2, {
        className: ne
      }, m().t("chat.conversation.unread_delimiter")))
    }
    )));
    re.displayName = re.name;
    const ie = "t-cM8Qz9ky+Q3opEQ7mbLg=="
      , oe = "b0PhaoQs6B-j6bWHtk2gcw=="
      , ae = "djY7dg0e4o1BJA3GUQi8FQ=="
      , se = "ZLqjyFUb+8Oqcp3eoecVcw=="
      , le = "iutxqYtrgnp3Ofwc9JIAvQ=="
      , ue = "A+L2nV+sAF1QYJzJsV0oxQ=="
      , ce = "Wh7VVjSoa177tZMB4hezhg=="
      , fe = "ZpP6jFsSTE2csnsIPX0gKg=="
      , de = "wt6o5eG9U1pHgL8jco-RYQ=="
      , pe = "DlxQdp5biTNsHgmUpMBdBA=="
      , be = "yaaGwXHV8eZ+zgSjhSUxvg==";
    var me = n(5538)
      , he = n(3680)
      , ve = n(1735)
      , ge = n.n(ve)
      , ye = n(8829)
      , we = n(713)
      , Ee = n(1011)
      , Oe = ge()().add("waze://", {
      validate: /\?.*/
    });
    function Se(e, t, n) {
      if (void 0 === n && (n = !1),
      /^(waze|tel|mailto):/.test(e))
        return e;
      var r = function(e, t) {
        return /^http:/.test(t) || /^https:/.test(e) ? e : /^http:/.test(e) ? e.replace("http:", "https:") : "https://".concat(e)
      }(e, t);
      if (n) {
        if ((0,
        Ee.h)(r)) {
          for (var i = new URL(r), o = void 0, a = 0, l = Object.keys(ye.nm); a < l.length; a++) {
            var u = l[a]
              , c = i.searchParams.get(u);
            if (c) {
              o = {
                key: u,
                value: c
              };
              break
            }
          }
          if (o && i.searchParams.get(ye.ly) === ye.Hk) {
            var f = i.searchParams;
            return f.delete(ye.ly),
            f.delete(o.key),
            f.append(ye.nm[o.key], o.value),
            "/".concat(we.ty, "/").concat(s.J.MobileWeb, "?").concat(f.toString())
          }
        }
        return "waze://?url_ver=2&open_url=".concat(encodeURIComponent(r))
      }
      return r
    }
    var Pe = function(e) {
      var t, n = e.text, r = [], i = 0, a = null !== (t = Oe.match(n)) && void 0 !== t ? t : [], l = (0,
      w.a)().uiState.appMode === s.J.MobileWeb;
      return a.forEach((function(e) {
        e.index > i && r.push(n.substring(i, e.index)),
        r.push(o.createElement(v.WzA, {
          key: e.index,
          href: Se(e.url, e.text, l),
          target: l ? "" : "_blank",
          withIcon: !1,
          style: {
            whiteSpace: "unset"
          }
        }, e.text)),
        i = e.lastIndex
      }
      )),
      n.length > i && r.push(n.substring(i)),
      o.createElement(o.Fragment, null, r)
    }
      , je = (0,
    a.Pi)((function(e) {
      var t = e.message
        , n = e.lastOfDirection
        , r = e.includeSenderName
        , i = void 0 !== r && r
        , a = e.senderNameColor
        , s = e.disallowedStatusIndicators
        , l = void 0 === s ? [] : s
        , u = (0,
      y.b)().webEvents
        , c = (0,
      P.O)().report
        , f = o.useCallback((function(e, n) {
        return o.createElement("button", {
          className: pe,
          onClick: function() {
            t.resend().catch((function(e) {
              return c(e, S.w.ERROR_LINK_RESEND_MESSAGE)
            }
            )),
            (0,
            g.sI)(u, c)
          },
          key: n
        }, e)
      }
      ), [t]);
      return o.createElement("div", {
        className: O()(ie, t.isOutgoing && le, t.isIncoming && oe, t.isSendingFailed && ce, n && se),
        "data-message-status": t.status
      }, o.createElement("div", {
        dir: "auto",
        className: ae
      }, i && o.createElement(v.WzSubhead5, {
        className: be,
        "data-testid": "sender-name",
        style: a ? {
          color: "var(".concat(a, ")")
        } : void 0
      }, t.sender.name), o.createElement(v.WzBody2, null, o.createElement(Pe, {
        text: t.text
      })), o.createElement("div", {
        className: ue
      }, o.createElement(v.WzCaption, {
        className: fe
      }, (0,
      Z.o)(t.timestamp)), t.isOutgoing && !l.includes(t.status) && o.createElement(me.E, {
        status: t.status
      }))), t.isSendingFailed && o.createElement(v.WzCaption, {
        className: de
      }, o.createElement(he.N6, {
        text: m().t("chat.conversation.error"),
        component: f
      })))
    }
    ));
    je.displayName = "UserMessage";
    const Me = "SOGaSixUy3vBxO4pT9vczw=="
      , Ce = "_3MWgcXwwWiwwgDF1aRlucw=="
      , Ie = "uDgYd7W7-iE9bM9+sTevPA==";
    var Re = (0,
    a.Pi)((function(e) {
      var t = e.message;
      return o.createElement(o.Fragment, null, t.components.map((function(e, t) {
        return o.createElement("div", {
          className: Me,
          "data-testid": "system-message",
          key: t
        }, o.createElement("div", {
          className: Ce
        }, o.createElement(v.WzBody2, {
          className: Ie
        }, e)))
      }
      )))
    }
    ));
    Re.displayName = "SystemMessage";
    var _e = (0,
    a.Pi)((function(e) {
      var t, n, r = e.message, i = e.prevMessage, a = e.nextMessage, s = r === e.unreadDelimiterMessage, l = (0,
      Q.IM)(r.timestamp, null !== (t = null == i ? void 0 : i.timestamp) && void 0 !== t ? t : 0), u = r instanceof q.j || i instanceof q.j || (null == i ? void 0 : i.direction) !== r.direction, c = i instanceof z.XZ && (null == i ? void 0 : i.status) === L.rJ.SendingFailed, f = !a, d = r.conversation.isGroup() && r.direction === L.Tk.Incoming;
      return o.createElement(o.Fragment, null, s && o.createElement(re, null), l && o.createElement(ee, {
        timestamp: r.timestamp
      }), u && o.createElement("div", {
        className: V
      }), c && o.createElement("div", {
        className: J
      }), r instanceof q.j ? o.createElement(Re, {
        message: r
      }) : r instanceof z.XZ ? o.createElement(je, {
        message: r,
        lastOfDirection: r.direction !== (null == a ? void 0 : a.direction),
        includeSenderName: d,
        senderNameColor: d && (null === (n = r.conversation.destination.membershipStore.findMembership(r.sender.identifier)) || void 0 === n ? void 0 : n.color) || void 0,
        disallowedStatusIndicators: r.conversation.isGroup() ? k._I : []
      }) : null, f && o.createElement("div", {
        className: K
      }))
    }
    ));
    _e.displayName = "MessageItem";
    var Te = n(6182)
      , Ne = n(6569)
      , Ae = (0,
    a.Pi)((function(e) {
      var t = e.conversation
        , n = e.pageVisible
        , r = function(e, t) {
        var n = (0,
        P.O)().report
          , r = o.useState((function() {
          return new H(e,n)
        }
        ))
          , i = r[0]
          , a = r[1];
        return o.useEffect((function() {
          i.conversation === e && i.report === n || a(new H(e,n))
        }
        ), [i, e, n]),
        o.useEffect((function() {
          var e = i.init();
          return function() {
            e.then(i.dispose)
          }
        }
        ), [i]),
        o.useEffect((function() {
          i.setPageVisible(t)
        }
        ), [i, t]),
        i
      }(t, n)
        , i = (0,
      P.O)().report
        , a = o.useCallback((function(e, t) {
        return o.createElement(_e, {
          message: e,
          prevMessage: r.batchStore.messageStore.sortedMessages[t - 1],
          nextMessage: r.batchStore.messageStore.sortedMessages[t + 1],
          unreadDelimiterMessage: r.unreadDelimiterMessage
        })
      }
      ), [r])
        , s = o.useCallback((function(e, n) {
        e < k.T7 && r.batchStore.loadPrevHistoryPage().catch((function(e) {
          return i(e, S.w.LOAD_MESSAGES_BATCH)
        }
        )),
        n > t.streamStore.messageStore.messagesNumber - k.T7 && r.batchStore.loadNextHistoryPage().catch((function(e) {
          return i(e, S.w.LOAD_MESSAGES_BATCH)
        }
        ))
      }
      ), [r]);
      return r.ready.value ? o.createElement(o.Fragment, null, o.createElement(x.t, {
        store: r.chunkedListStore,
        itemRenderer: a,
        onScroll: r.handleScroll,
        onResize: r.handleResize,
        onRenderItems: s
      }), !r.chunkedListStore.bottomFixed && o.createElement(v.WzButton, {
        className: A,
        color: "clear-icon",
        disabled: r.jumpToBottomPending,
        onClick: r.jumpToBottom
      }, r.jumpToBottomPending ? o.createElement("i", {
        className: "w-icon"
      }, o.createElement(v.WzSpinner, null)) : o.createElement("i", {
        className: "w-icon w-icon-arrow-down"
      }))) : r.ready.state === D.$.Error ? o.createElement(Ne.t, {
        text: m().t("loading_failure", {
          scope: "chat.conversation"
        }),
        onActionClick: r.init
      }) : o.createElement(Te.a, null)
    }
    ));
    Ae.displayName = "MessageList";
    const ke = "tGMPOsKxwbRkd08-Xp8HtA=="
      , xe = "Rftgi+pvdMXFRpn3rhML5A=="
      , ze = "EsieZ3ruQ5lM5VA-vQYWMA=="
      , Ue = "_99ZxdFU16fQ0dWdNI-dumQ==";
    var We = (0,
    a.Pi)((function(e) {
      var t = e.conversation
        , n = (0,
      P.O)().report
        , r = o.useState(!1)
        , i = r[0]
        , a = r[1]
        , s = o.useCallback((function() {
        a(!0),
        t.block(!1).catch((function(e) {
          return n(e, S.w.UNBLOCK_CONTACT)
        }
        )).finally((function() {
          return a(!1)
        }
        ))
      }
      ), [t])
        , l = t.destination.name.split(" ")[0];
      return o.createElement("div", {
        className: ke
      }, o.createElement("div", {
        className: xe
      }, o.createElement("i", {
        className: O()("w-icon", "w-icon-alert-info", ze)
      }), o.createElement(v.WzBody2, null, " ", m().t("chat.conversation.block_indicator", {
        name: l
      }), " ")), o.createElement("div", {
        className: Ue
      }, o.createElement("div", null), o.createElement(v.WzButton, {
        color: "text",
        onClick: s,
        disabled: i
      }, m().t("chat.conversation.unblock"))))
    }
    ));
    We.displayName = "BlockIndicator";
    var De = n(2053)
      , Ge = n(8368)
      , Le = n(9948);
    const Fe = "KQc8bnyE+NMN4kOsWHPhOg==";
    var Be, He = n(3751), Ve = function(e) {
      var t = e.conversation
        , n = e.onClose
        , r = "chat.clear_history"
        , i = o.useState()
        , a = i[0]
        , s = i[1]
        , l = (0,
      P.O)().report
        , u = o.useCallback((function() {
        t.clear().then(n).catch((function(e) {
          s({
            text: m().t("error", {
              scope: r
            })
          }),
          l(e, S.w.CLEAR_HISTORY)
        }
        ))
      }
      ), [t, n]);
      return o.createElement(o.Fragment, null, o.createElement(v.WzDialogHeader, null, m().t("title", {
        scope: r
      })), o.createElement(v.WzDialogContent, {
        className: Fe
      }, m().t("description", {
        scope: r,
        name: t.destination.name
      })), o.createElement(v.WzDialogControls, null, o.createElement(v.WzButton, {
        color: "secondary",
        onClick: n
      }, m().t("cancel", {
        scope: r
      })), o.createElement(v.WzButton, {
        color: "primary",
        onClick: u
      }, m().t("ok", {
        scope: r
      }))), o.createElement(He.P, {
        message: a
      }))
    }, Je = function(e) {
      var t = e.conversation
        , n = e.onClose
        , r = "chat.block_person"
        , i = o.useState()
        , a = i[0]
        , s = i[1]
        , l = (0,
      P.O)().report
        , u = o.useCallback((function() {
        t.block(!0).then(n).catch((function(e) {
          s({
            text: m().t("error", {
              scope: r
            })
          }),
          l(e, S.w.BLOCK_CONTACT)
        }
        ))
      }
      ), [t, n]);
      return o.createElement(o.Fragment, null, o.createElement(v.WzDialogHeader, null, m().t("title", {
        scope: r,
        name: t.destination.name
      })), o.createElement(v.WzDialogContent, null, o.createElement("div", null, m().t("description", {
        scope: r,
        name: t.destination.name
      }))), o.createElement(v.WzDialogControls, null, o.createElement(v.WzButton, {
        color: "secondary",
        onClick: n
      }, m().t("cancel", {
        scope: r
      })), o.createElement(v.WzButton, {
        color: "primary",
        onClick: u
      }, m().t("ok", {
        scope: r
      }))), o.createElement(He.P, {
        message: a
      }))
    }, Ke = n(4498);
    !function(e) {
      e.ClearHistory = "ClearHistory",
      e.BlockPerson = "BlockPerson"
    }(Be || (Be = {}));
    var qe = (0,
    a.Pi)((function(e) {
      var t = e.conversation
        , n = e.appMode
        , r = e.includeBackButton
        , i = o.useState()
        , a = i[0]
        , s = i[1]
        , l = o.useCallback((function() {
        return s(void 0)
      }
      ), [])
        , u = o.useCallback((function() {
        return s(Be.ClearHistory)
      }
      ), [])
        , c = o.useCallback((function() {
        return s(Be.BlockPerson)
      }
      ), [])
        , f = (0,
      P.O)().report
        , d = (0,
      y.b)().webEvents
        , p = o.useMemo((function() {
        var e = "chat.conversation.action_menu"
          , n = [{
          label: m().translate("clear_history", {
            scope: e
          }),
          onClick: u
        }];
        return t.blocked || n.push({
          label: m().translate("block_person", {
            scope: e
          }),
          onClick: c
        }),
        n.push({
          label: m().translate(t.muted ? "unmute" : "mute", {
            scope: e
          }),
          onClick: function() {
            return t.mute(!t.muted)
          }
        }),
        n
      }
      ), [t.blocked, t.muted, u, c])
        , b = o.useCallback((function() {
        l(),
        (0,
        g.xx)(d, f)
      }
      ), [d]);
      return o.createElement(o.Fragment, null, o.createElement(Le.Fb, {
        underline: !0,
        includeBackButton: r,
        actions: p,
        onActionMenuToggle: b
      }, o.createElement(Ke.P, {
        type: t.destination.type,
        name: t.destination.name,
        imageUrl: t.destination.photoUrl,
        muted: t.muted
      })), o.createElement(Ge.V, {
        appMode: n,
        topOffset: Le.yJ,
        onClose: l
      }, a === Be.ClearHistory ? o.createElement(Ve, {
        conversation: t,
        onClose: l
      }) : a === Be.BlockPerson ? o.createElement(Je, {
        conversation: t,
        onClose: l
      }) : null))
    }
    ));
    qe.displayName = "UserHeader";
    const Qe = "jAeYkBxhF5G7owOcVEF2TQ==";
    var Ze, Xe = function() {
      return o.createElement("div", {
        className: Qe
      }, o.createElement("i", {
        className: "w-icon w-icon-info"
      }), o.createElement(v.WzCaption, null, m().t("not_participant", {
        scope: "chat.conversation.message_box"
      })))
    };
    !function(e) {
      e.ClearHistory = "ClearHistory",
      e.BlockPerson = "BlockPerson"
    }(Ze || (Ze = {}));
    var Ye = (0,
    a.Pi)((function(e) {
      var t = e.appMode
        , n = e.conversation
        , a = e.pageVisible;
      return o.createElement("div", {
        className: r
      }, n.isGroup() ? o.createElement(De.t, {
        conversation: n,
        appMode: t,
        includeBackButton: t !== s.J.MobileWeb,
        conversationView: !0
      }) : o.createElement(qe, {
        conversation: n,
        appMode: t,
        includeBackButton: t !== s.J.MobileWeb
      }), o.createElement("div", null, n.blocked && !n.isGroup() ? o.createElement(We, {
        conversation: n
      }) : null), o.createElement("div", {
        className: i
      }, o.createElement(Ae, {
        conversation: n,
        pageVisible: a
      })), o.createElement("div", null, n.isGroup() && !n.destination.membershipStore.currentUserMembership ? o.createElement(Xe, null) : o.createElement(N, {
        conversation: n
      })))
    }
    ));
    Ye.displayName = "Conversation"
  }
  ,
  5538: (e,t,n)=>{
    "use strict";
    n.d(t, {
      E: ()=>m
    });
    var r = n(5466)
      , i = n(7766);
    const o = "m5wIQiA0hU4pzuPF082ddg=="
      , a = "icSIGkghKHSBUDAC2pP19A=="
      , s = "UF3Fpg5Tyv0UuPIrRGwRJA=="
      , l = "AN5ddGuKiN3N16wvx-DOUQ=="
      , u = "lF2nhTjiBskSEculjE3Naw=="
      , c = "HyGqf55K8ywICSVqvI-uKw==";
    var f, d = n(8098), p = n.n(d), b = Object.freeze(((f = {})[i.rJ.New] = p()(o, "w-icon w-icon-clock"),
    f[i.rJ.Pending] = p()(a, "w-icon w-icon-clock"),
    f[i.rJ.Sent] = p()(s, "w-icon w-icon-checkmark"),
    f[i.rJ.SendingFailed] = p()(u, "w-icon w-icon-alert-warning"),
    f[i.rJ.Received] = p()(l, "w-icon w-icon-checkmark-double"),
    f[i.rJ.Read] = p()(c, "w-icon", "w-icon-checkmark-double"),
    f)), m = function(e) {
      var t = e.status;
      return r.createElement("i", {
        className: b[t],
        "data-testid": "status-indicator"
      })
    }
  }
  ,
  966: (e,t,n)=>{
    "use strict";
    n.d(t, {
      R: ()=>d,
      k: ()=>p
    });
    const r = "LDpxYed2aBgmEYJycW3afg=="
      , i = "lEtS9UNbB5RZUyB01BrbGg=="
      , o = "EuFzlpYM9YsrS28qS1Zaqw=="
      , a = "+KzlbUFjzFo2IY6d02eSxQ=="
      , s = "_6L+6PsCfX56puisnuHQKMQ=="
      , l = "wNRf7KfKyqZMmal1+POOlg==";
    var u = n(5466)
      , c = n(8098)
      , f = n.n(c)
      , d = "data-conversation-item-hook"
      , p = function(e) {
      var t, n = e.containerRef, c = e.status, p = e.transitionDuration, b = e.selectedConversationId, m = e.renderPlaceholder, h = e.children, v = n.current, g = null == v ? void 0 : v.getBoundingClientRect(), y = null === (t = null == v ? void 0 : v.querySelector("[".concat(d, "='").concat(b, "']"))) || void 0 === t ? void 0 : t.getBoundingClientRect();
      return u.createElement("div", {
        style: {
          "--waze-chat-conversation-transition-duration": "".concat(p, "ms")
        }
      }, u.createElement("div", {
        className: f()(r, ["entering", "entered"].includes(c) && i)
      }), u.createElement("div", {
        className: f()(o, ["entering", "entered"].includes(c) && i, ["exiting", "exited"].includes(c) && a),
        style: ["exiting", "exited"].includes(c) ? {
          top: y && g ? y.top - g.top : void 0,
          height: null == y ? void 0 : y.height
        } : void 0
      }, u.createElement("div", {
        className: f()(s, ["entering", "entered"].includes(c) && i)
      }, m()), u.createElement("div", {
        className: f()(l, ["entering", "entered"].includes(c) && i),
        style: ["entering", "exiting"].includes(c) ? {
          height: null == g ? void 0 : g.height
        } : void 0
      }, h)))
    }
  }
  ,
  2793: (e,t,n)=>{
    "use strict";
    n.d(t, {
      p: ()=>W
    });
    const r = "CppYtf7Qn1xWcwFTaKFpCg=="
      , i = "K5lAm+oaHH1K9gAFOGhUxQ=="
      , o = "erLxxtzp+VXMQM-Djnqesw=="
      , a = "SMbZxqKyJWwbxI48V13ciQ=="
      , s = "_92fiBbs5K7Hkycq+B5CECw=="
      , l = "GISriskIsQQvE5+synB5Cw==";
    var u = n(8098)
      , c = n.n(u)
      , f = n(3955)
      , d = n.n(f)
      , p = n(5466)
      , b = n(9983)
      , m = n(2388)
      , h = n(5693);
    const v = "k6ZSbrUz+qviC6Ke-FUsNA=="
      , g = "twJ0FyV9HjrchVK2yUNh3g=="
      , y = "DpnxiW2MrpIOdLG2Xv1cUQ==";
    var w, E;
    function O() {
      return O = Object.assign ? Object.assign.bind() : function(e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];
          for (var r in n)
            Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
        }
        return e
      }
      ,
      O.apply(this, arguments)
    }
    const S = function(e) {
      return p.createElement("svg", O({
        width: 96,
        height: 96,
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg"
      }, e), w || (w = p.createElement("g", {
        clipPath: "url(#hero_inline_svg__clip0_784:5595)"
      }, p.createElement("path", {
        d: "M26.439 55.878h7.578V56s0 0 0 0c0 1.533-1.205 2.974-3.033 2.983A3 3 0 0028 61.957c-.008.913.254 1.83.542 2.585.31.812.749 1.688 1.293 2.584 1.09 1.793 2.688 3.801 4.784 5.687a28.08 28.08 0 005.409 3.817 9 9 0 008.992 9.374 9.003 9.003 0 008.49-6.008l4.027.003a9.002 9.002 0 0017.243-5.092c7.393-5.146 12.237-13.71 12.237-23.407 0-15.706-12.795-28.5-28.5-28.5a28.374 28.374 0 00-14.576 4.004C45.175 17.747 36.596 11 26.44 11 14.046 11 4 21.046 4 33.439s10.046 22.439 22.439 22.439z",
        fill: "#fff",
        stroke: "#fff",
        strokeWidth: 3,
        strokeLinejoin: "round"
      }), p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M77.525 77a7.5 7.5 0 10-15 0 7.5 7.5 0 0015 0z",
        fill: "#000"
      }), p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M37.017 51.5c0-14.083 11.417-25.5 25.5-25.5 14.049 0 25.5 11.451 25.5 25.5 0 14.083-11.417 25.5-25.5 25.5l-8.998-.005C38.522 76.967 30.974 64.929 31 61.983c3.61-.019 6.016-2.934 6.017-5.983v-4.5z",
        fill: "#FFAEAE"
      }), p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M62.517 27.5c-13.255 0-24 10.745-24 24V56c0 3.25-2.193 6.392-5.642 7.253.192.447.459.965.806 1.535.862 1.418 2.178 3.087 3.948 4.68 3.532 3.177 8.824 6.013 15.893 6.027 2.993.005 5.998.005 8.995.005 13.255 0 24-10.745 24-24 0-13.22-10.78-24-24-24zm-27 24c0-14.912 12.088-27 27-27 14.877 0 27 12.123 27 27 0 14.856-11.999 26.91-26.834 27l-9.333-.006c-7.845-.059-13.77-3.236-17.727-6.796-1.988-1.788-3.492-3.683-4.506-5.351a14.648 14.648 0 01-1.173-2.34c-.26-.682-.45-1.396-.444-2.037a1.5 1.5 0 011.492-1.487A4.488 4.488 0 0035.517 56v-4.5z",
        fill: "#000"
      }), p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M56.52 77.005a7.5 7.5 0 10-15 0 7.5 7.5 0 0015 0zM56.476 42.52c-1.322 0-2.43.843-2.82 1.99a1.5 1.5 0 01-2.84-.965 5.969 5.969 0 015.66-4.025 5.969 5.969 0 015.657 4.014 1.5 1.5 0 01-2.838.971 2.969 2.969 0 00-2.819-1.985zM74.504 42.52a2.97 2.97 0 00-2.82 1.99 1.5 1.5 0 01-2.841-.965 5.969 5.969 0 015.661-4.025 5.969 5.969 0 015.657 4.014 1.5 1.5 0 01-2.838.971 2.97 2.97 0 00-2.819-1.985z",
        fill: "#000"
      }), p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M52.044 52.94h26.873c.07 0 .127.058.126.129l-.014 1.226c0 7.556-6.095 13.679-13.603 13.653-7.492-.026-13.507-6.255-13.507-13.801v-1.08c0-.07.056-.126.125-.126z",
        fill: "#75011D"
      }), p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M59.681 64.938a6.012 6.012 0 015.8-4.457 6.012 6.012 0 015.799 4.455 11.943 11.943 0 01-5.8 1.496c-2.102 0-4.078-.542-5.799-1.494z",
        fill: "#FF5252"
      }), p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M65.48 67.932c-2.216 0-4.416-.55-6.362-1.593a1.71 1.71 0 01-.83-1.985c.937-3.164 3.895-5.373 7.193-5.373 3.297 0 6.254 2.209 7.192 5.371a1.71 1.71 0 01-.828 1.985 13.525 13.525 0 01-6.366 1.595z",
        fill: "#FF5252"
      }), p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M65.48 57.48c-1.979 0-3.858.633-5.434 1.83a9.08 9.08 0 00-3.197 4.618 3.215 3.215 0 001.56 3.733 15.028 15.028 0 007.07 1.771c2.463 0 4.909-.613 7.073-1.773a3.215 3.215 0 001.56-3.733 9.082 9.082 0 00-3.197-4.617 8.917 8.917 0 00-5.434-1.828zm0 3a6.012 6.012 0 015.755 4.299.204.204 0 01-.1.236 11.944 11.944 0 01-5.656 1.417c-2.042 0-3.967-.513-5.654-1.415a.204.204 0 01-.1-.237 6.012 6.012 0 015.756-4.3z",
        fill: "#000"
      }), p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M53.422 54.44c.153 6.617 5.471 11.985 12.009 12.008 6.62.023 12.02-5.338 12.097-12.007H53.422zm-3.003-1.373c0-.889.718-1.626 1.625-1.626h26.873c.915 0 1.636.749 1.626 1.645l-.014 1.218c-.005 8.372-6.762 15.173-15.108 15.144-8.35-.03-15.002-6.96-15.002-15.301v-1.08z",
        fill: "#000"
      }), p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M26.439 52.878C15.703 52.878 7 44.175 7 33.439S15.703 14 26.439 14s19.439 8.703 19.439 19.439c0 4.624-1.614 8.87-4.31 12.208l4.288 4.732c.87.96.189 2.499-1.108 2.499H26.439z",
        fill: "#BDEBFF"
      }), p.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M26.44 15.5c9.907 0 17.938 8.032 17.938 17.939 0 4.269-1.489 8.185-3.977 11.265a1.5 1.5 0 00.055 1.95l4.281 4.724H26.44c-9.907 0-17.939-8.032-17.939-17.939S16.532 15.5 26.44 15.5zm20.938 17.939c0-11.564-9.374-20.939-20.939-20.939C14.875 12.5 5.5 21.875 5.5 33.439s9.375 20.939 20.94 20.939h18.308c2.598 0 3.964-3.081 2.22-5.007l-3.454-3.81a20.85 20.85 0 003.864-12.122z",
        fill: "#000"
      }), p.createElement("circle", {
        cx: 17.5,
        cy: 33.5,
        r: 2.5,
        fill: "#000"
      }), p.createElement("circle", {
        cx: 26.5,
        cy: 33.5,
        r: 2.5,
        fill: "#000"
      }), p.createElement("circle", {
        cx: 35.5,
        cy: 33.5,
        r: 2.5,
        fill: "#000"
      }))), E || (E = p.createElement("defs", null, p.createElement("clipPath", {
        id: "hero_inline_svg__clip0_784:5595"
      }, p.createElement("path", {
        fill: "#fff",
        d: "M0 0h96v96H0z"
      })))))
    };
    var P = p.memo((function() {
      var e = "chat.conversation_list.no_messages";
      return p.createElement("div", {
        className: v
      }, p.createElement(S, null), p.createElement(b.WzH6, {
        className: g
      }, d().t("title", {
        scope: e
      })), p.createElement(b.WzBody2, {
        className: y
      }, d().t("text", {
        scope: e
      })))
    }
    ));
    P.displayName = "ConversationListNoMessages";
    var j = n(7821)
      , M = n(1333)
      , C = n(9948)
      , I = n(9664);
    const R = "btjr9q6baj43ErxG17y+6w=="
      , _ = "cdJAf+0UE5JdiEMdCyQ4Pg==";
    var T = n(72)
      , N = function() {
      return p.createElement(T.rU, {
        className: R,
        to: "/settings"
      }, p.createElement("i", {
        className: c()("w-icon w-icon-settings", _)
      }))
    }
      , A = n(8570)
      , k = n(1799);
    var x = n(155)
      , z = n(3971);
    function U(e) {
      return e.destination.identifier.toUniqueString()
    }
    var W = function(e) {
      var t = e.appMode
        , n = e.conversations
        , u = e.onConversationClick
        , f = e.onLoadMore
        , v = e.onCloseChat
        , g = "chat.conversation_list"
        , y = function(e) {
        var t = e.items
          , n = e.itemKeyGetter
          , r = e.chunkSize
          , i = e.fixedStartIndex
          , o = p.useState((function() {
          return new k.$r(n)
        }
        ))[0];
        return p.useEffect((function() {
          return o.setItems(t)
        }
        ), [o, t]),
        p.useEffect((function() {
          return o.setChunkSize(r)
        }
        ), [o, r]),
        p.useEffect((function() {
          return o.setFixedStartIndex(i)
        }
        ), [o, i]),
        o
      }({
        items: n,
        itemKeyGetter: U,
        chunkSize: j.aQ,
        fixedStartIndex: 0
      })
        , w = p.useCallback((function(e) {
        return p.createElement(h.X, {
          conversation: e,
          onClick: u
        })
      }
      ), [u])
        , E = (0,
      z.O)().report
        , O = p.useCallback((function(e, t) {
        t > y.lastItemIndex - j.aQ && f().catch((function(e) {
          return E(e, x.w.LOAD_MORE_CONVERSATIONS)
        }
        ))
      }
      ), [n.length, f])
        , S = (0,
      A.g)().enableChatSettings;
      return p.createElement("div", {
        className: r,
        "data-testid": "conversation-list"
      }, p.createElement("div", null, t === m.J.MobileWeb ? S ? p.createElement(I.v, null, p.createElement("div", {
        className: l
      }, p.createElement(b.WzOverline, null, d().translate("subtitle", {
        scope: g
      })), p.createElement(N, null))) : null : p.createElement(C.Fb, null, p.createElement("div", {
        className: c()(a, t === m.J.Embed && s)
      }, t === m.J.Embed && p.createElement(b.WzButton, {
        color: "secondary",
        size: "sm",
        onClick: v
      }, p.createElement("i", {
        className: c()("w-icon w-icon-x", o)
      })), p.createElement(b.WzH5, null, d().translate("title", {
        scope: g
      })), S && p.createElement(N, null)))), p.createElement("div", {
        className: i
      }, n.length > 0 ? p.createElement(M.t, {
        store: y,
        itemRenderer: w,
        onRenderItems: O
      }) : p.createElement(P, null)))
    }
  }
  ,
  5693: (e,t,n)=>{
    "use strict";
    n.d(t, {
      X: ()=>k
    });
    const r = "hg+iy-hP-KQHlBgXCmWJ8A=="
      , i = "PFGdIWat9wCONOQYyvw50A=="
      , o = "g+HvE5vupIrTWr3FpCaPAA=="
      , a = "r6eN6jIlxiSOX5odCS+eXg=="
      , s = "Cn3z-kZxMXDzRee+oSYy7A=="
      , l = "UN6IQKEvTsRVoXXz9y2W1g==";
    var u = n(5466)
      , c = n(2832)
      , f = n(9983)
      , d = n(4944)
      , p = n(3700)
      , b = n(660)
      , m = n(5951)
      , h = n(4656)
      , v = n(3971)
      , g = n(966);
    const y = "+Lpsi+WAnSg236pIGpc2vQ=="
      , w = "zZTdLiewZwZ-C2mj1-T85A=="
      , E = "_0quFk0BCHITzjLDcVt0aGw=="
      , O = "_8i2Sn7lfHHHP8X3keA5d0w=="
      , S = "PXYL7cSrtIY2HTP8mFATzg=="
      , P = "RgKiNujhZBt5gi5QSGevpA=="
      , j = "LsMawF++mF8Pg+qzQtpnHQ==";
    var M = n(3955)
      , C = n.n(M)
      , I = n(7766)
      , R = n(5538)
      , _ = n(1529)
      , T = n(449)
      , N = (0,
    c.Pi)((function(e) {
      var t = e.conversation
        , n = "chat.conversation_list.item"
        , r = t.streamStore.messageStore.lastMessage
        , i = (0,
      u.useMemo)((function() {
        if (r && !(r instanceof _.j))
          return r.isOutgoing ? C().t("you", {
            scope: n
          }) : r.destination.type === I.pq.Group ? r.sender.name : void 0
      }
      ), [r]);
      return t.blocked && !t.isGroup() ? u.createElement(f.WzBody2, {
        className: j
      }, u.createElement("div", {
        className: "w-icon w-icon-error"
      }), C().t("block_indicator", {
        scope: n
      })) : r ? u.createElement("div", {
        className: y
      }, u.createElement(f.WzBody2, {
        className: O
      }, t.muted && u.createElement("i", {
        className: "w-icon w-icon-sound-off-fill",
        "data-testid": "muted-indicator"
      }), u.createElement("div", {
        className: E
      }, i && u.createElement(u.Fragment, null, u.createElement(f.WzSubhead4, {
        className: P,
        dir: "auto"
      }, i), u.createElement(f.WzSubhead4, {
        className: P
      }, ": ")), r instanceof _.j ? u.createElement("span", {
        className: S,
        dir: "auto"
      }, r.components[r.components.length - 1]) : u.createElement("span", {
        dir: "auto"
      }, r.text.slice(0, 500)))), t.unreadMessagesAbsoluteNumber > 0 ? u.createElement(f.WzNotificationIndicator, {
        value: t.unreadMessagesAbsoluteNumber,
        "data-testid": "item-notification-indicator"
      }) : !t.isGroup() && r instanceof T.XZ && r.isOutgoing ? u.createElement(R.E, {
        status: r.status
      }) : null) : u.createElement(f.WzBody2, {
        className: w
      }, C().t("start_conversation", {
        scope: n
      }))
    }
    ));
    N.displayName = "ConversationItemInfo";
    var A = function() {
      return A = Object.assign || function(e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in t = arguments[n])
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e
      }
      ,
      A.apply(this, arguments)
    }
      , k = (0,
    c.Pi)((function(e) {
      var t, n, c, y = e.conversation, w = e.onClick, E = (0,
      m.b)().webEvents, O = (0,
      v.O)().report, S = u.useMemo((function() {
        return void 0 === w ? void 0 : function() {
          (0,
          b.or)(E, O, y.destination.name),
          w(y)
        }
      }
      ), [y, w]);
      return u.createElement("div", A({
        className: r
      }, ((t = {})[g.R] = y.destination.identifier.id,
      t), {
        onClick: S
      }), u.createElement("div", {
        className: i
      }), u.createElement(p.q, {
        profileType: y.destination.type,
        imageUrl: y.destination.photoUrl
      }), u.createElement("div", null, u.createElement("div", {
        className: o
      }, u.createElement(f.WzH6, {
        className: s
      }, y.destination.name), y.sortTimestamp > 0 && u.createElement(f.WzCaption, {
        className: l
      }, (n = y.sortTimestamp,
      c = (0,
      h.IM)(n, Date.now()) ? "date" : "time",
      (0,
      d.o)(n, c)))), u.createElement("div", {
        className: a
      }, u.createElement(N, {
        conversation: y
      }))))
    }
    ));
    k.displayName = "ConversationListItem"
  }
  ,
  8368: (e,t,n)=>{
    "use strict";
    n.d(t, {
      V: ()=>m
    });
    var r = n(5466)
      , i = n(2388);
    const o = "F513rgPcwmumu3-V5n9-TA=="
      , a = "_2l7CAUFpmMYdB2Uw11V0sg=="
      , s = "_6OcG71krq5xCfJy30OHRuQ==";
    var l = function(e) {
      var t = e.children
        , n = e.topOffset
        , i = void 0 === n ? 0 : n
        , l = e.onClose;
      return t ? r.createElement("div", {
        className: o,
        style: {
          top: i
        }
      }, r.createElement("div", {
        className: a,
        onClick: function(e) {
          e.preventDefault(),
          e.stopPropagation(),
          l()
        }
      }), r.createElement("div", {
        className: s
      }, t)) : null
    }
      , u = n(9983)
      , c = n(155)
      , f = n(3971)
      , d = function(e) {
      var t = e.children
        , n = e.onClose
        , i = r.useRef(null)
        , o = (0,
      f.O)().report;
      return r.useEffect((function() {
        var e = i.current;
        return e.addEventListener("dialogHidden", n),
        function() {
          return e.removeEventListener("dialogHidden", n)
        }
      }
      ), []),
      r.useEffect((function() {
        var e, n, r = i.current;
        null == t ? null === (e = r.hideDialog) || void 0 === e || e.call(r).catch((function(e) {
          return o(e, c.w.HIDE_DIALOG)
        }
        )) : null === (n = r.showDialog) || void 0 === n || n.call(r).catch((function(e) {
          return o(e, c.w.SHOW_DIALOG)
        }
        ))
      }
      ), [t]),
      r.createElement(u.WzDialog, {
        ref: i,
        dir: document.dir,
        dismissible: !0
      }, t)
    }
      , p = function() {
      return p = Object.assign || function(e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in t = arguments[n])
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e
      }
      ,
      p.apply(this, arguments)
    }
      , b = function(e, t) {
      var n = {};
      for (var r in e)
        Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
      if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
        var i = 0;
        for (r = Object.getOwnPropertySymbols(e); i < r.length; i++)
          t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]])
      }
      return n
    }
      , m = function(e) {
      var t = e.appMode
        , n = b(e, ["appMode"])
        , o = t === i.J.Embed ? l : d;
      return r.createElement(o, p({}, n))
    }
  }
  ,
  6569: (e,t,n)=>{
    "use strict";
    n.d(t, {
      t: ()=>p
    });
    const r = "gNX0a1rkkAwfYDZ0LPzewQ=="
      , i = "yojKtU4UXR+OTcJlWUkmnw=="
      , o = "lmXKuH4i8mwygeAH4oZ7Dw=="
      , a = "U1GIrTklj7ZjOXVtmUnKcw==";
    var s = n(8098)
      , l = n.n(s)
      , u = n(3955)
      , c = n.n(u)
      , f = n(5466)
      , d = n(9983)
      , p = function(e) {
      var t = e.title
        , n = e.text
        , s = e.action
        , u = e.onActionClick
        , p = "chat.failure";
      return f.createElement("div", {
        className: r,
        "data-testid": "failure-component"
      }, f.createElement("i", {
        className: l()("w-icon w-icon-warning", i)
      }), f.createElement(d.WzH6, {
        className: o
      }, null != t ? t : c().t("title", {
        scope: p
      })), f.createElement(d.WzBody2, {
        className: a
      }, n), f.createElement(d.WzBody2, null, f.createElement(d.WzA, {
        onClick: function(e) {
          e.preventDefault(),
          u()
        }
      }, null != s ? s : c().t("action", {
        scope: p
      }))))
    }
  }
  ,
  2053: (e,t,n)=>{
    "use strict";
    n.d(t, {
      t: ()=>I
    });
    const r = "q2mTb9++ZDCvpJ6jtPL5mQ==";
    var i = n(7766)
      , o = n(3955)
      , a = n.n(o)
      , s = n(5466)
      , l = n(8368)
      , u = n(9948)
      , c = n(4049)
      , f = n(1807)
      , d = n(6929)
      , p = n(2832);
    const b = "l5oh3+EsQ8AfrE95MOo2-w=="
      , m = "vJsmfbfb4Ltg-qHBbVJpAQ==";
    var h = n(9983)
      , v = n(3971)
      , g = n(155)
      , y = n(3751)
      , w = function(e) {
      var t = e.group
        , n = e.onClose
        , r = "chat.group_profile.leave_group"
        , i = (0,
      v.O)().report
        , o = s.useState(!1)
        , l = o[0]
        , u = o[1]
        , c = s.useState()
        , f = c[0]
        , d = c[1]
        , p = s.useCallback((function() {
        u(!0),
        t.leave().then((function() {
          u(!1),
          n()
        }
        )).catch((function(e) {
          d({
            text: a().t("error", {
              scope: r
            })
          }),
          i(e, g.w.LEAVE_GROUP),
          u(!1)
        }
        ))
      }
      ), [t, n]);
      return s.createElement(s.Fragment, null, s.createElement(h.WzDialogHeader, null, a().t("header", {
        scope: r
      })), s.createElement(h.WzDialogContent, null, s.createElement(h.WzBody2, {
        className: b
      }, a().t("description", {
        scope: r
      }))), s.createElement(h.WzDialogControls, null, s.createElement("div", {
        className: m
      }, s.createElement(h.WzButton, {
        color: "secondary",
        onClick: n,
        disabled: l
      }, a().t("cancel", {
        scope: r
      })), s.createElement(h.WzButton, {
        color: "primary",
        alarming: !0,
        onClick: p,
        busy: l
      }, a().t("leave", {
        scope: r
      })))), s.createElement(y.P, {
        message: f
      }))
    };
    const E = "_2iY-uKC7meEdi+d-NUoKpg=="
      , O = "w9lJZQ6UyJ1lomWnqce9qA==";
    var S, P = function(e) {
      var t = e.onClose
        , n = "chat.group_profile.hide_group";
      return s.createElement(s.Fragment, null, s.createElement(h.WzDialogHeader, null, a().t("header", {
        scope: n
      })), s.createElement(h.WzDialogContent, null, s.createElement(h.WzBody2, {
        className: E
      }, a().t("description", {
        scope: n
      }))), s.createElement(h.WzDialogControls, null, s.createElement("div", {
        className: O
      }, s.createElement(h.WzButton, {
        color: "secondary",
        onClick: t
      }, a().t("cancel", {
        scope: n
      })), s.createElement(h.WzButton, {
        color: "primary",
        alarming: !0
      }, a().t("hide", {
        scope: n
      })))))
    }, j = n(4498), M = n(3680), C = function(e, t, n) {
      if (n || 2 === arguments.length)
        for (var r, i = 0, o = t.length; i < o; i++)
          !r && i in t || (r || (r = Array.prototype.slice.call(t, 0, i)),
          r[i] = t[i]);
      return e.concat(r || Array.prototype.slice.call(t))
    };
    !function(e) {
      e.ChangeDescription = "ChangeDescription",
      e.LeaveGroup = "LeaveGroup",
      e.HideGroup = "HideGroup"
    }(S || (S = {}));
    var I = (0,
    p.Pi)((function(e) {
      var t = e.conversation
        , n = e.appMode
        , o = e.includeBackButton
        , p = e.conversationView
        , b = "chat.group_header"
        , m = (0,
      f.s0)()
        , h = t.destination
        , v = h.type
        , g = h.name
        , E = h.photoUrl
        , O = h.membershipStore
        , I = O.memberships
        , R = O.currentUserMembership
        , _ = s.useState()
        , T = _[0]
        , N = _[1]
        , A = s.useCallback((function() {
        return N(void 0)
      }
      ), [])
        , k = s.useState()
        , x = k[0]
        , z = k[1]
        , U = function(e, t, n) {
        var r, o = e.destination, l = null === (r = o.membershipStore.currentUserMembership) || void 0 === r ? void 0 : r.role, u = o.invitationUrl;
        return s.useMemo((function() {
          var r = "chat.group_header.actions";
          return l ? C(C(C([], u ? [{
            label: a().t("copy_url", {
              scope: r
            }),
            onClick: function() {
              navigator.clipboard.writeText(u),
              n({
                text: a().t("url_copied", {
                  scope: "chat.group_header.snackbar"
                })
              })
            }
          }] : [], !0), l === i.VC.Admin ? [{
            label: a().t("edit_description", {
              scope: r
            }),
            onClick: function() {
              return t(S.ChangeDescription)
            }
          }] : [], !0), [{
            label: a().t(e.muted ? "unmute" : "mute", {
              scope: r
            }),
            onClick: function() {
              return e.mute(!e.muted)
            }
          }, {
            label: a().t("leave", {
              scope: r
            }),
            onClick: function() {
              return t(S.LeaveGroup)
            },
            danger: !0
          }], !1) : []
        }
        ), [l, u, e.muted])
      }(t, N, z);
      return s.createElement(s.Fragment, null, s.createElement(u.Fb, {
        underline: !0,
        includeBackButton: o,
        actions: U,
        onContentClick: p && R ? function() {
          return m(d._1.GROUP_PROFILE)
        }
        : void 0
      }, s.createElement(j.P, {
        type: v,
        name: g,
        muted: t.muted,
        imageUrl: E,
        caption: R ? p ? s.createElement(M.N6, {
          text: a().t("count_members", {
            scope: b,
            count: I.length
          }),
          component: function(e, t) {
            return s.createElement("span", {
              key: t,
              className: r
            }, e)
          }
        }) : a().t("group_info", {
          scope: b
        }) : ""
      })), s.createElement(l.V, {
        appMode: n,
        topOffset: u.yJ,
        onClose: A
      }, T === S.ChangeDescription ? s.createElement(c.p, {
        group: h,
        onClose: A
      }) : T === S.LeaveGroup ? s.createElement(w, {
        group: h,
        onClose: A
      }) : T === S.HideGroup ? s.createElement(P, {
        group: h,
        onClose: A
      }) : null), s.createElement(y.A, {
        message: x
      }))
    }
    ));
    I.displayName = "GroupHeader"
  }
  ,
  6313: (e,t,n)=>{
    "use strict";
    n.d(t, {
      i: ()=>H
    });
    const r = "gT+Q6IN6jA6FeWyO-YklyA=="
      , i = "Vq8ZTjj+ZaNZDCCe602xhw=="
      , o = "qBkomyynvM640wPVetZVow=="
      , a = "W9nI5cBzpMG60X3Pgk8xmA=="
      , s = "UVpvMvGUILBiP7e+ZwxRZg=="
      , l = "Ph8xdBpn45A-yc0SeWK+Xw=="
      , u = "jf94c1z7O+02E-VL6AWp9w=="
      , c = "_7XgXY7CPNBUBD+EoYsYWqg=="
      , f = "tNAH1ocXGGnXmp1fYuVkww=="
      , d = "RkKIWCtiO2Qmoj+inla6JQ==";
    var p, b, m, h, v, g, y, w, E = n(5466), O = n(9948), S = n(9983), P = n(8098), j = n.n(P), M = n(3955), C = n.n(M), I = n(3700), R = n(7766);
    function _() {
      return _ = Object.assign ? Object.assign.bind() : function(e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];
          for (var r in n)
            Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
        }
        return e
      }
      ,
      _.apply(this, arguments)
    }
    const T = function(e) {
      return E.createElement("svg", _({
        width: 63,
        height: 63,
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg"
      }, e), p || (p = E.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M50.61 55.175c0-4.319-3.509-7.82-7.837-7.82-4.327 0-7.836 3.501-7.836 7.82 0 4.319 3.509 7.82 7.836 7.82 4.328 0 7.836-3.501 7.836-7.82z",
        fill: "#75011D"
      })), b || (b = E.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M8.286 28.587C8.286 13.904 20.214 2 34.928 2 49.606 2 61.57 13.94 61.57 28.588c0 14.683-11.928 26.587-26.642 26.587l-9.4-.005C9.857 55.14 1.973 42.589 2 39.518c3.773-.02 6.286-3.06 6.286-6.239v-4.692z",
        fill: "#FD804B"
      })), m || (m = E.createElement("path", {
        clipRule: "evenodd",
        d: "M8.286 28.587C8.286 13.904 20.214 2 34.928 2 49.606 2 61.57 13.94 61.57 28.588c0 14.683-11.928 26.587-26.642 26.587l-9.4-.005C9.857 55.14 1.973 42.589 2 39.518c3.773-.02 6.286-3.06 6.286-6.239v-4.692z",
        stroke: "#75011D",
        strokeWidth: 2.859,
        strokeLinejoin: "round"
      })), h || (h = E.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M28.662 55.18c0-4.319-3.508-7.82-7.836-7.82s-7.836 3.502-7.836 7.82c0 4.319 3.508 7.82 7.836 7.82s7.836-3.501 7.836-7.82zM50.582 39.626c0-6.957-5.59-12.597-12.486-12.597-6.895 0-12.485 5.64-12.485 12.597v.737a5.433 5.433 0 005.44 5.428h14.092a5.433 5.433 0 005.439-5.428v-.737z",
        fill: "#75011D"
      })), v || (v = E.createElement("path", {
        clipRule: "evenodd",
        d: "M50.582 39.626v0c0-6.957-5.59-12.597-12.486-12.597-6.895 0-12.485 5.64-12.485 12.597v.737a5.433 5.433 0 005.44 5.428h14.092a5.433 5.433 0 005.439-5.428v-.737z",
        stroke: "#75011D",
        strokeWidth: 2.859
      })), g || (g = E.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M44.409 44.275c0-4.377-3.235-6.353-6.317-6.353-3.186 0-6.317 2.383-6.317 6.353",
        fill: "#FF5252"
      })), y || (y = E.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M50.592 22.33a3.13 3.13 0 00-3.133-3.128 3.13 3.13 0 00-3.133 3.128 3.13 3.13 0 003.133 3.128 3.13 3.13 0 003.133-3.128zM31.78 22.33a3.13 3.13 0 00-3.133-3.128 3.13 3.13 0 00-3.133 3.128 3.13 3.13 0 003.133 3.128 3.13 3.13 0 003.133-3.128z",
        fill: "#75011D"
      })), w || (w = E.createElement("path", {
        d: "M44.984 16.746a12.299 12.299 0 008.8 3.304M22.703 15.397a12.3 12.3 0 018.8-3.303",
        stroke: "#75011D",
        strokeWidth: 2.859,
        strokeLinecap: "round"
      })))
    };
    var N, A, k, x, z, U;
    function W() {
      return W = Object.assign ? Object.assign.bind() : function(e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];
          for (var r in n)
            Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
        }
        return e
      }
      ,
      W.apply(this, arguments)
    }
    const D = function(e) {
      return E.createElement("svg", W({
        width: 80,
        height: 80,
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg"
      }, e), N || (N = E.createElement("rect", {
        width: 80,
        height: 80,
        rx: 40,
        fill: "#F2F4F7"
      })), A || (A = E.createElement("path", {
        d: "M31.975 30.231h1.575v-4.294a6.45 6.45 0 1112.9 0v4.294h1.575v-4.294c0-4.425-3.6-8.025-8.025-8.025-4.425 0-8.025 3.6-8.025 8.025v4.294z",
        fill: "#FDE544"
      })), k || (k = E.createElement("path", {
        d: "M51.307 32.219c2.025 1.631 3.337 4.087 3.337 6.862v16.013c0 2.794-1.312 5.25-3.337 6.862 3.337-.525 5.887-3.393 5.887-6.862V39.081c0-3.468-2.569-6.337-5.887-6.862z",
        fill: "#C25700"
      })), x || (x = E.createElement("path", {
        d: "M29.782 62.069h16.012c3.844 0 6.975-3.131 6.975-6.975V39.08c0-3.843-3.131-6.975-6.975-6.975H29.782c-3.844 0-6.975 3.132-6.975 6.975v16.013c0 3.844 3.13 6.975 6.975 6.975zm10.312-12.056v3.768a1.82 1.82 0 01-1.819 1.82h-.093a1.82 1.82 0 01-1.82-1.82v-3.768a4.933 4.933 0 01-3.055-4.557 4.937 4.937 0 014.93-4.93 4.937 4.937 0 014.932 4.93c0 2.063-1.256 3.807-3.056 4.557h-.019z",
        fill: "#FEA066"
      })), z || (z = E.createElement("path", {
        d: "M29.782 63.944h20.437c4.875 0 8.85-3.975 8.85-8.85V39.08c0-4.875-3.975-8.85-8.85-8.85H49.9v-4.294c0-5.456-4.443-9.9-9.9-9.9-5.456 0-9.9 4.444-9.9 9.9v4.294h-.318c-4.875 0-8.85 3.975-8.85 8.85v16.013c0 4.875 3.975 8.85 8.85 8.85zM22.807 39.08c0-3.844 3.13-6.975 6.975-6.975h16.012c3.844 0 6.975 3.131 6.975 6.975v16.013c0 3.843-3.131 6.975-6.975 6.975H29.782c-3.844 0-6.975-3.132-6.975-6.975V39.08zM40 17.931c4.425 0 8.025 3.6 8.025 8.025v4.294H46.45v-4.294a6.45 6.45 0 10-12.9 0v4.294h-1.575v-4.294c0-4.425 3.6-8.025 8.025-8.025zm17.194 37.181c0 3.47-2.569 6.338-5.887 6.863 2.025-1.631 3.337-4.088 3.337-6.863V39.1c0-2.794-1.312-5.25-3.337-6.863 3.337.525 5.887 3.394 5.887 6.863v16.012zM44.575 30.25h-9.15v-4.294A4.581 4.581 0 0140 21.381a4.57 4.57 0 014.575 4.575v4.294z",
        fill: "#000"
      })), U || (U = E.createElement("path", {
        d: "M38.218 40.544a4.937 4.937 0 00-4.93 4.931c0 2.063 1.255 3.806 3.055 4.556v3.77a1.82 1.82 0 001.82 1.818h.093a1.82 1.82 0 001.819-1.819v-3.769a4.933 4.933 0 003.056-4.556 4.937 4.937 0 00-4.931-4.931h.018z",
        fill: "#000"
      })))
    };
    var G = n(2832)
      , L = n(2388)
      , F = n(4454);
    function B() {
      var e = E.useState((function() {
        return {
          height: window.innerHeight,
          width: window.innerWidth
        }
      }
      ))
        , t = e[0]
        , n = e[1];
      return E.useEffect((function() {
        var e = function(e) {
          n({
            height: window.innerHeight,
            width: window.innerWidth
          })
        };
        return window.addEventListener("resize", e),
        function() {
          window.removeEventListener("resize", e)
        }
      }
      ), []),
      t
    }
    var H = (0,
    G.Pi)((function(e) {
      var t = e.appMode
        , n = e.isGroupRestricted
        , p = e.onJoinClick
        , b = e.onClose
        , m = e.groupPreview
        , h = e.hasError
        , v = e.isJoinBusy
        , g = "chat.group_join"
        , y = function() {
        var e = E.useState((0,
        F.getOrientation)())
          , t = e[0]
          , n = e[1]
          , r = B();
        return E.useEffect((function() {
          n((0,
          F.getOrientation)())
        }
        ), [r]),
        t
      }()
        , w = B()
        , P = !n && !!m
        , M = t !== L.J.MobileWeb
        , _ = P && !m.isGroupFull
        , N = t === L.J.MobileWeb && P && (y === F.Orientation.Landscape || w.height < 400)
        , A = t === L.J.MobileWeb ? "lg" : "md"
        , k = h ? C().t("error_message", {
        scope: g
      }) : (null == m ? void 0 : m.isGroupFull) ? C().t("group_full_message", {
        scope: g
      }) : void 0
        , x = E.useMemo((function() {
        return P ? E.createElement(I.q, {
          size: 80,
          profileType: R.pq.Group,
          imageUrl: m.photoUrl
        }) : n ? E.createElement(D, {
          width: 80,
          height: 80
        }) : E.createElement(T, {
          width: 80,
          height: 80
        })
      }
      ), [P, n, m])
        , z = E.useMemo((function() {
        return P ? m.name : n ? C().t("restricted_group", {
          scope: g
        }) : C().t("problem_opening_link", {
          scope: g
        })
      }
      ), [P, n, m])
        , U = E.useMemo((function() {
        return P ? m.description : n ? E.createElement(E.Fragment, null, E.createElement("span", null, C().t("cant_join_restricted_group", {
          scope: g
        }))) : C().t("group_link_invalid", {
          scope: g
        })
      }
      ), [P, n, m]);
      return E.createElement("div", {
        className: r
      }, M && E.createElement(O.Fb, null, (P || n) && E.createElement("div", {
        className: i
      }, E.createElement(S.WzButton, {
        color: "secondary",
        size: "sm",
        onClick: b
      }, E.createElement("i", {
        className: j()("w-icon w-icon-x", s)
      })), P && E.createElement(S.WzH5, null, C().t("join_group_chat", {
        scope: g
      })))), E.createElement("div", {
        className: l
      }, E.createElement("div", {
        className: c
      }, x), E.createElement(S.WzH4, {
        className: u
      }, z), P && E.createElement(S.WzCaption, {
        className: f
      }, C().t("count_members", {
        scope: g,
        count: m.membersCount
      })), E.createElement(S.WzBody2, {
        className: d
      }, U)), E.createElement("div", {
        className: o
      }, k && E.createElement(S.WzAlert, {
        level: "page",
        variant: "warning",
        className: a
      }, E.createElement("span", {
        slot: "body"
      }, k)), _ && E.createElement(S.WzButton, {
        size: A,
        onClick: p,
        busy: v
      }, C().t("join_group_chat_button", {
        scope: g
      })), !N && E.createElement(S.WzButton, {
        color: "secondary",
        onClick: b,
        size: A
      }, C().t("close", {
        scope: g
      }))))
    }
    ));
    H.displayName = "GroupJoin"
  }
  ,
  9825: (e,t,n)=>{
    "use strict";
    n.d(t, {
      bD: ()=>S,
      oo: ()=>O
    });
    const r = "Dhmsf+5fUZtdPy2nhFTOqQ=="
      , i = "PM9SLssUpyuDXElOS+uCvw=="
      , o = "IrS0KIcQu9CCqQeADw8ADw=="
      , a = "jkTw6rEjARHWM1ErSraTZg=="
      , s = "nNevIWqAA4tYz4rhyf-iyg=="
      , l = "ppILasPygSCR2jYWBYFU7A=="
      , u = "giZDv+hWZxXb1VBzWv+fxQ=="
      , c = "_2ILlb7zv6GHO-wcpla+vqg==";
    var f = n(5466)
      , d = n(7766)
      , p = n(17)
      , b = n(3955)
      , m = n.n(b)
      , h = n(9983)
      , v = n(8098)
      , g = n.n(v)
      , y = n(3700)
      , w = n(966)
      , E = function() {
      return E = Object.assign || function(e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in t = arguments[n])
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e
      }
      ,
      E.apply(this, arguments)
    }
      , O = "data-member-menu"
      , S = function(e) {
      var t, n, b, v = e.membership, S = e.isCurrentUser, P = void 0 !== S && S, j = e.isActive, M = void 0 !== j && j, C = e.memberActions, I = void 0 === C ? [] : C, R = e.onToggleActionMenuClick, _ = e.onChatButtonClick, T = v.member, N = v.role, A = "chat.group_profile";
      return f.createElement("div", E({
        className: r
      }, ((t = {})[w.R] = T.identifier.id,
      t)), f.createElement("div", {
        className: i
      }, f.createElement("div", {
        className: a
      }, f.createElement("div", {
        className: s
      }, f.createElement(y.q, {
        profileType: T.type,
        size: 24,
        imageUrl: T.photoUrl
      })), f.createElement(h.WzBody2, {
        className: l
      }, P ? m().t("you", {
        scope: A
      }) : T.name)), f.createElement("div", {
        className: u
      }, !P && f.createElement("div", {
        className: g()(o, (n = {},
        n[c] = M,
        n)),
        "data-testid": "member-actions"
      }, I.length > 0 && f.createElement("div", E({}, ((b = {})[O] = "",
      b)), f.createElement(p.P, {
        actions: I,
        onMenuToggle: function() {
          return null == R ? void 0 : R(T.identifier)
        }
      })), f.createElement(h.WzButton, {
        color: "clear-icon",
        onClick: function() {
          return null == _ ? void 0 : _(T.identifier)
        }
      }, f.createElement("i", {
        className: "w-icon w-icon-chat",
        "data-testid": "member-chat-icon"
      }))), N === d.VC.Admin && f.createElement(h.WzBadge, null, m().t("admin", {
        scope: A
      })))))
    }
  }
  ,
  2661: (e,t,n)=>{
    "use strict";
    n.d(t, {
      t: ()=>J
    });
    const r = "_8fUKKDySGIA2eEQz2kaJcQ=="
      , i = "GCqDsDXaSqgPlQmRhT+inw=="
      , o = "w1cvvEPDtqSxwaEat-F3dA=="
      , a = "rApYIUGh5TJ5aNpTSbYang=="
      , s = "isQeQZ7JU3VpW32BhEk6wQ=="
      , l = "KGOeE9og7M5bWGnoEYjToQ=="
      , u = "wCwtsN1AuU2gU4VC3MVBFg=="
      , c = "mVgRZuIhPA-ywBiNtJlvtg==";
    var f = n(5466)
      , d = n(9983)
      , p = n(3955)
      , b = n.n(p)
      , m = n(7766)
      , h = n(8098)
      , v = n.n(h)
      , g = n(8368)
      , y = n(9948)
      , w = n(2832)
      , E = n(2388)
      , O = n(4049);
    const S = "kqEIwvEgdEVgOOf1yruHaQ=="
      , P = "W6ejSujnl6feiGBei0X14A=="
      , j = "TTpiuawGDJ-mWAd9mEXFWA=="
      , M = "j38DWVje7wHZ9Op96yobOQ==";
    var C = function() {
      return C = Object.assign || function(e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in t = arguments[n])
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e
      }
      ,
      C.apply(this, arguments)
    }
      , I = function(e, t) {
      var n = {};
      for (var r in e)
        Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
      if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
        var i = 0;
        for (r = Object.getOwnPropertySymbols(e); i < r.length; i++)
          t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]])
      }
      return n
    };
    const R = function(e) {
      var t = e.text
        , n = e.children
        , r = I(e, ["text", "children"]);
      return f.createElement(d.WzBasicTooltip, null, f.createElement(d.WzTooltipSource, null, f.createElement(d.WzTooltipTarget, null, n)), f.createElement(d.WzTooltipContent, C({}, r), f.createElement("span", null, t)))
    };
    var _ = n(3971)
      , T = n(155)
      , N = n(3751)
      , A = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , k = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , x = function(e) {
      var t = e.group
        , n = e.membership
        , r = e.onClose
        , i = e.onSuccess
        , o = (0,
      _.O)().report
        , a = "chat.group_profile.remove_from_group"
        , s = f.useState(!1)
        , l = s[0]
        , u = s[1]
        , c = f.useState(!1)
        , p = c[0]
        , m = c[1]
        , h = f.useState()
        , v = h[0]
        , g = h[1]
        , y = f.useCallback((function() {
        m(!0),
        n.removeMembership().then((function() {
          return A(void 0, void 0, void 0, (function() {
            return k(this, (function(e) {
              switch (e.label) {
              case 0:
                return l ? [4, t.banUser(n.member.identifier)] : [3, 2];
              case 1:
                e.sent(),
                e.label = 2;
              case 2:
                return m(!1),
                i(n.member, l),
                r(),
                [2]
              }
            }
            ))
          }
          ))
        }
        )).catch((function(e) {
          g({
            text: b().t("error", {
              scope: a
            })
          }),
          o(e, T.w.REMOVE_GROUP_MEMBER),
          m(!1)
        }
        ))
      }
      ), [l, n, t, i, r]);
      return f.createElement(f.Fragment, null, f.createElement(d.WzDialogHeader, null, b().t("remove_member", {
        scope: a,
        name: n.member.name
      })), f.createElement(d.WzDialogContent, null, f.createElement("div", null, f.createElement(d.WzBody2, {
        className: S
      }, b().t("description", {
        scope: a
      }))), f.createElement("div", {
        className: P
      }, f.createElement(d.WzToggleSwitch, {
        checked: l,
        onChange: function(e) {
          return u(e.currentTarget.checked)
        }
      }, b().t("block_from_group", {
        scope: a
      })), f.createElement(R, {
        text: b().t("cannot_rejoin", {
          scope: a
        }),
        position: "top"
      }, f.createElement("div", {
        className: j
      }, f.createElement("i", {
        className: "w-icon w-icon-help"
      }))))), f.createElement(d.WzDialogControls, null, f.createElement("div", {
        className: M
      }, f.createElement(d.WzButton, {
        color: "secondary",
        onClick: r
      }, b().t("cancel", {
        scope: a
      })), f.createElement(d.WzButton, {
        color: "primary",
        alarming: !0,
        busy: p,
        onClick: y
      }, l ? b().t("remove_and_block", {
        scope: a
      }) : b().t("remove", {
        scope: a
      })))), f.createElement(N.P, {
        message: v
      }))
    }
      , z = n(1997)
      , U = n(9825)
      , W = n(2053);
    const D = "-pHtDgyltk5XDa4QhvTqYA=="
      , G = "PtHGZmcYKGSBV5isaWwcJQ==";
    var L = function(e) {
      var t = e.membership
        , n = e.newRole
        , r = e.onClose
        , i = e.onSuccess
        , o = (0,
      _.O)().report
        , a = "chat.group_profile.update_member_role"
        , s = n === m.VC.Admin
        , l = f.useState(!1)
        , u = l[0]
        , c = l[1]
        , p = f.useState()
        , h = p[0]
        , v = p[1]
        , g = f.useCallback((function() {
        c(!0),
        t.updateRole(n).then((function() {
          c(!1),
          i(t),
          r()
        }
        )).catch((function(e) {
          v({
            text: b().t("error", {
              scope: a
            })
          }),
          o(e, T.w.UPDATE_GROUP_MEMBER_ROLE),
          c(!1)
        }
        ))
      }
      ), [t, n, i, r]);
      return f.createElement(f.Fragment, null, f.createElement(d.WzDialogHeader, null, b().t(s ? "make_user_admin" : "remove_user_as_admin", {
        scope: a,
        name: t.member.name
      })), f.createElement(d.WzDialogContent, null, f.createElement(d.WzBody2, {
        className: D
      }, b().t(s ? "make_admin_description" : "remove_as_admin_description", {
        scope: a
      }))), f.createElement(d.WzDialogControls, null, f.createElement("div", {
        className: G
      }, f.createElement(d.WzButton, {
        color: "secondary",
        onClick: r
      }, b().t("cancel", {
        scope: a
      })), f.createElement(d.WzButton, {
        color: "primary",
        alarming: !s,
        onClick: g,
        busy: u
      }, b().t(s ? "make_admin_confirm" : "remove_as_admin", {
        scope: a
      })))), f.createElement(N.P, {
        message: h
      }))
    };
    const F = "FyxA-caoyIw5UJfuMY26nQ=="
      , B = "gM69Dp3IEY56E4IQe-fdZw==";
    var H, V = function(e) {
      var t, n = e.text, r = e.maxLines, i = e.className, o = void 0 === i ? "" : i, a = "chat.collapsible_text", s = f.useRef(null), l = f.useState(!0), u = l[0], c = l[1], p = f.useState(!1), m = p[0], h = p[1];
      f.useLayoutEffect((function() {
        h(!!s.current && s.current.offsetHeight < s.current.scrollHeight)
      }
      ), [n]);
      return f.createElement("div", {
        "data-testid": "collapsible-text"
      }, f.createElement("div", {
        ref: s,
        className: v()(o, (t = {},
        t[F] = u,
        t)),
        style: u ? {
          WebkitLineClamp: r
        } : void 0
      }, n), m && f.createElement("div", null, f.createElement(d.WzBody2, {
        className: B,
        onClick: function() {
          c(!u)
        }
      }, u ? b().t("show_more", {
        scope: a
      }) : b().t("show_less", {
        scope: a
      }))))
    };
    !function(e) {
      e.ChangeDescription = "ChangeDescription",
      e.RemoveFromGroup = "RemoveFromGroup",
      e.UpdateMemberRole = "UpdateMemberRole"
    }(H || (H = {}));
    var J = (0,
    w.Pi)((function(e) {
      var t = e.conversation
        , n = e.appMode
        , p = t.destination
        , h = p.membershipStore.currentUserMembership
        , w = (0,
      z.a)()
        , S = f.useState()
        , P = S[0]
        , j = S[1]
        , M = f.useCallback((function() {
        return j(void 0)
      }
      ), [])
        , C = f.useState(null)
        , I = C[0]
        , R = C[1]
        , _ = f.useCallback((function() {
        M(),
        R(null)
      }
      ), [])
        , T = f.useState()
        , A = T[0]
        , k = T[1]
        , D = f.useState(null)
        , G = D[0]
        , F = D[1]
        , B = f.useCallback((function(e) {
        F((function(t) {
          return t === e ? null : e
        }
        ))
      }
      ), []);
      f.useEffect((function() {
        var e = function(e) {
          !!e.target.closest("[".concat(U.oo, "]")) || F(null)
        };
        return window.addEventListener("click", e),
        function() {
          return window.removeEventListener("click", e)
        }
      }
      ), []);
      var J = f.useCallback((function(e) {
        w.uiState.setSelectedGroupSubConversation(e)
      }
      ), [])
        , K = "chat.group_profile"
        , q = f.useCallback((function(e) {
        k({
          text: b().t(e.role === m.VC.Admin ? "user_is_admin_now" : "user_was_removed_as_admin", {
            scope: K,
            name: e.member.name
          })
        })
      }
      ), [])
        , Q = f.useCallback((function(e, t) {
        k({
          text: b().t(t ? "user_was_removed_and_blocked" : "user_was_removed", {
            scope: K,
            name: e.name
          })
        })
      }
      ), [])
        , Z = f.useMemo((function() {
        if (!h)
          return [];
        var e = Array.from(p.membershipStore.sortedMemberships)
          , t = e.findIndex((function(e) {
          return e.member.identifier === h.member.identifier
        }
        ));
        if (-1 !== t) {
          var n = e.splice(t, 1)[0];
          e.unshift(n)
        }
        return e
      }
      ), [p.membershipStore.sortedMemberships, h]);
      if (!h)
        return null;
      var X = function(e) {
        if (h.role !== m.VC.Admin)
          return [];
        var t = "chat.group_profile.member_actions";
        return [{
          label: b().t(e.role === m.VC.Admin ? "remove_admin" : "make_admin", {
            scope: t
          }),
          onClick: function() {
            R(e),
            j(H.UpdateMemberRole),
            F(null)
          }
        }, {
          label: b().t("remove_from_group", {
            scope: t
          }),
          onClick: function() {
            R(e),
            j(H.RemoveFromGroup),
            F(null)
          },
          danger: !0
        }]
      }
        , Y = !p.description && h.role !== m.VC.Admin;
      return f.createElement(f.Fragment, null, f.createElement("div", {
        className: r
      }, f.createElement(W.t, {
        conversation: t,
        appMode: n,
        includeBackButton: n !== E.J.MobileWeb,
        conversationView: !1
      }), f.createElement("div", {
        className: i
      }, f.createElement("div", {
        className: o
      }, f.createElement("div", {
        className: a
      }, f.createElement(d.WzOverline, null, b().t("description", {
        scope: K
      }))), f.createElement("div", null, Y ? f.createElement("div", {
        className: v()(s, l)
      }, b().t("no_description", {
        scope: K
      })) : h.role === m.VC.Admin ? f.createElement("div", {
        className: s
      }, p.description) : f.createElement(V, {
        className: s,
        text: p.description,
        maxLines: 2
      }), h.role === m.VC.Admin && f.createElement("div", null, f.createElement(d.WzBody2, {
        className: u,
        onClick: function() {
          return j(H.ChangeDescription)
        }
      }, p.description ? b().t("edit_description", {
        scope: K
      }) : b().t("add_description", {
        scope: K
      })))), f.createElement("div", {
        className: a
      }, f.createElement(d.WzOverline, null, b().t("members", {
        scope: K,
        count: Z.length
      })))), f.createElement("div", null, Z.map((function(e) {
        return f.createElement(f.Fragment, {
          key: e.member.id
        }, f.createElement(U.bD, {
          membership: e,
          isCurrentUser: e.member.identifier === h.member.identifier,
          isActive: G === e.member.identifier,
          memberActions: X(e),
          onToggleActionMenuClick: B,
          onChatButtonClick: J
        }), f.createElement("div", {
          className: c
        }))
      }
      ))))), f.createElement(g.V, {
        appMode: n,
        topOffset: y.yJ,
        onClose: M
      }, P === H.ChangeDescription ? f.createElement(O.p, {
        group: p,
        onClose: M
      }) : P === H.RemoveFromGroup ? I && f.createElement(x, {
        group: p,
        membership: I,
        onClose: _,
        onSuccess: Q
      }) : P === H.UpdateMemberRole ? I && f.createElement(L, {
        membership: I,
        newRole: I.role === m.VC.Member ? m.VC.Admin : m.VC.Member,
        onClose: _,
        onSuccess: q
      }) : null), f.createElement(N.A, {
        message: A
      }))
    }
    ));
    J.displayName = "GroupProfile"
  }
  ,
  9948: (e,t,n)=>{
    "use strict";
    n.d(t, {
      yJ: ()=>h,
      Fb: ()=>v
    });
    const r = "rdj2IA9-MnjGwEPWMpO5Bg=="
      , i = "KHlpW5zdvYLRMmhu5h3gJQ=="
      , o = "zwYMQzR16QlPFajTkAQt3g=="
      , a = "y3cVZkktw7UIgXQQmHkZ2Q=="
      , s = "cHw1xYXGIamMEFegW50mlg=="
      , l = "Uj0BN2jWorliwQjgz5+MXw=="
      , u = "a-bHoOEtx5fBDxEmMQv8ug==";
    var c = n(8098)
      , f = n.n(c)
      , d = n(5466)
      , p = n(9983)
      , b = n(1807)
      , m = n(17)
      , h = 70
      , v = function(e) {
      var t = e.underline
        , n = void 0 !== t && t
        , c = e.includeBackButton
        , v = void 0 !== c && c
        , g = e.actions
        , y = void 0 === g ? [] : g
        , w = e.children
        , E = e.onContentClick
        , O = e.onActionMenuToggle
        , S = (0,
      b.s0)();
      return d.createElement("div", {
        className: f()(r, n && i),
        style: {
          height: h
        },
        "data-testid": "head"
      }, v && d.createElement(p.WzButton, {
        className: l,
        color: "clear-icon",
        "data-testid": "go-back-button",
        onClick: function() {
          return S(-1)
        }
      }, d.createElement("i", {
        className: f()(o, "w-icon w-icon-chevron-left"),
        slot: "left-icon"
      })), d.createElement("div", {
        className: f()(a, E && s),
        onClick: E
      }, w), y.length > 0 && d.createElement("div", {
        className: u
      }, d.createElement(m.P, {
        actions: y,
        onMenuToggle: O
      })))
    }
  }
  ,
  4498: (e,t,n)=>{
    "use strict";
    n.d(t, {
      P: ()=>b
    });
    const r = "lMQOTJa7a5WCANnFYqXEYQ=="
      , i = "AvHwYHqKBVv7ODStqPePhg=="
      , o = "AaUmB5r4HGm7MfhD4kGWVQ=="
      , a = "X9ovC0ASFZ62J0x6MwDmXg=="
      , s = "gvY5WHApnpULDUL4CaqyCw=="
      , l = "y7wrhZLOScLEGnAZc46KcQ==";
    var u = n(8098)
      , c = n.n(u)
      , f = n(5466)
      , d = n(9983)
      , p = n(3700)
      , b = function(e) {
      var t = e.type
        , n = e.name
        , u = e.imageUrl
        , b = e.caption
        , m = e.muted
        , h = void 0 !== m && m;
      return f.createElement("div", {
        className: r
      }, f.createElement("div", {
        className: i
      }, f.createElement(p.q, {
        profileType: t,
        imageUrl: u
      })), f.createElement("div", {
        className: o
      }, f.createElement("div", {
        className: a
      }, h && f.createElement("i", {
        className: "w-icon w-icon-sound-off-fill",
        "data-testid": "profile-box-muted-indicator"
      }), f.createElement(d.WzH6, {
        className: l
      }, n)), b && f.createElement(d.WzCaption, {
        className: c()(s, l)
      }, b)))
    }
  }
  ,
  6182: (e,t,n)=>{
    "use strict";
    n.d(t, {
      a: ()=>l
    });
    const r = "OiMlPYzTTwvP-fGLfRjV7Q=="
      , i = "Jwhqgbe7gNDKvyRud5ehQg=="
      , o = "PIQ4JwOkE6wJWq8mQOyGzw==";
    var a = n(5466)
      , s = n(9983)
      , l = function(e) {
      var t = e.text;
      return a.createElement("div", {
        className: r,
        "data-testid": "loader-component"
      }, a.createElement(s.WzSpinner, {
        className: i
      }), (null == t ? void 0 : t.length) && a.createElement(s.WzBody2, {
        className: o
      }, t))
    }
  }
  ,
  5519: (e,t,n)=>{
    "use strict";
    n.d(t, {
      Z: ()=>N
    });
    const r = "D88ojpPYAr8ZalKwkw+DDw=="
      , i = "JRIKXln88qRxdY-lwAA56A==";
    var o = n(3955)
      , a = n.n(o)
      , s = n(5466)
      , l = n(9983)
      , u = n(2388)
      , c = n(6182)
      , f = n(6569)
      , d = n(3751);
    const p = "whXS56hxeWXWsTN0XG5Ifg=="
      , b = "_9524SaDRDtasApMhnhKvpQ=="
      , m = "FzAB8i2IVfy6TdnyKLHgAQ==";
    var h = n(3680);
    const v = "IE-Xcj-gM5BQlj2B-CDfLA=="
      , g = "g+foTl3BDLRTkbKe3CtpEA=="
      , y = "Wx7UwdVgxAwx33j8GGJ4hg=="
      , w = "RdjuBAdVMylSF1J5F3qKnw==";
    var E = function(e) {
      var t = e.title
        , n = e.description
        , r = e.value
        , i = e.onChange
        , o = e.editable
        , a = void 0 === o || o;
      return s.createElement("div", {
        className: v
      }, s.createElement("div", null, s.createElement(l.WzBody2, {
        className: g
      }, t), n && s.createElement(l.WzCaption, {
        className: y
      }, n)), s.createElement("div", {
        className: w
      }, a && s.createElement(l.WzToggleSwitch, {
        checked: r,
        onChange: function(e) {
          return i(e.currentTarget.checked)
        }
      })))
    };
    const O = "JmbaApkL3so9SwpuaDJ3Ew==";
    var S, P = function(e) {
      var t = e.title;
      return s.createElement(l.WzSubhead4, {
        className: O
      }, t)
    }, j = function(e, t) {
      return 1 === t ? s.createElement(l.WzA, {
        key: t,
        href: "https://support.google.com/waze/answer/6268711?hl=".concat(a().locale),
        target: "_blank",
        rel: "noreferrer",
        withIcon: !1
      }, e) : ""
    }, M = function(e, t) {
      return 0 === t ? s.createElement(l.WzA, {
        key: t,
        href: "waze://?a=accountsettings"
      }, e) : ""
    }, C = function(e) {
      var t = e.appMode
        , n = e.settings
        , r = e.onSaveFailure
        , i = "chat.settings"
        , o = t === u.J.MobileWeb ? M : j
        , c = s.useState(!1)
        , f = c[0]
        , d = c[1]
        , v = s.useCallback((function() {
        d(!0),
        n.saveDefaultSettings().catch(r).finally((function() {
          return d(!1)
        }
        ))
      }
      ), [n, r]);
      return s.useEffect((function() {
        return n.startAutoSave(r),
        function() {
          return n.stopAutoSave()
        }
      }
      ), [r]),
      s.createElement("div", null, s.createElement("div", {
        className: p
      }, s.createElement(P, {
        title: a().translate("account.title", {
          scope: i
        })
      }), s.createElement("div", {
        className: b
      }, !f && n.hasMissingSettings && s.createElement(l.WzButton, {
        color: "text",
        onClick: v
      }, a().t("account.set_defaults", {
        scope: i
      })), f && s.createElement(l.WzSpinner, {
        className: m
      }))), !n.hasMissingSettings && s.createElement(s.Fragment, null, s.createElement(E, {
        title: a().t("account.show_name.title", {
          scope: i
        }),
        description: s.createElement(h.N6, {
          text: a().t("account.show_name.description", {
            scope: i
          }),
          component: o
        }),
        value: n.showProfileFullName,
        onChange: n.setShowProfileFullName
      }), s.createElement(E, {
        title: a().t("account.show_picture.title", {
          scope: i
        }),
        description: s.createElement(h.N6, {
          text: a().t("account.show_picture.description", {
            scope: i
          }),
          component: o
        }),
        value: n.showProfileImage,
        onChange: n.setShowProfileImage
      })))
    }, I = n(9948), R = n(9664), _ = n(155), T = n(3971);
    !function(e) {
      e[e.Loading = 0] = "Loading",
      e[e.Ready = 1] = "Ready",
      e[e.Failure = 2] = "Failure"
    }(S || (S = {}));
    var N = function(e) {
      var t = e.settings
        , n = e.appMode
        , o = (0,
      T.O)().report
        , p = "chat.settings"
        , b = s.useState(S.Loading)
        , m = b[0]
        , h = b[1]
        , v = s.useState()
        , g = v[0]
        , y = v[1]
        , w = s.useCallback((function() {
        h(S.Loading),
        t.loadFromServer().then((function() {
          h(S.Ready)
        }
        )).catch((function(e) {
          o(e, _.w.LOAD_SETTINGS_FROM_SERVER),
          h(S.Failure)
        }
        ))
      }
      ), [t])
        , E = s.useCallback((function(e) {
        o(e, _.w.SAVE_SETTINGS),
        y({
          text: a().t("save_failure", {
            scope: p
          })
        })
      }
      ), []);
      return s.useEffect(w, []),
      s.createElement("div", {
        className: r
      }, n === u.J.MobileWeb ? s.createElement(R.v, null, s.createElement(l.WzOverline, null, a().translate("title", {
        scope: p
      }))) : s.createElement(I.Fb, {
        includeBackButton: !0,
        underline: !0
      }, s.createElement(l.WzH5, null, a().translate("title", {
        scope: p
      }))), m === S.Loading && s.createElement(c.a, {
        text: a().t("loading", {
          scope: p
        })
      }), m === S.Failure && s.createElement(f.t, {
        text: a().t("load_failure", {
          scope: p
        }),
        onActionClick: w
      }), m === S.Ready && s.createElement(C, {
        settings: t,
        appMode: n,
        onSaveFailure: E
      }), s.createElement(d.A, {
        className: i,
        message: g
      }))
    }
  }
  ,
  3751: (e,t,n)=>{
    "use strict";
    n.d(t, {
      P: ()=>f,
      A: ()=>u
    });
    const r = "_9iflfOSCz3avScmwjeHbSQ==";
    var i = n(9983)
      , o = n(8098)
      , a = n.n(o)
      , s = n(5466)
      , l = n(6924)
      , u = function(e) {
      var t, n = e.className, o = e.message, u = s.useRef(null);
      return s.useEffect((function() {
        var e;
        if (o)
          return null === (e = u.current) || void 0 === e || e.showSnackbar().catch(l.t.info),
          function() {
            var e;
            null === (e = u.current) || void 0 === e || e.hideSnackbar().catch(l.t.info)
          }
      }
      ), [o]),
      s.createElement(i.WzSnackbar, {
        ref: u,
        className: a()(r, n)
      }, null !== (t = null == o ? void 0 : o.text) && void 0 !== t ? t : "")
    };
    const c = "mRK4Gl-Kz5xX4m2D9syr-w==";
    var f = function(e) {
      var t = e.message;
      return s.createElement(u, {
        className: c,
        message: t
      })
    }
  }
  ,
  9664: (e,t,n)=>{
    "use strict";
    n.d(t, {
      v: ()=>o
    });
    const r = "_25S8YtaNia+Wp7AcowisLg==";
    var i = n(5466)
      , o = function(e) {
      var t = e.children;
      return i.createElement("div", {
        className: r
      }, t)
    }
  }
  ,
  7821: (e,t,n)=>{
    "use strict";
    n.d(t, {
      T7: ()=>o,
      Tz: ()=>s,
      _I: ()=>l,
      aQ: ()=>i,
      yR: ()=>a
    });
    var r = n(7766)
      , i = 50
      , o = 50
      , a = 100
      , s = 900 != n.j ? ["--primary_variant", "--alarming_variant", "--safe_variant", "--cautious_variant", "--promotion_variant", "--content_p1"] : null
      , l = [r.rJ.Sent, r.rJ.Received, r.rJ.Read]
  }
  ,
  5951: (e,t,n)=>{
    "use strict";
    n.d(t, {
      b: ()=>a,
      i: ()=>o
    });
    var r = n(5466)
      , i = r.createContext(void 0)
      , o = function(e) {
      var t = e.children
        , n = e.webEvents;
      return r.createElement(i.Provider, {
        value: {
          webEvents: n
        }
      }, t)
    }
      , a = function() {
      var e = r.useContext(i);
      if (null == e)
        throw new Error("AppContext must be initialized!");
      return e
    }
  }
  ,
  3971: (e,t,n)=>{
    "use strict";
    n.d(t, {
      O: ()=>a,
      u: ()=>o
    });
    var r = n(5466)
      , i = r.createContext(void 0)
      , o = function(e) {
      var t = e.children
        , n = e.chatErrorReporter;
      return r.createElement(i.Provider, {
        value: {
          chatErrorReporter: n
        }
      }, t)
    };
    function a() {
      var e = r.useContext(i);
      if (null == e)
        throw new Error("ErrorReporterContext must be initialized!");
      return {
        errorReporter: e.chatErrorReporter,
        report: e.chatErrorReporter.report
      }
    }
  }
  ,
  1997: (e,t,n)=>{
    "use strict";
    n.d(t, {
      L: ()=>o,
      a: ()=>a
    });
    var r = n(5466)
      , i = r.createContext(void 0)
      , o = function(e) {
      var t = e.children
        , n = e.chatStore;
      return r.createElement(i.Provider, {
        value: {
          chatStore: n
        }
      }, t)
    }
      , a = function() {
      var e = r.useContext(i);
      if (null == e)
        throw new Error("ChatStoreContext must be initialized!");
      return e.chatStore
    }
  }
  ,
  8570: (e,t,n)=>{
    "use strict";
    n.d(t, {
      T: ()=>o,
      g: ()=>a
    });
    var r = n(5466)
      , i = r.createContext(void 0)
      , o = function(e) {
      var t = e.children
        , n = e.value;
      return r.createElement(i.Provider, {
        value: n
      }, t)
    };
    function a() {
      var e = r.useContext(i);
      if (void 0 === e)
        throw new Error("FeatureFlagsContext must be initialized!");
      return e
    }
  }
  ,
  6755: (e,t,n)=>{
    "use strict";
    n.d(t, {
      ri: ()=>W
    });
    var r = n(2885)
      , i = n(7766)
      , o = n(5138)
      , a = n(3584)
      , s = n(1169)
      , l = n(3298)
      , u = n(4144)
      , c = n(6677)
      , f = n(2338)
      , d = n(8819)
      , p = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , b = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , m = function(e, t, n) {
      var r = this;
      Object.defineProperty(this, "wmpClient", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: e
      }),
      Object.defineProperty(this, "profileStore", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: t
      }),
      Object.defineProperty(this, "destination", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: n
      }),
      Object.defineProperty(this, "sendMessageQueue", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: new f.c
      }),
      Object.defineProperty(this, "sendReceivedReceiptBatch", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: new c.E((function(e) {
          return r.sendReceiptBatchFn(i.p1.Received, e)
        }
        ),{
          delayMs: 1e3,
          batchSize: 100
        })
      }),
      Object.defineProperty(this, "sendReadReceiptBatch", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: new c.E((function(e) {
          return r.sendReceiptBatchFn(i.p1.Read, e)
        }
        ),{
          delayMs: 500,
          batchSize: 100
        })
      }),
      Object.defineProperty(this, "sendMessage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return p(r, void 0, void 0, (function() {
            var t = this;
            return b(this, (function(n) {
              switch (n.label) {
              case 0:
                return [4, this.sendMessageQueue.push((function() {
                  return t.wmpClient.sendUserMessage(e.toWmpModel({
                    addAnnotations: !1
                  }))
                }
                ))];
              case 1:
                return n.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(this, "sendReceivedReceipt", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function() {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          return p(r, void 0, void 0, (function() {
            var t;
            return b(this, (function(n) {
              switch (n.label) {
              case 0:
                return [4, (t = this.sendReceivedReceiptBatch).push.apply(t, e)];
              case 1:
                return n.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(this, "sendReadReceipt", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function() {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          return p(r, void 0, void 0, (function() {
            var t;
            return b(this, (function(n) {
              switch (n.label) {
              case 0:
                return [4, (t = this.sendReadReceiptBatch).push.apply(t, e)];
              case 1:
                return n.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(this, "sendReceiptBatchFn", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          return p(r, void 0, void 0, (function() {
            var n, r;
            return b(this, (function(i) {
              switch (i.label) {
              case 0:
                return n = (new a.MessageReceipt).setType(d.fu[e]).setReceiptInfoList(t.reduce((function(e, t) {
                  return e.concat(t.args)
                }
                ), []).map((function(e) {
                  return (new a.MessageReceipt.ReceiptInfo).setMessageId(e)
                }
                ))),
                r = (new a.Message).setId((0,
                u.Z)()).setTimestamp(Date.now()).setSenderId((0,
                d.cJ)(this.profileStore.currentUser.identifier)).setDestinationId((0,
                d.cJ)(this.destination)).setType(a.Message.Type.RECEIPT).setReceipt(n),
                [4, this.wmpClient.sendReceiptMessage(r)];
              case 1:
                return i.sent(),
                t.forEach((function(e) {
                  return e.resolve()
                }
                )),
                [2]
              }
            }
            ))
          }
          ))
        }
      })
    }
      , h = n(449)
      , v = n(1529)
      , g = function(e, t, n) {
      if (n || 2 === arguments.length)
        for (var r, i = 0, o = t.length; i < o; i++)
          !r && i in t || (r || (r = Array.prototype.slice.call(t, 0, i)),
          r[i] = t[i]);
      return e.concat(r || Array.prototype.slice.call(t))
    }
      , y = function(e, t) {
      return e.timestamp - t.timestamp
    }
      , w = function() {
      function e(e) {
        var t = this;
        Object.defineProperty(this, "conversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "messagesMap", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new Map
        }),
        Object.defineProperty(this, "clear", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.messagesMap.clear()
          }
        }),
        Object.defineProperty(this, "toWmpMessageList", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return t.messages.map((function(e) {
              return e.toWmpModel()
            }
            ))
          }
        }),
        Object.defineProperty(this, "setFromWmpMessageList", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            e.forEach((function(e) {
              (0,
              d.tb)(e) || ((0,
              d.Ew)(e) ? t.findOrCreateSystemMessage(e.getId()) : t.findOrCreateUserMessage(e.getId())).setFromWmpModel(e)
            }
            ))
          }
        }),
        Object.defineProperty(this, "setMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t.messagesMap.set(e.id, e)
          }
        }),
        Object.defineProperty(this, "findMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return t.messagesMap.get(e)
          }
        }),
        Object.defineProperty(this, "importOrCreateUserMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var n = void 0 !== e && t.conversation.findUserMessage(e) || new h.XZ(t.conversation,e);
            return t.setMessage(n),
            n
          }
        }),
        Object.defineProperty(this, "findUserMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var n = t.findMessage(e);
            if (n && !(n instanceof h.XZ))
              throw new Error("MessageStore.findUserMessage: a message ".concat(e, " of different type already exists"));
            return n
          }
        }),
        Object.defineProperty(this, "findOrCreateUserMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var n;
            return null !== (n = t.findUserMessage(e)) && void 0 !== n ? n : t.importOrCreateUserMessage(e)
          }
        }),
        Object.defineProperty(this, "importOrCreateSystemMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var n = void 0 !== e && t.conversation.findSystemMessage(e) || new v.j(t.conversation,e);
            return t.setMessage(n),
            n
          }
        }),
        Object.defineProperty(this, "findSystemMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var n = t.findMessage(e);
            if (n && !(n instanceof v.j))
              throw new Error("MessageStore.findSystemMessage: a message ".concat(e, " of different type already exists"));
            return n
          }
        }),
        Object.defineProperty(this, "findOrCreateSystemMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var n;
            return null !== (n = t.findSystemMessage(e)) && void 0 !== n ? n : t.importOrCreateSystemMessage(e)
          }
        }),
        (0,
        r.ky)(this)
      }
      return Object.defineProperty(e.prototype, "messagesNumber", {
        get: function() {
          return this.messagesMap.size
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "messages", {
        get: function() {
          return Array.from(this.messagesMap.values())
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "sortedMessages", {
        get: function() {
          return g([], this.messages, !0).sort(y)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "userMessages", {
        get: function() {
          return this.messages.filter((function(e) {
            return e instanceof h.XZ
          }
          ))
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "sortedUserMessages", {
        get: function() {
          return g([], this.userMessages, !0).sort(y)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "unreadMessages", {
        get: function() {
          return this.userMessages.filter((function(e) {
            return e.isIncoming && e.isUnread
          }
          ))
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "sortedUnreadMessages", {
        get: function() {
          return g([], this.unreadMessages, !0).sort(y)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "unreadMessagesNumber", {
        get: function() {
          return this.unreadMessages.length
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "firstUnreadMessage", {
        get: function() {
          if (this.sortedUnreadMessages.length > 0)
            return this.sortedUnreadMessages[0]
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "lastMessage", {
        get: function() {
          if (this.sortedMessages.length > 0)
            return this.sortedMessages[this.sortedMessages.length - 1]
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "earliestMessageTimestamp", {
        get: function() {
          if (this.sortedMessages.length > 0)
            return this.sortedMessages[0].timestamp
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "latestMessageTimestamp", {
        get: function() {
          var e;
          return null === (e = this.lastMessage) || void 0 === e ? void 0 : e.timestamp
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }()
      , E = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , O = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , S = function(e, t, n) {
      var r, i, a = this;
      Object.defineProperty(this, "wmpClient", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: e
      }),
      Object.defineProperty(this, "messageStore", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: t
      }),
      Object.defineProperty(this, "orderBy", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: n
      }),
      Object.defineProperty(this, "fullyLoaded", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: !1
      }),
      Object.defineProperty(this, "setFullyLoaded", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          a.fullyLoaded = e
        }
      }),
      Object.defineProperty(this, "loadNextPage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: (r = function(e) {
          return E(a, void 0, void 0, (function() {
            var t;
            return O(this, (function(n) {
              switch (n.label) {
              case 0:
                return this.fullyLoaded ? [2] : [4, this.wmpClient.getMessageHistory(this.messageStore.conversation.destination.identifier, {
                  orderBy: this.orderBy,
                  fromTimestamp: this.orderBy === o.WmpListMessagesRequest.OrderBy.CREATE_TIMESTAMP_ASC ? this.messageStore.latestMessageTimestamp : void 0,
                  untilTimestamp: this.orderBy === o.WmpListMessagesRequest.OrderBy.CREATE_TIMESTAMP_DESC ? this.messageStore.earliestMessageTimestamp : void 0,
                  pageSize: e
                })];
              case 1:
                return t = n.sent(),
                this.setFullyLoaded(t.fullyLoaded),
                this.messageStore.setFromWmpMessageList(t.messages),
                [2]
              }
            }
            ))
          }
          ))
        }
        ,
        function() {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          return i || (i = r.apply(void 0, e).finally((function() {
            i = void 0
          }
          ))),
          i
        }
        )
      })
    }
      , P = n(4295)
      , j = n(3682)
      , M = "".concat(j.C.staticAssetsUri, "/media/notification.mp3")
      , C = new Audio(M)
      , I = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , R = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , _ = function(e, t) {
      var n = this;
      Object.defineProperty(this, "wmpClient", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: e
      }),
      Object.defineProperty(this, "conversation", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: t
      }),
      Object.defineProperty(this, "messageStore", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: new w(this.conversation)
      }),
      Object.defineProperty(this, "historyService", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: new S(this.wmpClient,this.messageStore,o.WmpListMessagesRequest.OrderBy.CREATE_TIMESTAMP_DESC)
      }),
      Object.defineProperty(this, "applyWmpMessage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          if ((0,
          d.Ew)(e))
            n.applyWmpSystemMessage(e);
          else {
            var t = e.getType();
            t === a.Message.Type.CONTENT ? n.applyWmpContentMessage(e) : t === a.Message.Type.RECEIPT ? n.applyWmpReceiptMessage(e) : t === a.Message.Type.DELETE && n.applyWmpDeleteMessage()
          }
        }
      }),
      Object.defineProperty(this, "applyWmpContentMessage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = n.messageStore.findOrCreateUserMessage(e.getId());
          t.setFromWmpModel(e),
          n.messageStore.userMessages.filter((function(e) {
            return e.isOutgoing && e.isPending
          }
          )).forEach((function(e, n) {
            return e.setTimestamp(t.timestamp + (n + 1))
          }
          )),
          !t.isRead && t.isIncoming && (n.conversation.muted || document.hasFocus() || C.play(),
          n.conversation.increaseUnreadMessagesAbsoluteNumber())
        }
      }),
      Object.defineProperty(this, "applyWmpReceiptMessage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = n.conversation.conversationStore.profileStore.currentUser.identifier
            , r = P.W.fromWmpIdentifier((0,
          s.N)(e.getSenderId(), "Conversation.applyWmpReceiptMessage: no sender found"))
            , o = (0,
          s.N)(e.getReceipt(), "Conversation.applyWmpReceiptMessage: no receipt message found")
            , a = (0,
          s.N)(d.mW[o.getType()], "Conversation.applyWmpReceiptMessage: unsupported receipt type ".concat(o.getType()));
          o.getReceiptInfoList().forEach((function(e) {
            var i = n.conversation.findUserMessage(e.getMessageId());
            i && (i.isOutgoing && r !== t || i.isIncoming && r === t) && i.safeChangeStatus(a)
          }
          )),
          a === i.rJ.Read && r === t && n.conversation.decreaseUnreadMessagesAbsoluteNumber(o.getReceiptInfoList().length)
        }
      }),
      Object.defineProperty(this, "applyWmpDeleteMessage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function() {
          n.messageStore.clear(),
          n.historyService.setFullyLoaded(!0)
        }
      }),
      Object.defineProperty(this, "applyWmpSystemMessage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          (0,
          d.tb)(e) || n.messageStore.findOrCreateSystemMessage(e.getId()).setFromWmpModel(e)
        }
      }),
      Object.defineProperty(this, "loadPrevHistoryPage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function() {
          return I(n, void 0, void 0, (function() {
            return R(this, (function(e) {
              switch (e.label) {
              case 0:
                return [4, this.historyService.loadNextPage()];
              case 1:
                return e.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(this, "loadNextHistoryPage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function() {
          return I(n, void 0, void 0, (function() {
            return R(this, (function(e) {
              return [2]
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(this, "initHistory", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function() {
          return I(n, void 0, void 0, (function() {
            return R(this, (function(e) {
              switch (e.label) {
              case 0:
                return 1 !== this.messageStore.messagesNumber ? [3, 2] : [4, this.loadPrevHistoryPage()];
              case 1:
                e.sent(),
                e.label = 2;
              case 2:
                return [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(this, "clear", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function() {
          n.messageStore.clear(),
          n.historyService.setFullyLoaded(!1)
        }
      })
    }
      , T = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , N = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , A = function(e, t) {
      var n = this;
      Object.defineProperty(this, "wmpClient", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: e
      }),
      Object.defineProperty(this, "conversation", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: t
      }),
      Object.defineProperty(this, "messageStore", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: new w(this.conversation)
      }),
      Object.defineProperty(this, "prevHistoryService", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: new S(this.wmpClient,this.messageStore,o.WmpListMessagesRequest.OrderBy.CREATE_TIMESTAMP_DESC)
      }),
      Object.defineProperty(this, "nextHistoryService", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: new S(this.wmpClient,this.messageStore,o.WmpListMessagesRequest.OrderBy.CREATE_TIMESTAMP_ASC)
      }),
      Object.defineProperty(this, "loadPrevHistoryPage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function() {
          return T(n, void 0, void 0, (function() {
            return N(this, (function(e) {
              switch (e.label) {
              case 0:
                return [4, this.prevHistoryService.loadNextPage()];
              case 1:
                return e.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(this, "loadNextHistoryPage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function() {
          return T(n, void 0, void 0, (function() {
            return N(this, (function(e) {
              switch (e.label) {
              case 0:
                return [4, this.nextHistoryService.loadNextPage()];
              case 1:
                return e.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(this, "initHistory", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function() {
          return T(n, void 0, void 0, (function() {
            return N(this, (function(e) {
              switch (e.label) {
              case 0:
                return 1 !== this.messageStore.messagesNumber ? [3, 2] : [4, Promise.all([this.loadPrevHistoryPage(), this.loadNextHistoryPage()])];
              case 1:
                e.sent(),
                e.label = 2;
              case 2:
                return [2]
              }
            }
            ))
          }
          ))
        }
      })
    }
      , k = n(155)
      , x = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , z = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , U = function(e, t, n) {
      if (n || 2 === arguments.length)
        for (var r, i = 0, o = t.length; i < o; i++)
          !r && i in t || (r || (r = Array.prototype.slice.call(t, 0, i)),
          r[i] = t[i]);
      return e.concat(r || Array.prototype.slice.call(t))
    }
      , W = function() {
      function e(e, t) {
        var n = this;
        Object.defineProperty(this, "conversationStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "destinationIdentifier", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "messageService", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new m(this.conversationStore.wmpClient,this.conversationStore.profileStore,this.destination.identifier)
        }),
        Object.defineProperty(this, "streamStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new _(this.conversationStore.wmpClient,this)
        }),
        Object.defineProperty(this, "unreadStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new A(this.conversationStore.wmpClient,this)
        }),
        Object.defineProperty(this, "_draftText", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: ""
        }),
        Object.defineProperty(this, "_blocked", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: !1
        }),
        Object.defineProperty(this, "_muted", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: !1
        }),
        Object.defineProperty(this, "_sortTimestamp", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: 0
        }),
        Object.defineProperty(this, "_unreadMessagesAbsoluteNumber", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: 0
        }),
        Object.defineProperty(this, "_nextContentMessageContext", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "sortTimestampReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new l.S((function() {
            return n.createSortTimestampReaction()
          }
          ))
        }),
        Object.defineProperty(this, "receivedReceiptReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new l.S((function() {
            return n.createReceivedReceiptReaction()
          }
          ))
        }),
        Object.defineProperty(this, "profileInfoReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new l.S((function() {
            return n.createProfileInfoReaction()
          }
          ))
        }),
        Object.defineProperty(this, "bootstrap", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            n.sortTimestampReaction.init(),
            n.receivedReceiptReaction.init(),
            n.profileInfoReaction.init()
          }
        }),
        Object.defineProperty(this, "dispose", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            n.sortTimestampReaction.dispose(),
            n.receivedReceiptReaction.dispose(),
            n.profileInfoReaction.dispose()
          }
        }),
        Object.defineProperty(this, "setDraftText", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n._draftText = e
          }
        }),
        Object.defineProperty(this, "setUnreadMessagesAbsoluteNumber", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            e >= 0 ? n._unreadMessagesAbsoluteNumber = e : (n._unreadMessagesAbsoluteNumber = 0,
            n.conversationStore.report("Attempt to set ".concat(e, " as 'unreadMessagesAbsoluteNumber'"), k.w.UNREAD_MESSAGES_ABSOLUTE_NUMBER))
          }
        }),
        Object.defineProperty(this, "increaseUnreadMessagesAbsoluteNumber", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            void 0 === e && (e = 1),
            n.setUnreadMessagesAbsoluteNumber(n.unreadMessagesAbsoluteNumber + e)
          }
        }),
        Object.defineProperty(this, "decreaseUnreadMessagesAbsoluteNumber", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            void 0 === e && (e = 1),
            n.setUnreadMessagesAbsoluteNumber(n.unreadMessagesAbsoluteNumber - e)
          }
        }),
        Object.defineProperty(this, "findUserMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t;
            return null !== (t = n.streamStore.messageStore.findUserMessage(e)) && void 0 !== t ? t : n.unreadStore.messageStore.findUserMessage(e)
          }
        }),
        Object.defineProperty(this, "findSystemMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t;
            return null !== (t = n.streamStore.messageStore.findSystemMessage(e)) && void 0 !== t ? t : n.unreadStore.messageStore.findSystemMessage(e)
          }
        }),
        Object.defineProperty(this, "toWmpConversationItem", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            var e, t;
            return (new o.ConversationItem).setDestinationId(n.destination.identifier.toWmpIdentifier()).setDestinationProfile(n.destination.toWmpProfileInfo()).setBlocked(n.blocked).setMuted(n.muted).setSortTimestampMs(n.sortTimestamp).setEarliestUnreadMessage(null === (e = n.streamStore.messageStore.firstUnreadMessage) || void 0 === e ? void 0 : e.toWmpModel()).setLastMessage(null === (t = n.streamStore.messageStore.lastMessage) || void 0 === t ? void 0 : t.toWmpModel()).setUnreadMessagesCount(n.unreadMessagesAbsoluteNumber)
          }
        }),
        Object.defineProperty(this, "setFromWmpConversationItem", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.setBlocked(e.getBlocked()),
            n.setMuted(e.getMuted()),
            n.setSortTimestamp(e.getSortTimestampMs()),
            n.setUnreadMessagesAbsoluteNumber(e.getUnreadMessagesCount()),
            n.destination.setFromWmpProfileInfo((0,
            s.N)(e.getDestinationProfile(), "Conversation.setFromWmpConversationItem: no destination profile found"));
            var t = e.getLastMessage()
              , r = e.getEarliestUnreadMessage();
            void 0 !== t && n.streamStore.messageStore.setFromWmpMessageList([t]),
            void 0 !== r && r.getId() !== (null == t ? void 0 : t.getId()) && n.unreadStore.messageStore.setFromWmpMessageList([r])
          }
        }),
        Object.defineProperty(this, "applyWmpMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t, r = e.getType();
            if (r === a.Message.Type.ACTION) {
              var i = e.getAction();
              (null == i ? void 0 : i.getType()) === a.Action.Type.BLOCK && n.applyWmpBlockAction(i),
              (null == i ? void 0 : i.getType()) === a.Action.Type.MUTE && n.applyWmpMuteAction(i)
            } else {
              if (r === a.Message.Type.GROUP_UPDATE && n.isGroup()) {
                var o = e.getGroupUpdate();
                o && (n.destination.setFromWmpGroupUpdate(o),
                n.messages.length > 0 && o.getPayloadCase() === a.GroupUpdate.PayloadCase.MEMBERS_ADDED && (null === (t = o.getMembersAdded()) || void 0 === t ? void 0 : t.getMembersList().some((function(e) {
                  return n.conversationStore.profileStore.currentUser.identifier.equalsTo((0,
                  d.E_)(e))
                }
                ))) && (n.streamStore.clear(),
                n.destination.loadInfo()))
              }
              n.streamStore.applyWmpMessage(e)
            }
          }
        }),
        Object.defineProperty(this, "applyWmpBlockAction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t = (0,
            s.N)(e.getBlock(), "Conversation.applyWmpBlockAction: no block found");
            n.setBlocked(t.getBlock())
          }
        }),
        Object.defineProperty(this, "applyWmpMuteAction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t = (0,
            s.N)(e.getMute(), "Conversation.applyWmpMuteAction: no mute found");
            n.setMuted(t.getMute())
          }
        }),
        Object.defineProperty(this, "setNextContentMessageContext", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n._nextContentMessageContext = e
          }
        }),
        Object.defineProperty(this, "sendTextMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return x(n, void 0, void 0, (function() {
              var t, n;
              return z(this, (function(r) {
                switch (r.label) {
                case 0:
                  return (t = this.streamStore.messageStore.importOrCreateUserMessage()).setText(e),
                  (n = !!this.nextContentMessageContext) && t.setContext(this.nextContentMessageContext),
                  [4, t.send()];
                case 1:
                  return r.sent(),
                  n && this.setNextContentMessageContext(void 0),
                  [2, t]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "markAllAsRead", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return x(n, void 0, void 0, (function() {
              return z(this, (function(e) {
                switch (e.label) {
                case 0:
                  return this.unreadMessages.forEach((function(e) {
                    e.safeChangeStatus(i.rJ.Read)
                  }
                  )),
                  [4, this.conversationStore.wmpClient.markConversationAsRead(this.destination.identifier)];
                case 1:
                  return e.sent(),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "createSortTimestampReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return (0,
            r.U5)((function() {
              return n.streamStore.messageStore.latestMessageTimestamp
            }
            ), (function(e) {
              e && n.sortTimestamp < e && n.setSortTimestamp(e)
            }
            ), {
              fireImmediately: !0
            })
          }
        }),
        Object.defineProperty(this, "createReceivedReceiptReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return (0,
            r.U5)((function() {
              return n.userMessages.filter((function(e) {
                return e.direction === i.Tk.Incoming && e.status === i.rJ.Sent
              }
              ))
            }
            ), (function(e) {
              e.forEach((function(e) {
                return e.safeSendReceivedReceipt()
              }
              ))
            }
            ), {
              equals: r.p6.shallow,
              fireImmediately: !0
            })
          }
        }),
        Object.defineProperty(this, "createProfileInfoReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return (0,
            r.EH)((function() {
              !n.destination.name && n.messages.some((function(e) {
                return e instanceof v.j || e instanceof h.XZ && e.status >= i.rJ.Sent
              }
              )) && n.destination.loadInfo()
            }
            ))
          }
        }),
        (0,
        r.ky)(this)
      }
      return Object.defineProperty(e.prototype, "destination", {
        get: function() {
          return this.conversationStore.profileStore.findOrCreateProfile(this.destinationIdentifier)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "messages", {
        get: function() {
          return Array.from(new Set(U(U([], this.streamStore.messageStore.messages, !0), this.unreadStore.messageStore.messages, !0)))
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "userMessages", {
        get: function() {
          return Array.from(new Set(U(U([], this.streamStore.messageStore.userMessages, !0), this.unreadStore.messageStore.userMessages, !0)))
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "unreadMessages", {
        get: function() {
          return this.userMessages.filter((function(e) {
            return e.isIncoming && e.isUnread
          }
          ))
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "unreadMessagesNumber", {
        get: function() {
          return this.unreadMessages.length
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "draftText", {
        get: function() {
          return this._draftText
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "blocked", {
        get: function() {
          return this._blocked
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "muted", {
        get: function() {
          return this._muted
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "sortTimestamp", {
        get: function() {
          return this._sortTimestamp
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "unreadMessagesAbsoluteNumber", {
        get: function() {
          return this._unreadMessagesAbsoluteNumber
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "isGroup", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return this.destination.identifier.type === i.pq.Group
        }
      }),
      Object.defineProperty(e.prototype, "setBlocked", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this._blocked = e
        }
      }),
      Object.defineProperty(e.prototype, "setMuted", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this._muted = e
        }
      }),
      Object.defineProperty(e.prototype, "setSortTimestamp", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this._sortTimestamp = e
        }
      }),
      Object.defineProperty(e.prototype, "clear", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return x(this, void 0, void 0, (function() {
            return z(this, (function(e) {
              switch (e.label) {
              case 0:
                return [4, this.conversationStore.wmpClient.sendDeleteMessage(this.destination.identifier)];
              case 1:
                return e.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "block", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return x(this, void 0, void 0, (function() {
            return z(this, (function(t) {
              switch (t.label) {
              case 0:
                return [4, this.conversationStore.wmpClient.sendBlockMessage(this.destination.identifier, e)];
              case 1:
                return t.sent(),
                this.setBlocked(e),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "mute", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return x(this, void 0, void 0, (function() {
            return z(this, (function(t) {
              switch (t.label) {
              case 0:
                return [4, this.conversationStore.wmpClient.muteConversation(this.destination.identifier, e)];
              case 1:
                return t.sent(),
                this.setMuted(e),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "nextContentMessageContext", {
        get: function() {
          return this._nextContentMessageContext
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }()
  }
  ,
  449: (e,t,n)=>{
    "use strict";
    n.d(t, {
      XZ: ()=>y
    });
    var r, i, o = n(3584), a = n(4144), s = n(2885), l = n(3562), u = n.n(l), c = n(7766), f = n(6924), d = n(4295), p = n(1169), b = n(155), m = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }, h = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }, v = Object.freeze(((r = {})[o.MessageAnnotation.Type.RECEIVED] = c.rJ.Received,
    r[o.MessageAnnotation.Type.READ] = c.rJ.Read,
    r[o.MessageAnnotation.Type.UNKNOWN] = void 0,
    r)), g = Object.freeze(((i = {})[c.rJ.Received] = o.MessageAnnotation.Type.RECEIVED,
    i[c.rJ.Read] = o.MessageAnnotation.Type.READ,
    i[c.rJ.New] = void 0,
    i[c.rJ.Pending] = void 0,
    i[c.rJ.Sent] = void 0,
    i[c.rJ.SendingFailed] = void 0,
    i)), y = function() {
      function e(e, t) {
        void 0 === t && (t = (0,
        a.Z)());
        var n = this;
        Object.defineProperty(this, "conversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "id", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "timestamp", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: Date.now()
        }),
        Object.defineProperty(this, "text", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: ""
        }),
        Object.defineProperty(this, "status", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: c.rJ.New
        }),
        Object.defineProperty(this, "context", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "senderIdentifier", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: this.conversation.conversationStore.profileStore.currentUser.identifier
        }),
        Object.defineProperty(this, "toJson", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return {
              id: n.id,
              timestamp: n.timestamp,
              sender: n.sender.identifier.toJson(),
              text: n.text,
              status: n.status
            }
          }
        }),
        Object.defineProperty(this, "setFromJson", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.setTimestamp(e.timestamp),
            n.setSender(e.sender),
            n.setText(e.text),
            n.safeChangeStatus(e.status)
          }
        }),
        Object.defineProperty(this, "toWmpModel", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t, r = (void 0 === e ? {} : e).addAnnotations, i = void 0 === r || r, a = (new o.ContentMessage).setType(o.ContentMessage.Type.TEXT).setText((new o.Text).setText(n.text)).setAnnotationsList([]), s = g[n.status];
            i && s && a.setAnnotationsList([(new o.MessageAnnotation).setType(s).setReceiptMetadata((new o.ReceiptMetadata).setMessageReceiptsList([(new o.ReceiptMetadata.ReceiptInfo).setId(n.sender === n.conversation.conversationStore.profileStore.currentUser ? n.destination.identifier.toWmpIdentifier() : n.conversation.conversationStore.profileStore.currentUser.identifier.toWmpIdentifier())]))]);
            var l = n.destination.type === c.pq.Group || n.direction === c.Tk.Outgoing ? n.destination : n.conversation.conversationStore.profileStore.currentUser;
            return (new o.Message).setId(n.id).setTimestamp(n.timestamp).setSenderId(n.sender.identifier.toWmpIdentifier()).setDestinationId(l.identifier.toWmpIdentifier()).setType(o.Message.Type.CONTENT).setContent(a).setContext(null !== (t = n.context) && void 0 !== t ? t : void 0)
          }
        }),
        Object.defineProperty(this, "setFromWmpModel", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.setTimestamp(e.getTimestamp());
            var t = (0,
            p.N)(e.getSenderId(), "UserMessage.setFromWmpModel: no sender found");
            n.setSender(d.W.fromWmpIdentifier(t));
            var r = (0,
            p.N)(e.getContent(), "UserMessage.setFromWmpModel: no content message found")
              , i = (0,
            p.N)(r.getText(), "UserMessage.setFromWmpModel: no text found");
            n.setText(i.getText());
            var o = r.getAnnotationsList();
            if (o) {
              var a = o.filter((function(e) {
                var t, r, i = null !== (r = null === (t = e.getReceiptMetadata()) || void 0 === t ? void 0 : t.getMessageReceiptsList().map((function(e) {
                  return e.getId()
                }
                )).filter((function(e) {
                  return void 0 !== e
                }
                )).map((function(e) {
                  return d.W.fromWmpIdentifier(e)
                }
                ))) && void 0 !== r ? r : [], o = i.some((function(e) {
                  return e === n.conversation.conversationStore.profileStore.currentUser.identifier
                }
                )), a = i.some((function(e) {
                  return e !== n.conversation.conversationStore.profileStore.currentUser.identifier
                }
                ));
                return n.isOutgoing && a || n.isIncoming && o
              }
              )).reduce((function(e, t) {
                var n = (0,
                p.N)(v[t.getType()], "UserMessage.setFromWmpModel: unsupported annotation type");
                return n > e ? n : e
              }
              ), c.rJ.Sent);
              n.safeChangeStatus(a)
            }
          }
        }),
        Object.defineProperty(this, "setTimestamp", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.timestamp = e
          }
        }),
        Object.defineProperty(this, "setSender", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.senderIdentifier = d.W.getIdentifier(e)
          }
        }),
        Object.defineProperty(this, "setText", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.text = e
          }
        }),
        Object.defineProperty(this, "setStatus", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.status = e
          }
        }),
        Object.defineProperty(this, "setContext", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.context = e
          }
        }),
        Object.defineProperty(this, "safeChangeStatus", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.status < e && n.setStatus(e)
          }
        }),
        Object.defineProperty(this, "send", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return m(n, void 0, void 0, (function() {
              var e;
              return h(this, (function(t) {
                switch (t.label) {
                case 0:
                  if (this.status === c.rJ.Pending)
                    return [2];
                  t.label = 1;
                case 1:
                  return t.trys.push([1, 3, , 4]),
                  this.setStatus(c.rJ.Pending),
                  [4, this.conversation.messageService.sendMessage(this)];
                case 2:
                  return t.sent(),
                  this.setStatus(c.rJ.Sent),
                  [3, 4];
                case 3:
                  if (e = t.sent(),
                  this.setStatus(c.rJ.SendingFailed),
                  this.conversation.conversationStore.report(e, b.w.SEND_USER_MESSAGE),
                  f.t.info("failed to send message", e),
                  e instanceof Error && "CALLER_BLOCKED_DEST" === e.message)
                    throw this.conversation.setBlocked(!0),
                    e;
                  return [3, 4];
                case 4:
                  return [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "resend", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return m(n, void 0, void 0, (function() {
              return h(this, (function(e) {
                switch (e.label) {
                case 0:
                  return this.timestamp = Date.now(),
                  [4, this.send()];
                case 1:
                  return e.sent(),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "safeSendReceivedReceipt", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return m(n, void 0, void 0, (function() {
              var e = this;
              return h(this, (function(t) {
                switch (t.label) {
                case 0:
                  return this.direction !== c.Tk.Incoming || this.status !== c.rJ.Sent ? [3, 2] : (this.safeChangeStatus(c.rJ.Received),
                  [4, u()((function() {
                    return e.conversation.messageService.sendReceivedReceipt(e.id)
                  }
                  ))]);
                case 1:
                  t.sent(),
                  t.label = 2;
                case 2:
                  return [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "safeSendReadReceipt", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return m(n, void 0, void 0, (function() {
              var e = this;
              return h(this, (function(t) {
                switch (t.label) {
                case 0:
                  return this.direction !== c.Tk.Incoming || this.status !== c.rJ.Received ? [3, 2] : (this.safeChangeStatus(c.rJ.Read),
                  [4, u()((function() {
                    return e.conversation.messageService.sendReadReceipt(e.id)
                  }
                  ))]);
                case 1:
                  t.sent(),
                  t.label = 2;
                case 2:
                  return [2]
                }
              }
              ))
            }
            ))
          }
        }),
        (0,
        s.ky)(this),
        (0,
        s.gx)((function() {
          return n.conversation.isGroup() && n.isIncoming && !n.sender.name
        }
        ), (function() {
          return n.sender.loadInfo()
        }
        ))
      }
      return Object.defineProperty(e.prototype, "isIncoming", {
        get: function() {
          return this.direction === c.Tk.Incoming
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "isOutgoing", {
        get: function() {
          return this.direction === c.Tk.Outgoing
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "isPending", {
        get: function() {
          return this.status === c.rJ.Pending
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "isSent", {
        get: function() {
          return this.status === c.rJ.Sent
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "isSendingFailed", {
        get: function() {
          return this.status === c.rJ.SendingFailed
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "isReceived", {
        get: function() {
          return this.status === c.rJ.Received
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "isRead", {
        get: function() {
          return this.status === c.rJ.Read
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "isUnread", {
        get: function() {
          return !this.isRead
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "sender", {
        get: function() {
          return this.conversation.conversationStore.profileStore.findOrCreateProfile(this.senderIdentifier)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "destination", {
        get: function() {
          return this.conversation.destination
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "direction", {
        get: function() {
          return this.sender === this.conversation.conversationStore.profileStore.currentUser ? c.Tk.Outgoing : c.Tk.Incoming
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }()
  }
  ,
  1529: (e,t,n)=>{
    "use strict";
    n.d(t, {
      j: ()=>m
    });
    var r = n(2885)
      , i = n(4144)
      , o = n(7766)
      , a = n(3584)
      , s = n(3955)
      , l = n.n(s)
      , u = n(4295)
      , c = n(8819)
      , f = n(1169)
      , d = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , p = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , b = "chat.conversation.system_message"
      , m = function() {
      function e(e, t) {
        void 0 === t && (t = (0,
        i.Z)());
        var n = this;
        Object.defineProperty(this, "conversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "id", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "timestamp", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: Date.now()
        }),
        Object.defineProperty(this, "components", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: []
        }),
        Object.defineProperty(this, "senderIdentifier", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: this.conversation.destination.identifier
        }),
        Object.defineProperty(this, "setSender", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.senderIdentifier = u.W.getIdentifier(e)
          }
        }),
        Object.defineProperty(this, "toWmpModel", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            var e = new a.GroupUpdate;
            return (new a.Message).setId(n.id).setTimestamp(n.timestamp).setSenderId(n.sender.identifier.toWmpIdentifier()).setDestinationId(n.conversation.destination.identifier.toWmpIdentifier()).setType(a.Message.Type.GROUP_UPDATE).setGroupUpdate(e)
          }
        }),
        Object.defineProperty(this, "setFromWmpModel", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            n.setComponents([]),
            n.setTimestamp(e.getTimestamp());
            var t = (0,
            f.N)(e.getSenderId(), "SystemMessage.setFromWmpModel: no sender found");
            if (n.setSender((0,
            c.E_)(t)),
            e.getType() === a.Message.Type.GROUP_UPDATE) {
              var r = e.getGroupUpdate();
              r && n.applyWmpGroupUpdate(r)
            }
          }
        }),
        (0,
        r.ky)(this, {
          direction: !1
        }),
        (0,
        r.gx)((function() {
          return !n.sender.identifier.equalsTo(n.currentUser.identifier) && !n.sender.name
        }
        ), (function() {
          return n.sender.loadInfo()
        }
        ))
      }
      return Object.defineProperty(e.prototype, "direction", {
        get: function() {
          return o.Tk.Incoming
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "sender", {
        get: function() {
          return this.conversation.conversationStore.profileStore.findOrCreateProfile(this.senderIdentifier)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "destination", {
        get: function() {
          return this.conversation.destination
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "setTimestamp", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.timestamp = e
        }
      }),
      Object.defineProperty(e.prototype, "setComponents", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.components = e
        }
      }),
      Object.defineProperty(e.prototype, "applyWmpGroupUpdate", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t, n, r, i, o;
          switch (e.getPayloadCase()) {
          case a.GroupUpdate.PayloadCase.ATTRIBUTES_UPDATED:
            var s = null === (t = e.getAttributesUpdated()) || void 0 === t ? void 0 : t.getGroupAttributes();
            s && this.applyWmpGroupAttributes(s);
            break;
          case a.GroupUpdate.PayloadCase.MEMBERS_ADDED:
            var l = (null === (n = e.getMembersAdded()) || void 0 === n ? void 0 : n.getMembersList()) || [];
            this.applyWmpGroupAddedMembers(l);
            break;
          case a.GroupUpdate.PayloadCase.MEMBERS_REMOVED:
            var u = (null === (r = e.getMembersRemoved()) || void 0 === r ? void 0 : r.getMembersList()) || [];
            this.applyWmpGroupRemovedMembers(u);
            break;
          case a.GroupUpdate.PayloadCase.MEMBERS_ROLE_UPDATED:
            var c = (null === (i = e.getMembersRoleUpdated()) || void 0 === i ? void 0 : i.getMembersList()) || []
              , d = (0,
            f.N)(null === (o = e.getMembersRoleUpdated()) || void 0 === o ? void 0 : o.getRole(), "SystemMessage.applyWmpGroupUpdate: no role found");
            this.applyWmpGroupMembersRoleUpdated(c, d)
          }
        }
      }),
      Object.defineProperty(e.prototype, "applyWmpGroupAttributes", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          e.hasName() && this.components.push(l().t("group_name_was_changed", {
            scope: b,
            name: e.getName()
          })),
          e.hasImageUrl() && (this.sender.identifier.equalsTo(this.conversation.destination.identifier) ? this.components.push(l().t("group_image_was_changed_by_manager", {
            scope: b
          })) : this.components.push(l().t("group_image_was_changed_by", {
            scope: b,
            name: this.sender.identifier.equalsTo(this.currentUser.identifier) ? l().t("you", {
              scope: b
            }) : this.sender.name
          }))),
          e.hasDescription() && (this.sender.identifier.equalsTo(this.conversation.destination.identifier) ? this.components.push(l().t("group_description_was_changed_by_manager", {
            scope: b
          })) : this.components.push(l().t("group_description_was_changed_by", {
            scope: b,
            name: this.sender.identifier.equalsTo(this.currentUser.identifier) ? l().t("you", {
              scope: b
            }) : this.sender.name
          })))
        }
      }),
      Object.defineProperty(e.prototype, "applyWmpGroupAddedMembers", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return d(this, void 0, void 0, (function() {
            var t = this;
            return p(this, (function(n) {
              switch (n.label) {
              case 0:
                return [4, this.getMembersFromList(e)];
              case 1:
                return n.sent().forEach((function(e) {
                  t.components.push(l().t("member_joined", {
                    scope: b,
                    name: e.identifier.equalsTo(t.currentUser.identifier) ? l().t("you_capitalized", {
                      scope: b
                    }) : e.name
                  }))
                }
                )),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "applyWmpGroupRemovedMembers", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return d(this, void 0, void 0, (function() {
            var t, n = this;
            return p(this, (function(r) {
              switch (r.label) {
              case 0:
                return t = !1,
                [4, this.getMembersFromList(e)];
              case 1:
                return r.sent().forEach((function(e) {
                  e.identifier.equalsTo(n.currentUser.identifier) ? t = !0 : n.components.push(l().t("member_left", {
                    scope: b,
                    name: e.name
                  }))
                }
                )),
                t && this.components.push(this.sender.identifier.equalsTo(this.currentUser.identifier) ? l().t("member_left", {
                  scope: b,
                  name: l().t("you_capitalized", {
                    scope: b
                  })
                }) : l().t("you_were_removed", {
                  scope: b
                })),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "applyWmpGroupMembersRoleUpdated", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          return d(this, void 0, void 0, (function() {
            var n, r = this;
            return p(this, (function(i) {
              switch (i.label) {
              case 0:
                return n = (0,
                c.r_)(t),
                [4, this.getMembersFromList(e)];
              case 1:
                return i.sent().forEach((function(e) {
                  var t = r.currentUser.identifier.equalsTo(e.identifier);
                  if (n === o.VC.Admin) {
                    var i = r.conversation.destination.name;
                    r.components.push(t ? l().t("you_are_an_admin", {
                      scope: b,
                      name: i
                    }) : l().t("user_is_an_admin", {
                      scope: b,
                      userName: e.name,
                      groupName: i
                    }))
                  } else
                    n === o.VC.Member && r.components.push(t ? l().t("you_were_removed_as_admin", {
                      scope: b
                    }) : l().t("user_was_removed_as_admin", {
                      scope: b,
                      userName: e.name
                    }))
                }
                )),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "currentUser", {
        get: function() {
          return this.conversation.conversationStore.profileStore.currentUser
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "getMembersFromList", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return d(this, void 0, void 0, (function() {
            var t = this;
            return p(this, (function(n) {
              return [2, Promise.all(e.map((function(e) {
                return t.getMember(e)
              }
              )))]
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "getMember", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return d(this, void 0, void 0, (function() {
            var t, n;
            return p(this, (function(r) {
              switch (r.label) {
              case 0:
                return t = this.conversation.conversationStore.profileStore.findOrCreateProfile((0,
                c.E_)(e)),
                n = this.currentUser.identifier.equalsTo(t.identifier),
                t.name || n ? [3, 2] : [4, t.loadInfo()];
              case 1:
                r.sent(),
                r.label = 2;
              case 2:
                return [2, t]
              }
            }
            ))
          }
          ))
        }
      }),
      e
    }()
  }
  ,
  5052: (e,t,n)=>{
    "use strict";
    n.d(t, {
      w: ()=>ke
    });
    var r = n(2885)
      , i = n(4144)
      , o = n(4799)
      , a = n(8347)
      , s = n(6823)
      , l = n(5138)
      , u = n(3584)
      , c = n(490)
      , f = n(8819)
      , d = n(33)
      , p = n(7821)
      , b = n(6924)
      , m = n(4295)
      , h = n(1169)
      , v = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , g = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , y = function() {
      function e(e, t, n, r, i, a, l) {
        var u, c;
        void 0 === l && (l = {}),
        Object.defineProperty(this, "userId", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "deviceId", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: n
        }),
        Object.defineProperty(this, "appIdentifier", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: r
        }),
        Object.defineProperty(this, "report", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: a
        }),
        Object.defineProperty(this, "messagingClient", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "historyClient", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        });
        var f = "/".concat(e.toLowerCase(), "-wmp");
        this.messagingClient = null !== (u = l.messagingClient) && void 0 !== u ? u : new o.MessagingPromiseClient(f,null,{}),
        this.historyClient = null !== (c = l.historyClient) && void 0 !== c ? c : new s.MessagingHistoryPromiseClient(f,null,{}),
        this.applyIncompleteResponseLogging(this.historyClient),
        this.applyIncompleteResponseLogging(this.messagingClient),
        this.enableGrpcWebDevTools()
      }
      return Object.defineProperty(e.prototype, "register", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return v(this, void 0, void 0, (function() {
            var e, t, n;
            return g(this, (function(r) {
              switch (r.label) {
              case 0:
                return e = (new a.WmpGetMessagingProviderRequest).setHeader(this.wmpRequestHeader()),
                [4, this.messagingClient.getMessagingProvider(e, (0,
                f.GZ)(d.N.GetMessagingProvider))];
              case 1:
                if (t = r.sent(),
                !(n = t.getTachyon()))
                  throw new Error("empty tachyon provider");
                return [2, {
                  token: n.getAuthTokenPayload_asB64(),
                  baseUrl: n.getBaseUrl(),
                  apiKey: n.getApiKey(),
                  expiresAt: Math.floor(Date.now() + n.getExpiresIn() / 1e3)
                }]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "sendUserMessage", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return v(this, void 0, void 0, (function() {
            return g(this, (function(t) {
              switch (t.label) {
              case 0:
                return [4, this.sendWmpMessage(e, (0,
                f.GZ)(d.N.SendMessage))];
              case 1:
                return t.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "sendReceiptMessage", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return v(this, void 0, void 0, (function() {
            return g(this, (function(t) {
              switch (t.label) {
              case 0:
                return [4, this.sendWmpMessage(e, (0,
                f.GZ)(d.N.SendReceipt))];
              case 1:
                return t.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "ackMessages", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return v(this, void 0, void 0, (function() {
            var t;
            return g(this, (function(n) {
              return e.length > 0 ? (t = (new a.WmpAckMessagesRequest).setHeader(this.wmpRequestHeader()).setMessageIdsList(e),
              b.A.info("AckMsg", e),
              [2, this.messagingClient.ackMessages(t, (0,
              f.GZ)(d.N.AckMessages))]) : [2]
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "getProfileInfo", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return v(this, void 0, void 0, (function() {
            var t, n;
            return g(this, (function(r) {
              switch (r.label) {
              case 0:
                return t = (new a.WmpGetProfileInfoRequest).setHeader(this.wmpRequestHeader()).setIdsList(e.map((function(e) {
                  return e.toWmpIdentifier()
                }
                ))),
                [4, this.messagingClient.getProfileInfo(t, (0,
                f.GZ)(d.N.GetProfileInfo))];
              case 1:
                return n = r.sent(),
                b.A.info("GetProfile", n.toObject()),
                [2, n.getProfilesList().reduce((function(e, t) {
                  var n = (0,
                  h.N)(t.getId(), "WmpClient.getProfileInfo: no identifier found");
                  return e.set(m.W.fromWmpIdentifier(n), t),
                  e
                }
                ), new Map)]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "getConversationHistory", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = e.untilTimestamp
            , n = e.fromTimestamp
            , r = e.readTimestamp;
          return v(this, void 0, void 0, (function() {
            var e, i;
            return g(this, (function(o) {
              switch (o.label) {
              case 0:
                return e = (new l.WmpListConversationsRequest).setHeader(this.wmpRequestHeader()).setPageSize(p.aQ),
                t && e.setNotNewerThanMs(t),
                n && e.setNotOlderThanMs(n),
                r && e.setReadTimestampMs(r),
                [4, this.historyClient.listConversations(e, (0,
                f.GZ)(d.N.ListConversations))];
              case 1:
                return i = o.sent(),
                b.A.info("ListConv", i.getConversationItemsList().map((function(e) {
                  return e.toObject()
                }
                ))),
                [2, {
                  fullyLoaded: !i.getNextPageToken(),
                  readTimestamp: i.getReadTimestampMs(),
                  conversations: i.getConversationItemsList()
                }]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "getMessageHistory", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          var n = t.orderBy
            , r = t.untilTimestamp
            , i = t.fromTimestamp
            , o = t.pageSize
            , a = void 0 === o ? p.T7 : o;
          return v(this, void 0, void 0, (function() {
            var t, o;
            return g(this, (function(s) {
              switch (s.label) {
              case 0:
                return t = (new l.WmpListMessagesRequest).setHeader(this.wmpRequestHeader()).setDestinationId((0,
                f.cJ)(e)).setPageSize(Math.min(a, p.yR)).setOrderBy(n),
                r && t.setNotNewerThanMs(r),
                i && t.setNotOlderThanMs(i),
                [4, this.historyClient.listMessages(t, (0,
                f.GZ)(d.N.ListMessages))];
              case 1:
                return o = s.sent(),
                b.A.info("ListMsg", o.getMessagesList().map((function(e) {
                  return e.toObject()
                }
                ))),
                [2, {
                  fullyLoaded: !o.getNextPageToken(),
                  messages: o.getMessagesList()
                }]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "sendDeleteMessage", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return v(this, void 0, void 0, (function() {
            var t;
            return g(this, (function(n) {
              return t = (0,
              f.j0)(this.userId, e),
              [2, this.sendWmpMessage(t, (0,
              f.GZ)(d.N.SendDelete))]
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "sendBlockMessage", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          return v(this, void 0, void 0, (function() {
            return g(this, (function(n) {
              return [2, this.sendWmpMessage((0,
              f.Tp)(this.userId, e, t), (0,
              f.GZ)(d.N.SendMessage))]
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "getUserSettings", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return v(this, void 0, void 0, (function() {
            var e, t;
            return g(this, (function(n) {
              switch (n.label) {
              case 0:
                return e = (new a.WmpGetUserSettingsRequest).setHeader(this.wmpRequestHeader()),
                [4, this.messagingClient.getUserSettings(e, (0,
                f.GZ)(d.N.GetUserSettings))];
              case 1:
                return t = n.sent(),
                [2, (0,
                f.uU)(t)]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "updateUserSettings", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return v(this, void 0, void 0, (function() {
            var t, n;
            return g(this, (function(r) {
              switch (r.label) {
              case 0:
                if (void 0 === e.showProfileFullName || void 0 === e.showProfileImage)
                  throw new Error("Cannot perform a partial update");
                return t = (new a.WmpUpdateUserSettingsRequest).setHeader(this.wmpRequestHeader()).setUserSettings((new c.UserSettings).setShowProfileFullName(e.showProfileFullName).setShowProfileImage(e.showProfileImage)),
                [4, this.messagingClient.updateUserSettings(t, (0,
                f.GZ)(d.N.UpdateUserSettings))];
              case 1:
                return n = r.sent(),
                [2, (0,
                f.uU)(n)]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "getUnreadMessagesCount", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = (void 0 === e ? {} : e).readTimestamp;
          return v(this, void 0, void 0, (function() {
            var e, n;
            return g(this, (function(r) {
              switch (r.label) {
              case 0:
                return e = (new a.GetUnreadMessagesCountRequest).setHeader(this.wmpRequestHeader()),
                t && e.setReadTimestampMs(t),
                [4, this.messagingClient.getUnreadMessagesCount(e, (0,
                f.GZ)(d.N.UpdateUserSettings))];
              case 1:
                return n = r.sent(),
                [2, {
                  unreadMessagesCount: (0,
                  h.N)(n.getUnreadMessagesCount(), "WmpClient.getUnreadMessagesCount: no unread messages count found").getTotalUnreadMessagesCount(),
                  readTimestamp: n.getReadTimestampMs()
                }]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "markConversationAsRead", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return v(this, void 0, void 0, (function() {
            var t;
            return g(this, (function(n) {
              return t = (new a.MarkConversationReadRequest).setHeader(this.wmpRequestHeader()).setDestinationId((0,
              f.cJ)(e)),
              [2, this.messagingClient.markConversationRead(t)]
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "muteConversation", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          return v(this, void 0, void 0, (function() {
            var n;
            return g(this, (function(r) {
              return n = (new a.MuteConversationRequest).setHeader(this.wmpRequestHeader()).setDestinationId((0,
              f.cJ)(e)).setMute((new u.Mute).setMute(t)),
              [2, this.messagingClient.muteConversation(n)]
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "sendWmpMessage", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          return v(this, void 0, void 0, (function() {
            var n;
            return g(this, (function(r) {
              return n = (new a.WmpSendMessageRequest).setHeader(this.wmpRequestHeader()).setMessage(e),
              b.A.info("SendMsg", e.toObject()),
              [2, this.messagingClient.sendMessage(n, t)]
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "applyIncompleteResponseLogging", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          e.client_.unaryCall = function(t, n, r, i) {
            return new Promise((function(o, a) {
              var s;
              e.client_.rpcCall(t, n, r, i, (function(e, r) {
                e ? (2 === e.code && "Incomplete response" === e.message && (e.method = t,
                e.request = JSON.stringify(n.toObject()),
                e.responseMetadata = JSON.stringify(s)),
                a(e)) : o(r)
              }
              )).on("metadata", (function(e) {
                s = e
              }
              ))
            }
            ))
          }
        }
      }),
      Object.defineProperty(e.prototype, "enableGrpcWebDevTools", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          (window.__GRPCWEB_DEVTOOLS__ || function() {}
          )([this.messagingClient, this.historyClient])
        }
      }),
      Object.defineProperty(e.prototype, "wmpRequestHeader", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return (0,
          f.bs)(this.deviceId, this.appIdentifier)
        }
      }),
      e
    }()
      , w = n(8128)
      , E = function() {
      return E = Object.assign || function(e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in t = arguments[n])
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e
      }
      ,
      E.apply(this, arguments)
    }
      , O = function() {
      function e() {}
      return Object.defineProperty(e, "fetch", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = e.baseUrl
            , n = e.path
            , r = e.authToken
            , o = e.apiKey
            , a = e.payload;
          return fetch(t + n, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "X-Goog-Api-Key": o
            },
            body: JSON.stringify(E({
              header: {
                request_id: (0,
                i.Z)(),
                app: this.APP,
                client_info: {
                  api_version: "V4",
                  platform_type: w.Platform.Type.WEB
                },
                auth_token_payload: r
              }
            }, a))
          })
        }
      }),
      Object.defineProperty(e, "APP", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: "Waze"
      }),
      e
    }()
      , S = n(6023)
      , P = n.n(S)
      , j = n(118)
      , M = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , C = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , I = function() {
      function e(t) {
        var n = this;
        Object.defineProperty(this, "reader", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "parser", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "messages", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: []
        }),
        Object.defineProperty(this, "applyParsedValue", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(t) {
            if (e.isError(t))
              throw new Error("failed to parse stream data: ".concat(t.code, " ").concat(t.status));
            if (t.inboxMessage) {
              if (e.isUserData(t))
                return;
              var r = (new j.InboxMessage).setMessage(t.inboxMessage.message).getMessage_asU8()
                , i = u.Message.deserializeBinary(r);
              b.A.info("Tcyn:Rcv", t, i.toObject()),
              n.messages.push({
                id: t.inboxMessage.messageId,
                message: i
              })
            }
          }
        }),
        this.parser = new (P()),
        this.parser.onValue = this.applyParsedValue
      }
      return Object.defineProperty(e.prototype, "read", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return M(this, void 0, void 0, (function() {
            var e, t, n, r;
            return C(this, (function(i) {
              switch (i.label) {
              case 0:
                return [4, this.reader.read()];
              case 1:
                return e = i.sent(),
                t = e.done,
                n = e.value,
                r = void 0 !== n ? this.parse(n) : [],
                [2, {
                  done: t,
                  messages: r
                }]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "cancel", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return M(this, void 0, void 0, (function() {
            return C(this, (function(e) {
              switch (e.label) {
              case 0:
                return [4, this.reader.cancel()];
              case 1:
                return e.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "parse", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.parser.write(e);
          var t = this.messages;
          return this.messages = [],
          t
        }
      }),
      Object.defineProperty(e, "isError", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return void 0 !== e.code && void 0 !== e.status
        }
      }),
      Object.defineProperty(e, "isUserData", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t;
          return e.inboxMessage && (null === (t = j.InboxMessage.MessageType[e.inboxMessage.messageType]) || void 0 === t ? void 0 : t.toString()) === j.InboxMessage.MessageType.USERDATA.toString()
        }
      }),
      e
    }()
      , R = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , _ = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , T = function() {
      var e = this;
      Object.defineProperty(this, "connect", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(t) {
          return R(e, void 0, void 0, (function() {
            var e, n, r, i, o;
            return _(this, (function(a) {
              switch (a.label) {
              case 0:
                return e = t.token,
                n = t.baseUrl,
                r = t.apiKey,
                [4, O.fetch({
                  baseUrl: n,
                  path: "v1/messages:receive",
                  authToken: e,
                  apiKey: r
                })];
              case 1:
                return (i = a.sent()).ok ? [3, 3] : [4, i.text()];
              case 2:
                throw o = a.sent(),
                new Error("failed to connect: ".concat(i.status, " ").concat(o));
              case 3:
                if (!i.body)
                  throw new Error("failed to connect: empty response body");
                return [2, new I(i.body.getReader())]
              }
            }
            ))
          }
          ))
        }
      })
    }
      , N = n(1715)
      , A = n(660)
      , k = n(6677)
      , x = n(155)
      , z = n(4345)
      , U = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , W = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , D = function() {
      function e(e, t) {
        var n = this;
        Object.defineProperty(this, "store", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "webEvents", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "ackMessagesBatch", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "dataProcessor", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "registrationInfoPromise", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "listening", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: !1
        }),
        Object.defineProperty(this, "interrupted", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: !1
        }),
        Object.defineProperty(this, "ackMessagesBatchFn", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return U(n, void 0, void 0, (function() {
              var t;
              return W(this, (function(n) {
                switch (n.label) {
                case 0:
                  return t = e.map((function(e) {
                    return e.args[0]
                  }
                  )),
                  [4, this.store.wmpClient.ackMessages(t)];
                case 1:
                  return n.sent(),
                  e.forEach((function(e) {
                    return e.resolve()
                  }
                  )),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "getRegistrationInfo", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return U(n, void 0, void 0, (function() {
              var e;
              return W(this, (function(t) {
                switch (t.label) {
                case 0:
                  return this.registrationInfoPromise ? [3, 1] : (this.registrationInfoPromise = this.store.wmpClient.register(),
                  [3, 3]);
                case 1:
                  return [4, e = this.registrationInfoPromise];
                case 2:
                  t.sent().expiresAt < Date.now() && e === this.registrationInfoPromise && (this.registrationInfoPromise = this.store.wmpClient.register()),
                  t.label = 3;
                case 3:
                  return [2, this.registrationInfoPromise]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "receiveMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return U(n, void 0, void 0, (function() {
              var t, n, r, i;
              return W(this, (function(o) {
                switch (o.label) {
                case 0:
                  return t = JSON.stringify((0,
                  f.E_)(null !== (r = e.message.getSenderId()) && void 0 !== r ? r : new z.Identifier)),
                  n = JSON.stringify((0,
                  f.E_)(null !== (i = e.message.getDestinationId()) && void 0 !== i ? i : new z.Identifier)),
                  b.t.info("Received message with type ".concat(e.message.getType(), ", sender ").concat(t, " and destination ").concat(n)),
                  this.store.conversationStore.applyWmpMessageFromStream(e.message),
                  [4, this.ackMessage(e.id)];
                case 1:
                  return o.sent(),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "ackMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return U(n, void 0, void 0, (function() {
              return W(this, (function(t) {
                switch (t.label) {
                case 0:
                  return [4, this.ackMessagesBatch.push(e)];
                case 1:
                  return t.sent(),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        this.ackMessagesBatch = new k.E(this.ackMessagesBatchFn,{
          delayMs: 2e3,
          batchSize: 100
        })
      }
      return Object.defineProperty(e.prototype, "startListening", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          this.interrupted = !1,
          this.startAutoReconnect()
        }
      }),
      Object.defineProperty(e.prototype, "stopListening", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          var e;
          this.interrupted = !0,
          null === (e = this.dataProcessor) || void 0 === e || e.cancel()
        }
      }),
      Object.defineProperty(e.prototype, "startAutoReconnect", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return U(this, void 0, void 0, (function() {
            var e;
            return W(this, (function(t) {
              switch (t.label) {
              case 0:
                if (this.listening)
                  return [2];
                this.listening = !0,
                t.label = 1;
              case 1:
                return t.trys.push([1, 3, , 4]),
                [4, this.listenAutoReconnect()];
              case 2:
                return t.sent(),
                [3, 4];
              case 3:
                return e = t.sent(),
                this.store.report(e, x.w.LISTEN_AUTO_RECONNECT),
                [3, 4];
              case 4:
                return this.listening = !1,
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "listenAutoReconnect", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return U(this, void 0, void 0, (function() {
            var e, t;
            return W(this, (function(n) {
              switch (n.label) {
              case 0:
                e = 0,
                n.label = 1;
              case 1:
                if (this.interrupted)
                  return [3, 7];
                n.label = 2;
              case 2:
                return n.trys.push([2, 4, , 6]),
                [4, this.listen()];
              case 3:
                return n.sent(),
                e = 0,
                [3, 6];
              case 4:
                return t = n.sent(),
                b.t.info("listen failed", t),
                e *= 2,
                e = Math.max(e, 1),
                e = Math.min(e, 60),
                [4, (0,
                N.V)(1e3 * e)];
              case 5:
                return n.sent(),
                [3, 6];
              case 6:
                return [3, 1];
              case 7:
                return [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "listen", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return U(this, void 0, void 0, (function() {
            var e, t, n, r, i, o, a, s, l, u = this;
            return W(this, (function(c) {
              switch (c.label) {
              case 0:
                return c.trys.push([0, 3, , 4]),
                e = this,
                n = (t = this.store.tachyonClient).connect,
                [4, this.getRegistrationInfo()];
              case 1:
                return [4, n.apply(t, [c.sent()])];
              case 2:
                return e.dataProcessor = c.sent(),
                [3, 4];
              case 3:
                throw (r = c.sent())instanceof Error && this.onConnectError(r),
                r;
              case 4:
                this.onConnect(),
                c.label = 5;
              case 5:
                if (c.trys.push([5, 9, 10, 12]),
                this.interrupted)
                  return [2];
                i = !0,
                c.label = 6;
              case 6:
                return i ? [4, this.dataProcessor.read()] : [3, 8];
              case 7:
                return o = c.sent(),
                a = o.done,
                s = o.messages,
                a ? (this.onDisconnect(this.interrupted ? A.W4.Interrupt : A.W4.Expired),
                i = !1,
                [3, 8]) : (s.forEach((function(e) {
                  return u.receiveMessage(e).catch((function(e) {
                    u.store.report(e, x.w.RECEIVE_STREAM_MESSAGE)
                  }
                  ))
                }
                )),
                [3, 6]);
              case 8:
                return [3, 12];
              case 9:
                throw l = c.sent(),
                this.onDisconnect(A.W4.Error, l),
                l;
              case 10:
                return [4, this.dataProcessor.cancel()];
              case 11:
                return c.sent(),
                this.dataProcessor = void 0,
                [7];
              case 12:
                return [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "onConnect", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          (0,
          A.Ho)(this.webEvents, this.store.report),
          console.info("Message stream connected")
        }
      }),
      Object.defineProperty(e.prototype, "onConnectError", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          (0,
          A.Ho)(this.webEvents, this.store.report, e.message),
          console.info("Message stream failed to connect")
        }
      }),
      Object.defineProperty(e.prototype, "onDisconnect", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          (0,
          A.X5)(this.webEvents, this.store.report, e, null == t ? void 0 : t.message),
          console.info("Message stream disconnected", e, null != t ? t : "")
        }
      }),
      e
    }()
      , G = function() {
      function e() {
        Object.defineProperty(this, "hiddenPropertyName", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "visibilityChangeEventName", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "onVisibilityChange", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "visibilityChangeSupported", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        this.visibilityChangeSupported = !0,
        void 0 !== document.hidden ? (this.hiddenPropertyName = "hidden",
        this.visibilityChangeEventName = "visibilitychange") : void 0 !== document.msHidden ? (this.hiddenPropertyName = "msHidden",
        this.visibilityChangeEventName = "msvisibilitychange") : void 0 !== document.webkitHidden ? (this.hiddenPropertyName = "webkitHidden",
        this.visibilityChangeEventName = "webkitvisibilitychange") : (this.visibilityChangeSupported = !1,
        this.hiddenPropertyName = "UNSUPPORTED",
        this.visibilityChangeEventName = "UNSUPPORTED")
      }
      return Object.defineProperty(e.prototype, "listenForChange", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = this;
          this.visibilityChangeSupported ? this.onVisibilityChange || (this.onVisibilityChange = function() {
            return e(t.isTabShown())
          }
          ,
          document.addEventListener(this.visibilityChangeEventName, this.onVisibilityChange, !1)) : (console.error("Tracking visibility change is not supported."),
          e(!0))
        }
      }),
      Object.defineProperty(e.prototype, "stopListening", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          this.onVisibilityChange && (document.removeEventListener(this.visibilityChangeEventName, this.onVisibilityChange),
          this.onVisibilityChange = void 0)
        }
      }),
      Object.defineProperty(e.prototype, "isTabShown", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return !document[this.hiddenPropertyName]
        }
      }),
      e
    }();
    const L = function() {
      function e(e, t) {
        var n = this;
        Object.defineProperty(this, "storageKey", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "getJsonToStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "autorunDisposer", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: null
        }),
        Object.defineProperty(this, "writeTrackedObservables", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            var e = n.getJsonToStore();
            localStorage.setItem(n.storageKey, JSON.stringify(e))
          }
        }),
        Object.defineProperty(this, "readState", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            try {
              var e = localStorage.getItem(n.storageKey);
              return e ? JSON.parse(e) : void 0
            } catch (e) {
              console.error("Error reading state from localStorage, key: ".concat(n.storageKey), e)
            }
          }
        })
      }
      return Object.defineProperty(e.prototype, "startAutoSync", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          null === this.autorunDisposer && (this.autorunDisposer = (0,
          r.EH)(this.writeTrackedObservables))
        }
      }),
      Object.defineProperty(e.prototype, "stopAutoSync", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          null !== this.autorunDisposer && (this.autorunDisposer(),
          this.autorunDisposer = null)
        }
      }),
      e
    }();
    var F = function(e, t, n, r) {
      var i = this;
      Object.defineProperty(this, "currentWindow", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: e
      }),
      Object.defineProperty(this, "targetWindow", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: t
      }),
      Object.defineProperty(this, "targetOrigin", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: n
      }),
      Object.defineProperty(this, "logger", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: r
      }),
      Object.defineProperty(this, "initListener", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = function(t) {
            i.logger.info("got message", t.data),
            t.origin === i.targetOrigin && e(t.data)
          };
          return i.currentWindow.addEventListener("message", t),
          function() {
            return i.currentWindow.removeEventListener("message", t)
          }
        }
      }),
      Object.defineProperty(this, "receiveMessage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return new Promise((function(t) {
            var n = i.initListener((function(r) {
              var i = e(r);
              i && (n(),
              t(i))
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(this, "postMessage", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          i.logger.info("sending message ", e),
          i.targetWindow.postMessage(e, i.targetOrigin)
        }
      })
    }
      , B = n(9876)
      , H = n(7766)
      , V = function() {
      function e(e) {
        var t = this;
        Object.defineProperty(this, "store", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "messageService", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new F(window,window.parent,window.parent.location.origin,b.t)
        }),
        Object.defineProperty(this, "disposeSetVisibilityMessageListener", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "disposeOpenConversationMessageListener", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "disposeUnreadCountMessageSender", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "disposeVisibilityMessageSender", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "init", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.initSetVisibilityMessageListener(),
            t.initOpenConversationMessageListener(),
            t.initUnreadCountMessageSender(),
            t.initVisibilityMessageSender(),
            t.postReadyMessage()
          }
        }),
        Object.defineProperty(this, "dispose", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            var e, n, r, i;
            null === (e = t.disposeSetVisibilityMessageListener) || void 0 === e || e.call(t),
            null === (n = t.disposeOpenConversationMessageListener) || void 0 === n || n.call(t),
            null === (r = t.disposeUnreadCountMessageSender) || void 0 === r || r.call(t),
            null === (i = t.disposeVisibilityMessageSender) || void 0 === i || i.call(t)
          }
        }),
        Object.defineProperty(this, "postReadyMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.messageService.postMessage({
              type: B.MessageType.ChatReady
            })
          }
        }),
        Object.defineProperty(this, "initSetVisibilityMessageListener", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.disposeSetVisibilityMessageListener = t.messageService.initListener((function(e) {
              e.type === B.MessageType.ChatSetVisibility && t.store.uiState.setChatOpen(e.visible)
            }
            ))
          }
        }),
        Object.defineProperty(this, "initOpenConversationMessageListener", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.disposeOpenConversationMessageListener = t.messageService.initListener((function(e) {
              var n;
              if (e.type === B.MessageType.ChatOpenConversation)
                try {
                  t.openConversation({
                    identifier: {
                      type: H.pq.User,
                      id: e.userId.toString()
                    },
                    name: null !== (n = e.userName) && void 0 !== n ? n : "",
                    photoUrl: e.userPhotoUrl
                  }, {
                    firstContentMessageContext: (0,
                    f.h8)(e.conversationInitialContext)
                  })
                } catch (e) {
                  t.store.report(e, x.w.OPEN_CONVERSATION)
                }
            }
            ))
          }
        }),
        Object.defineProperty(this, "initUnreadCountMessageSender", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.disposeUnreadCountMessageSender = (0,
            r.EH)((function() {
              t.messageService.postMessage({
                type: B.MessageType.ChatUnreadCount,
                count: t.store.conversationStore.unreadMessagesAbsoluteNumber
              })
            }
            ))
          }
        }),
        Object.defineProperty(this, "initVisibilityMessageSender", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.disposeVisibilityMessageSender = (0,
            r.EH)((function() {
              t.messageService.postMessage({
                type: B.MessageType.ChatVisibility,
                visible: t.store.uiState.chatOpen
              })
            }
            ))
          }
        })
      }
      return Object.defineProperty(e.prototype, "openConversation", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          var n = (void 0 === t ? {} : t).firstContentMessageContext
            , r = this.store.conversationStore.findOrCreateConversation(e.identifier);
          r.destination.setFromJson(e),
          null != n && r.setNextContentMessageContext(n),
          this.store.uiState.setSelectedConversation(r.destination),
          this.store.uiState.setChatOpen(!0)
        }
      }),
      e
    }()
      , J = n(2388)
      , K = n(9175)
      , q = n.n(K)
      , Q = function() {
      function e(e) {
        var t = this;
        Object.defineProperty(this, "conversationStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "_isDesktop", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "_isRTL", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "_chatOpen", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: !1
        }),
        Object.defineProperty(this, "_appMode", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: J.J.App
        }),
        Object.defineProperty(this, "_pageVisible", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: !0
        }),
        Object.defineProperty(this, "_searchText", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: ""
        }),
        Object.defineProperty(this, "_selectedConversationIdentifier", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "_selectedGroupSubConversationIdentifier", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "_chatInviteId", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "setChatOpen", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t._chatOpen = e
          }
        }),
        Object.defineProperty(this, "setAppMode", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t._appMode = e
          }
        }),
        Object.defineProperty(this, "setPageVisible", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t._pageVisible = e
          }
        }),
        Object.defineProperty(this, "setSearchText", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t._searchText = e
          }
        }),
        Object.defineProperty(this, "setSelectedConversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t._selectedConversationIdentifier = e && m.W.getIdentifier(e)
          }
        }),
        Object.defineProperty(this, "setSelectedGroupSubConversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t._selectedGroupSubConversationIdentifier = e && t.conversationStore.findOrCreateConversation(e).destinationIdentifier
          }
        }),
        Object.defineProperty(this, "setChatInviteId", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t._chatInviteId = e
          }
        });
        var n = new (q());
        this._isDesktop = void 0 === n.getDevice().type,
        this._isRTL = "rtl" === document.getElementsByTagName("html")[0].getAttribute("dir"),
        (0,
        r.ky)(this)
      }
      return Object.defineProperty(e.prototype, "isDesktop", {
        get: function() {
          return this._isDesktop
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "isRTL", {
        get: function() {
          return this._isRTL
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "chatOpen", {
        get: function() {
          return this._chatOpen || this._appMode !== J.J.Embed
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "appMode", {
        get: function() {
          return this._appMode
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "pageVisible", {
        get: function() {
          return this._pageVisible
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "searchText", {
        get: function() {
          return this._searchText
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "selectedConversation", {
        get: function() {
          return this._selectedConversationIdentifier && this.conversationStore.findConversation(this._selectedConversationIdentifier)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "selectedGroupSubConversation", {
        get: function() {
          return this._selectedGroupSubConversationIdentifier && this.conversationStore.findConversation(this._selectedGroupSubConversationIdentifier)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "selectedConversationIdentifier", {
        get: function() {
          return this._selectedConversationIdentifier
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "selectedGroupSubConversationIdentifier", {
        get: function() {
          return this._selectedGroupSubConversationIdentifier
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "chatInviteId", {
        get: function() {
          return this._chatInviteId
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "toCacheJson", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          var e, t;
          return this.appMode === J.J.MobileWeb ? {
            chatOpen: !0,
            searchText: "",
            selectedConversation: void 0,
            selectedGroupSubConversation: void 0
          } : {
            chatOpen: this._chatOpen,
            searchText: this._searchText,
            selectedConversation: null === (e = this._selectedConversationIdentifier) || void 0 === e ? void 0 : e.toJson(),
            selectedGroupSubConversation: null === (t = this._selectedGroupSubConversationIdentifier) || void 0 === t ? void 0 : t.toJson()
          }
        }
      }),
      Object.defineProperty(e.prototype, "setFromCacheJson", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.appMode !== J.J.MobileWeb && (this.setChatOpen(e.chatOpen),
          this.setSearchText(e.searchText),
          this.setSelectedConversation(e.selectedConversation),
          this.setSelectedGroupSubConversation(e.selectedGroupSubConversation))
        }
      }),
      e
    }()
      , Z = n(2338)
      , X = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , Y = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , $ = function() {
      function e(e) {
        var t = this;
        Object.defineProperty(this, "store", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "showProfileFullName", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "showProfileImage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "updateSettingsQueue", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new Z.c
        }),
        Object.defineProperty(this, "autoSaveDisposer", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "saveDefaultSettings", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return X(t, void 0, void 0, (function() {
              var e;
              return Y(this, (function(t) {
                switch (t.label) {
                case 0:
                  return [4, this.store.wmpClient.updateUserSettings({
                    showProfileFullName: !0,
                    showProfileImage: !0
                  })];
                case 1:
                  return e = t.sent(),
                  this.setSettings(e),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "setShowProfileFullName", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t.showProfileFullName = e
          }
        }),
        Object.defineProperty(this, "setShowProfileImage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t.showProfileImage = e
          }
        }),
        Object.defineProperty(this, "loadFromServer", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return X(t, void 0, void 0, (function() {
              var e;
              return Y(this, (function(t) {
                switch (t.label) {
                case 0:
                  return [4, this.store.wmpClient.getUserSettings()];
                case 1:
                  return e = t.sent(),
                  this.setSettings(e),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "udpateSettings", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return t.updateSettingsQueue.push((function() {
              return t.store.wmpClient.updateUserSettings(e)
            }
            )).catch((function(e) {
              throw t.store.report(e, x.w.UPDATE_USER_SETTINGS),
              e
            }
            ))
          }
        }),
        Object.defineProperty(this, "startAutoSave", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t.autoSaveDisposer || (t.autoSaveDisposer = (0,
            r.U5)((function() {
              return {
                showProfileFullName: t.showProfileFullName,
                showProfileImage: t.showProfileImage
              }
            }
            ), (function(n) {
              return t.udpateSettings(n).catch(e)
            }
            )))
          }
        }),
        Object.defineProperty(this, "stopAutoSave", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.autoSaveDisposer && (t.autoSaveDisposer(),
            t.autoSaveDisposer = void 0)
          }
        }),
        (0,
        r.ky)(this)
      }
      return Object.defineProperty(e.prototype, "setSettings", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.showProfileFullName = e.showProfileFullName,
          this.showProfileImage = e.showProfileImage
        }
      }),
      Object.defineProperty(e.prototype, "hasMissingSettings", {
        get: function() {
          return void 0 === this.showProfileFullName || void 0 === this.showProfileImage
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }()
      , ee = n(935)
      , te = n(9302);
    var ne, re = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }, ie = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }, oe = function() {
      function e(e, t, n) {
        var i = this;
        Object.defineProperty(this, "groupStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "membershipStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "memberIdentifier", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: n
        }),
        Object.defineProperty(this, "role", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: H.VC.Member
        }),
        Object.defineProperty(this, "toJson", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return {
              member: i.memberIdentifier.toJson(),
              role: i.role
            }
          }
        }),
        Object.defineProperty(this, "setFromJson", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            i.setRole(e.role)
          }
        }),
        Object.defineProperty(this, "toWmpMembership", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return (new te.Membership).setMemberId(i.member.identifier.toWmpIdentifier()).setRole(f.Wk[i.role])
          }
        }),
        Object.defineProperty(this, "setFromWmpMembership", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            i.role = (0,
            f.r_)(e.getRole())
          }
        }),
        Object.defineProperty(this, "setRole", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            i.role = e
          }
        }),
        Object.defineProperty(this, "updateRole", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return re(i, void 0, void 0, (function() {
              return ie(this, (function(t) {
                switch (t.label) {
                case 0:
                  return [4, this.groupStore.wmpGroupsClient.updateGroupMemberRole(this.membershipStore.group.identifier, this.memberIdentifier, e)];
                case 1:
                  return t.sent(),
                  this.setRole(e),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "removeMembership", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return re(i, void 0, void 0, (function() {
              return ie(this, (function(e) {
                switch (e.label) {
                case 0:
                  return [4, this.groupStore.wmpGroupsClient.removeGroupMember(this.membershipStore.group.identifier, this.memberIdentifier)];
                case 1:
                  return e.sent(),
                  this.membershipStore.deleteMembership(this.memberIdentifier),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        (0,
        r.ky)(this)
      }
      return Object.defineProperty(e.prototype, "member", {
        get: function() {
          return this.groupStore.userStore.findOrCreateProfile(this.memberIdentifier.id)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "color", {
        get: function() {
          return p.Tz[Math.abs(function(e) {
            for (var t = 0, n = 0; n < e.length; n++)
              t = Math.imul(31, t) + e.charCodeAt(n) | 0;
            return t
          }(this.member.identifier.toUniqueString())) % p.Tz.length]
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }(), ae = function() {
      function e(e, t) {
        Object.defineProperty(this, "group", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "groupStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "membershipsMap", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new Map
        }),
        (0,
        r.ky)(this)
      }
      return Object.defineProperty(e.prototype, "memberships", {
        get: function() {
          return Array.from(this.membershipsMap.values())
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "sortedMemberships", {
        get: function() {
          return Array.from(this.memberships).sort((function(e, t) {
            return e.member.name.localeCompare(t.member.name)
          }
          ))
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "currentUserMembership", {
        get: function() {
          return this.findMembership(this.groupStore.currentUser.identifier)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "toJson", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return this.memberships.map((function(e) {
            return {
              role: e.role,
              member: e.member.identifier.toJson()
            }
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "setFromJson", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = this;
          this.membershipsMap.clear(),
          e.forEach((function(e) {
            t.findOrCreateMembership(m.W.getIdentifier(e.member)).setFromJson(e)
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "toWmpMembershipProfileList", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return this.memberships.map((function(e) {
            return (new ee.MembershipProfile).setMembership(e.toWmpMembership())
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "setFromWmpMembershipProfileList", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = this;
          e.forEach((function(e) {
            var n = (0,
            h.N)(e.getMembership(), "GroupMembershipStore.setFromWmpMembershipProfileList: no membership found");
            t.setFromWmpMembership(n)
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "setFromWmpMembership", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = (0,
          h.N)(e.getMemberId(), "GroupMembershipStore.setFromWmpMembership: no member found");
          this.findOrCreateMembership(m.W.fromWmpIdentifier(t)).setFromWmpMembership(e)
        }
      }),
      Object.defineProperty(e.prototype, "setFromWmpMembersRoleUpdated", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          var n = this;
          e.forEach((function(e) {
            n.findOrCreateMembership(m.W.fromWmpIdentifier(e)).setRole((0,
            f.r_)(t))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "setFromWmpAddedMembersList", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = this;
          e.forEach((function(e) {
            t.createMembership(m.W.fromWmpIdentifier(e))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "setFromWmpRemovedMembersList", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = this;
          e.forEach((function(e) {
            t.deleteMembership(m.W.fromWmpIdentifier(e))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "setFromWmpUpdatedMemberships", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = this;
          e.forEach((function(e) {
            t.setFromWmpMembership(e)
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "setMembership", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.membershipsMap.set(e.member.identifier, e)
        }
      }),
      Object.defineProperty(e.prototype, "deleteMembership", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.membershipsMap.delete(e)
        }
      }),
      Object.defineProperty(e.prototype, "createMembership", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = new oe(this.groupStore,this,e);
          return this.setMembership(t),
          t
        }
      }),
      Object.defineProperty(e.prototype, "findMembership", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return this.membershipsMap.get(e)
        }
      }),
      Object.defineProperty(e.prototype, "findOrCreateMembership", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t;
          return null !== (t = this.findMembership(e)) && void 0 !== t ? t : this.createMembership(e)
        }
      }),
      e
    }(), se = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }, le = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }, ue = function() {
      function e(e, t) {
        var n = this;
        Object.defineProperty(this, "groupStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "id", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "type", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: H.pq.Group
        }),
        Object.defineProperty(this, "name", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: ""
        }),
        Object.defineProperty(this, "photoUrl", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "description", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: ""
        }),
        Object.defineProperty(this, "invitationUrl", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "membershipStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new ae(this,this.groupStore)
        }),
        Object.defineProperty(this, "loadInfo", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return se(n, void 0, void 0, (function() {
              var e;
              return le(this, (function(t) {
                switch (t.label) {
                case 0:
                  return [4, this.groupStore.profileService.getProfileInfo(this.identifier)];
                case 1:
                  return e = t.sent(),
                  this.setFromWmpProfileInfo(e),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        (0,
        r.ky)(this)
      }
      return Object.defineProperty(e.prototype, "identifier", {
        get: function() {
          return m.W.getIdentifier(this)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "toJson", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return {
            identifier: this.identifier.toJson(),
            name: this.name,
            photoUrl: this.photoUrl,
            description: this.description,
            memberships: this.membershipStore.toJson()
          }
        }
      }),
      Object.defineProperty(e.prototype, "setFromJson", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.setName(e.name),
          this.setPhotoUrl(e.photoUrl),
          this.setDescription(e.description),
          this.setInvitationUrl(e.invitationUrl),
          this.membershipStore.setFromJson(e.memberships)
        }
      }),
      Object.defineProperty(e.prototype, "toWmpProfileInfo", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          var e = (new ee.ProfileInfo.GroupInfo).setMembershipsProfilesList(this.membershipStore.toWmpMembershipProfileList());
          this.invitationUrl && e.setInvitation((new te.Invitation).setInvitationLink((new te.InvitationLink).setInvitationUri(this.invitationUrl)));
          var t = new ee.ProfileInfo;
          return t.setId(this.identifier.toWmpIdentifier()).setName(this.name).setDescription(this.description),
          this.photoUrl && t.setImageUrl(this.photoUrl),
          t.setGroupInfo(e),
          t
        }
      }),
      Object.defineProperty(e.prototype, "setFromWmpProfileInfo", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t, n;
          this.setName(e.getName()),
          this.setPhotoUrl(e.getImageUrl()),
          this.setDescription(e.getDescription()),
          this.setFromWmpInvitation(null === (t = e.getGroupInfo()) || void 0 === t ? void 0 : t.getInvitation());
          var r = null === (n = e.getGroupInfo()) || void 0 === n ? void 0 : n.getMembershipsProfilesList();
          r && r.length > 0 && (this.membershipStore.setFromWmpMembershipProfileList(r),
          this.setFromMembershipProfileList(r))
        }
      }),
      Object.defineProperty(e.prototype, "setFromMembershipProfileList", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = this;
          e.forEach((function(e) {
            var n = (0,
            h.N)(e.getProfile(), "GroupMembershipStore.setFromWmpMembershipProfileList: no profile found")
              , r = (0,
            h.N)(n.getId(), "GroupMembershipStore.setFromWmpMembershipProfileList: no profile identifier found");
            t.groupStore.userStore.findOrCreateProfile(r.getId()).setFromWmpProfileInfo(n)
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "setFromWmpGroupUpdate", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t, n, r, i, o, a;
          switch (e.getPayloadCase()) {
          case u.GroupUpdate.PayloadCase.ATTRIBUTES_UPDATED:
            var s = null === (t = e.getAttributesUpdated()) || void 0 === t ? void 0 : t.getGroupAttributes();
            s && this.setFromWmpGroupAttributes(s);
            break;
          case u.GroupUpdate.PayloadCase.MEMBERS_ADDED:
            var l = (null === (n = e.getMembersAdded()) || void 0 === n ? void 0 : n.getMembersList()) || [];
            this.membershipStore.setFromWmpAddedMembersList(l);
            break;
          case u.GroupUpdate.PayloadCase.MEMBERS_REMOVED:
            var c = (null === (r = e.getMembersRemoved()) || void 0 === r ? void 0 : r.getMembersList()) || [];
            this.membershipStore.setFromWmpRemovedMembersList(c);
            break;
          case u.GroupUpdate.PayloadCase.MEMBERS_ROLE_UPDATED:
            var f = (null === (i = e.getMembersRoleUpdated()) || void 0 === i ? void 0 : i.getMembersList()) || []
              , d = (0,
            h.N)(null === (o = e.getMembersRoleUpdated()) || void 0 === o ? void 0 : o.getRole(), "GroupMembershipStore.setFromWmpGroupUpdate: no role found");
            this.membershipStore.setFromWmpMembersRoleUpdated(f, d);
            break;
          case u.GroupUpdate.PayloadCase.INVITATION_UPDATED:
            this.setFromWmpInvitation(null === (a = e.getInvitationUpdated()) || void 0 === a ? void 0 : a.getInvitation())
          }
        }
      }),
      Object.defineProperty(e.prototype, "setFromWmpGroupAttributes", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          e.hasName() && this.setName(e.getName()),
          e.hasImageUrl() && this.setPhotoUrl(e.getImageUrl()),
          e.hasDescription() && this.setDescription(e.getDescription())
        }
      }),
      Object.defineProperty(e.prototype, "setFromWmpInvitation", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t, n = null === (t = null == e ? void 0 : e.getInvitationLink()) || void 0 === t ? void 0 : t.getInvitationUri();
          this.setInvitationUrl(n)
        }
      }),
      Object.defineProperty(e.prototype, "setName", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.name = e
        }
      }),
      Object.defineProperty(e.prototype, "setPhotoUrl", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.photoUrl = e
        }
      }),
      Object.defineProperty(e.prototype, "setDescription", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.description = e
        }
      }),
      Object.defineProperty(e.prototype, "setInvitationUrl", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.invitationUrl = e
        }
      }),
      Object.defineProperty(e.prototype, "leave", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return se(this, void 0, void 0, (function() {
            return le(this, (function(e) {
              switch (e.label) {
              case 0:
                return [4, this.groupStore.wmpGroupsClient.removeGroupMember(this.identifier, this.groupStore.currentUser.identifier)];
              case 1:
                return e.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "updateDescription", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return se(this, void 0, void 0, (function() {
            return le(this, (function(t) {
              switch (t.label) {
              case 0:
                return [4, this.groupStore.wmpGroupsClient.updateGroupDescription(this.identifier, e)];
              case 1:
                return t.sent(),
                this.setDescription(e),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "banUser", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return se(this, void 0, void 0, (function() {
            return le(this, (function(t) {
              switch (t.label) {
              case 0:
                return [4, this.groupStore.wmpGroupsClient.banUserFromGroup(this.identifier, e)];
              case 1:
                return t.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      e
    }(), ce = function() {
      function e(e, t, n, i) {
        var o = this;
        Object.defineProperty(this, "profileService", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "wmpGroupsClient", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "userStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: n
        }),
        Object.defineProperty(this, "currentUser", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: i
        }),
        Object.defineProperty(this, "groupsMap", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new Map
        }),
        Object.defineProperty(this, "setProfile", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            o.groupsMap.set(e.id, e)
          }
        }),
        Object.defineProperty(this, "createProfile", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t = new ue(o,e);
            return o.setProfile(t),
            t
          }
        }),
        Object.defineProperty(this, "findProfile", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return o.groupsMap.get(e)
          }
        }),
        Object.defineProperty(this, "findOrCreateProfile", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t;
            return null !== (t = o.findProfile(e)) && void 0 !== t ? t : o.createProfile(e)
          }
        }),
        Object.defineProperty(this, "deleteProfile", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return o.groupsMap.delete(e)
          }
        }),
        (0,
        r.ky)(this)
      }
      return Object.defineProperty(e.prototype, "profiles", {
        get: function() {
          return Array.from(this.groupsMap.values())
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }(), fe = n(3974), de = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }, pe = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }, be = function() {
      function e(e) {
        var t = this;
        Object.defineProperty(this, "wmpClient", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "getProfileInfoBatch", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "getProfileInfoBatchFn", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return de(t, void 0, void 0, (function() {
              var t, n;
              return pe(this, (function(r) {
                switch (r.label) {
                case 0:
                  return t = (0,
                  fe.uniqBy)(e.map((function(e) {
                    return e.args[0]
                  }
                  )), (function(e) {
                    return e.toUniqueString()
                  }
                  )),
                  [4, this.wmpClient.getProfileInfo(t)];
                case 1:
                  return n = r.sent(),
                  e.forEach((function(e) {
                    var t = m.W.getIdentifier(e.args[0])
                      , r = n.get(t);
                    r ? e.resolve(r) : e.reject(new Error("PROFILE_NOT_FOUND"))
                  }
                  )),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        this.getProfileInfoBatch = new k.E(this.getProfileInfoBatchFn)
      }
      return Object.defineProperty(e.prototype, "getProfileInfo", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return this.getProfileInfoBatch.push(e)
        }
      }),
      e
    }(), me = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }, he = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }, ve = function() {
      function e(e, t) {
        var n = this;
        Object.defineProperty(this, "userStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "id", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "type", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: H.pq.User
        }),
        Object.defineProperty(this, "name", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: ""
        }),
        Object.defineProperty(this, "photoUrl", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "loadInfo", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return me(n, void 0, void 0, (function() {
              var e;
              return he(this, (function(t) {
                switch (t.label) {
                case 0:
                  return [4, this.userStore.profileService.getProfileInfo(this.identifier)];
                case 1:
                  return e = t.sent(),
                  this.setFromWmpProfileInfo(e),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        (0,
        r.ky)(this)
      }
      return Object.defineProperty(e.prototype, "identifier", {
        get: function() {
          return m.W.getIdentifier(this)
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "toJson", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return {
            identifier: this.identifier.toJson(),
            name: this.name,
            photoUrl: this.photoUrl
          }
        }
      }),
      Object.defineProperty(e.prototype, "setFromJson", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.name = e.name,
          this.photoUrl = e.photoUrl
        }
      }),
      Object.defineProperty(e.prototype, "toWmpProfileInfo", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          var e = new ee.ProfileInfo;
          return e.setId(this.identifier.toWmpIdentifier()).setName(this.name),
          this.photoUrl && e.setImageUrl(this.photoUrl),
          e
        }
      }),
      Object.defineProperty(e.prototype, "setFromWmpProfileInfo", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.name = e.getName(),
          this.photoUrl = e.getImageUrl()
        }
      }),
      e
    }(), ge = function() {
      function e(e) {
        var t = this;
        Object.defineProperty(this, "profileService", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "usersMap", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new Map
        }),
        Object.defineProperty(this, "setProfile", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            t.usersMap.set(e.id, e)
          }
        }),
        Object.defineProperty(this, "createProfile", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var n = new ve(t,e);
            return t.setProfile(n),
            n
          }
        }),
        Object.defineProperty(this, "findProfile", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return t.usersMap.get(e)
          }
        }),
        Object.defineProperty(this, "findOrCreateProfile", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var n;
            return null !== (n = t.findProfile(e)) && void 0 !== n ? n : t.createProfile(e)
          }
        }),
        Object.defineProperty(this, "deleteProfile", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return t.usersMap.delete(e)
          }
        }),
        (0,
        r.ky)(this)
      }
      return Object.defineProperty(e.prototype, "profiles", {
        get: function() {
          return Array.from(this.usersMap.values())
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }(), ye = function(e, t, n) {
      var i = this;
      Object.defineProperty(this, "wmpClient", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: e
      }),
      Object.defineProperty(this, "wmpGroupsClient", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: t
      }),
      Object.defineProperty(this, "profileService", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: new be(this.wmpClient)
      }),
      Object.defineProperty(this, "userStore", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: void 0
      }),
      Object.defineProperty(this, "groupStore", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: void 0
      }),
      Object.defineProperty(this, "currentUser", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: void 0
      }),
      Object.defineProperty(this, "storesMap", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: void 0
      }),
      Object.defineProperty(this, "getStore", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return i.storesMap.get(e)
        }
      }),
      Object.defineProperty(this, "createProfile", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return i.getStore(e.type).createProfile(e.id)
        }
      }),
      Object.defineProperty(this, "findProfile", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return i.getStore(e.type).findProfile(e.id)
        }
      }),
      Object.defineProperty(this, "findOrCreateProfile", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return i.getStore(e.type).findOrCreateProfile(e.id)
        }
      }),
      Object.defineProperty(this, "deleteProfile", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: function(e) {
          i.getStore(e.type).deleteProfile(e.id)
        }
      }),
      this.userStore = new ge(this.profileService),
      this.currentUser = this.userStore.createProfile(n),
      this.groupStore = new ce(this.profileService,this.wmpGroupsClient,this.userStore,this.currentUser),
      this.storesMap = Object.freeze(new Map([[H.pq.User, this.userStore], [H.pq.Group, this.groupStore]])),
      (0,
      r.ky)(this)
    }, we = n(6791), Ee = n(6755), Oe = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }, Se = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }, Pe = function(e, t, n) {
      if (n || 2 === arguments.length)
        for (var r, i = 0, o = t.length; i < o; i++)
          !r && i in t || (r || (r = Array.prototype.slice.call(t, 0, i)),
          r[i] = t[i]);
      return e.concat(r || Array.prototype.slice.call(t))
    }, je = (Object.freeze(((ne = {})[H.p1.Read] = H.rJ.Read,
    ne[H.p1.Received] = H.rJ.Received,
    ne)),
    function() {
      function e(e, t, n, i, o) {
        var a = this;
        Object.defineProperty(this, "wmpClient", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "messageStreamService", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "report", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: n
        }),
        Object.defineProperty(this, "profileStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: i
        }),
        Object.defineProperty(this, "ready", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: o
        }),
        Object.defineProperty(this, "unreadMessagesAbsoluteNumber", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: 0
        }),
        Object.defineProperty(this, "fullyLoaded", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: !1
        }),
        Object.defineProperty(this, "conversationsMap", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new Map
        }),
        Object.defineProperty(this, "loadHistoryBatchPromise", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "unreadCountReactionDisposer", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "readTimestamp", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "setConversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            a.conversationsMap.set(e.destination.identifier, e)
          }
        }),
        Object.defineProperty(this, "createConversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t = new Ee.ri(a,m.W.getIdentifier(e));
            return t.bootstrap(),
            a.setConversation(t),
            t
          }
        }),
        Object.defineProperty(this, "findConversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return a.conversationsMap.get(m.W.getIdentifier(e))
          }
        }),
        Object.defineProperty(this, "findOrCreateConversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t;
            return null !== (t = a.findConversation(e)) && void 0 !== t ? t : a.createConversation(e)
          }
        }),
        Object.defineProperty(this, "deleteConversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t = a.findConversation(e);
            return !!t && (t.dispose(),
            a.conversationsMap.delete(t.destination.identifier),
            a.profileStore.deleteProfile(e),
            !0)
          }
        }),
        Object.defineProperty(this, "setUnreadMessagesAbsoluteNumber", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            a.unreadMessagesAbsoluteNumber = e
          }
        }),
        Object.defineProperty(this, "setFullyLoaded", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            a.fullyLoaded = e
          }
        }),
        Object.defineProperty(this, "applyWmpConversationHistory", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            a.readTimestamp = e.readTimestamp,
            a.setFullyLoaded(e.fullyLoaded),
            e.conversations.forEach((function(e) {
              var t = (0,
              f.E_)((0,
              h.N)(e.getDestinationId(), "ConversationStore.applyWmpConversationHistory: no destination found"));
              a.findOrCreateConversation(t).setFromWmpConversationItem(e)
            }
            ))
          }
        }),
        Object.defineProperty(this, "applyWmpMessage", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t = (0,
            f.E_)((0,
            h.N)(e.getDestinationId(), "ConversationStore.findOrCreateConversationFromWmpMessage: no destination found"))
              , n = (0,
            f.E_)((0,
            h.N)(e.getSenderId(), "ConversationStore.findOrCreateConversationFromWmpMessage: no sender found"))
              , r = a.profileStore.currentUser.identifier.equalsTo(t) ? n : t;
            e.getType() === u.Message.Type.HIDE_CONVERSATION ? a.deleteConversation(r) : a.findOrCreateConversation(r).applyWmpMessage(e)
          }
        }),
        Object.defineProperty(this, "applyWmpMessageFromStream", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            var t;
            e.getTimestamp() > (null !== (t = a.readTimestamp) && void 0 !== t ? t : 1 / 0) && a.applyWmpMessage(e)
          }
        }),
        Object.defineProperty(this, "bootstrap", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return Oe(a, void 0, void 0, (function() {
              return Se(this, (function(e) {
                switch (e.label) {
                case 0:
                  return [4, this.loadUnreadMessagesAbsoluteNumber()];
                case 1:
                  return e.sent(),
                  [4, this.loadHistoryBatch()];
                case 2:
                  return e.sent(),
                  this.unreadCountReactionDisposer || (this.unreadCountReactionDisposer = this.createUnreadCountReaction()),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "createUnreadCountReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return (0,
            r.U5)((function() {
              return {
                unreadMessagesAbsoluteNumber: a.conversations.reduce((function(e, t) {
                  return e + t.unreadMessagesAbsoluteNumber
                }
                ), 0)
              }
            }
            ), (function(e, t) {
              var n = e.unreadMessagesAbsoluteNumber - t.unreadMessagesAbsoluteNumber;
              a.setUnreadMessagesAbsoluteNumber(a.unreadMessagesAbsoluteNumber + n)
            }
            ))
          }
        }),
        Object.defineProperty(this, "dispose", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            var e;
            null === (e = a.unreadCountReactionDisposer) || void 0 === e || e.call(a),
            a.unreadCountReactionDisposer = void 0
          }
        }),
        Object.defineProperty(this, "loadUnreadMessagesAbsoluteNumber", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return Oe(a, void 0, void 0, (function() {
              var e;
              return Se(this, (function(t) {
                switch (t.label) {
                case 0:
                  return [4, this.wmpClient.getUnreadMessagesCount({
                    readTimestamp: this.readTimestamp
                  })];
                case 1:
                  return e = t.sent(),
                  this.readTimestamp = e.readTimestamp,
                  this.setUnreadMessagesAbsoluteNumber(e.unreadMessagesCount),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "loadHistoryBatch", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            if (!a.fullyLoaded)
              return a.loadHistoryBatchPromise || (a.loadHistoryBatchPromise = a.createLoadHistoryBatchPromise()),
              a.loadHistoryBatchPromise
          }
        }),
        Object.defineProperty(this, "createLoadHistoryBatchPromise", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return Oe(a, void 0, void 0, (function() {
              var e, t;
              return Se(this, (function(n) {
                switch (n.label) {
                case 0:
                  return e = Math.min.apply(Math, Pe([1 / 0], this.conversations.map((function(e) {
                    var t;
                    return null !== (t = e.streamStore.messageStore.earliestMessageTimestamp) && void 0 !== t ? t : 1 / 0
                  }
                  )), !1)),
                  [4, this.wmpClient.getConversationHistory({
                    readTimestamp: this.readTimestamp,
                    untilTimestamp: e === 1 / 0 ? void 0 : e
                  })];
                case 1:
                  return t = n.sent(),
                  this.applyWmpConversationHistory(t),
                  this.loadHistoryBatchPromise = void 0,
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        (0,
        r.ky)(this, {
          loadHistoryBatchPromise: !1,
          unreadCountReactionDisposer: !1,
          readTimestamp: !1
        })
      }
      return Object.defineProperty(e.prototype, "conversations", {
        get: function() {
          return Array.from(this.conversationsMap.values())
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "sortedConversations", {
        get: function() {
          return Pe([], this.conversations, !0).sort((function(e, t) {
            var n, r;
            return (null !== (n = t.sortTimestamp) && void 0 !== n ? n : 0) - (null !== (r = e.sortTimestamp) && void 0 !== r ? r : 0)
          }
          ))
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "unreadConversationsNumber", {
        get: function() {
          return this.conversations.filter((function(e) {
            return e.unreadMessagesAbsoluteNumber > 0
          }
          )).length
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }()), Me = n(1060), Ce = n(7287), Ie = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }, Re = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }, _e = function() {
      function e(e, t, n) {
        Object.defineProperty(this, "deviceId", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "appIdentifier", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: n
        }),
        Object.defineProperty(this, "groupsClient", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        });
        var r = "/".concat(e.toLowerCase(), "-wmp");
        this.groupsClient = new Ce.GroupsPromiseClient(r)
      }
      return Object.defineProperty(e.prototype, "updateGroupDescription", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          return Ie(this, void 0, void 0, (function() {
            var n, r;
            return Re(this, (function(i) {
              switch (i.label) {
              case 0:
                return n = (new te.GroupAttributes).setDescription(t),
                r = (new Me.UpdateGroupRequest).setHeader(this.wmpRequestHeader()).setGroupId(e.toWmpIdentifier()).setGroupAttributes(n),
                [4, this.groupsClient.updateGroup(r, (0,
                f.GZ)(d.N.UpdateGroupDescription))];
              case 1:
                return i.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "updateGroupMemberRole", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t, n) {
          return Ie(this, void 0, void 0, (function() {
            var r;
            return Re(this, (function(i) {
              switch (i.label) {
              case 0:
                return r = (new Me.SetGroupMembersRoleRequest).setHeader(this.wmpRequestHeader()).setGroupId(e.toWmpIdentifier()).setMemberIdsList([(0,
                f.cJ)(t)]).setRole(f.Wk[n]),
                [4, this.groupsClient.setGroupMembersRole(r, (0,
                f.GZ)(d.N.UpdateGroupMemberRole))];
              case 1:
                return i.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "removeGroupMember", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          return Ie(this, void 0, void 0, (function() {
            var n;
            return Re(this, (function(r) {
              switch (r.label) {
              case 0:
                return n = (new Me.RemoveGroupMembersRequest).setHeader(this.wmpRequestHeader()).setGroupId(e.toWmpIdentifier()).setMembersIdsList([t.toWmpIdentifier()]),
                [4, this.groupsClient.removeGroupMembers(n, (0,
                f.GZ)(d.N.RemoveGroupMember))];
              case 1:
                return r.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "banUserFromGroup", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          return Ie(this, void 0, void 0, (function() {
            var n;
            return Re(this, (function(r) {
              switch (r.label) {
              case 0:
                return n = (new Me.BanUserFromGroupRequest).setHeader(this.wmpRequestHeader()).setGroupId(e.toWmpIdentifier()).setUserId(t.toWmpIdentifier()),
                [4, this.groupsClient.banUserFromGroup(n, (0,
                f.GZ)(d.N.BanUserFromGroup))];
              case 1:
                return r.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "getGroupPreviewByInvitation", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return Ie(this, void 0, void 0, (function() {
            var t;
            return Re(this, (function(n) {
              switch (n.label) {
              case 0:
                return t = (new Me.GetGroupPreviewByInvitationRequest).setHeader(this.wmpRequestHeader()).setInvitationId((new te.InvitationId).setInvitationId(e)),
                [4, this.groupsClient.getGroupPreviewByInvitation(t, (0,
                f.GZ)(d.N.GetGroupPreviewByInvitation)).then((function(e) {
                  var t = (0,
                  h.N)(e.getGroupAttributes(), "Unexpected response: groupAttributes are empty")
                    , n = (0,
                  h.N)(e.getGroupId(), "Unexpected response: groupId is not defined").getId()
                    , r = e.getMembersCount()
                    , i = e.getIsGroupMember()
                    , o = e.getIsGroupFull();
                  return {
                    id: n,
                    name: t.getName(),
                    description: t.getDescription(),
                    photoUrl: t.getImageUrl(),
                    membersCount: r,
                    isGroupMember: i,
                    isGroupFull: o
                  }
                }
                ))];
              case 1:
                return [2, n.sent()]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "joinGroupViaInvitation", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return Ie(this, void 0, void 0, (function() {
            var t;
            return Re(this, (function(n) {
              switch (n.label) {
              case 0:
                return t = (new Me.JoinGroupViaInvitationRequest).setHeader(this.wmpRequestHeader()).setInvitationId((new te.InvitationId).setInvitationId(e)),
                [4, this.groupsClient.joinGroupViaInvitation(t, (0,
                f.GZ)(d.N.JoinGroupViaInvitation))];
              case 1:
                return n.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "wmpRequestHeader", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return (0,
          f.bs)(this.deviceId, this.appIdentifier)
        }
      }),
      e
    }(), Te = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }, Ne = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }, Ae = function(e, t) {
      var n = {};
      for (var r in e)
        Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
      if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
        var i = 0;
        for (r = Object.getOwnPropertySymbols(e); i < r.length; i++)
          t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]])
      }
      return n
    }, ke = function() {
      function e(e, t, n, i, o, a) {
        void 0 === a && (a = {});
        var s, l, u, c, f = this;
        Object.defineProperty(this, "geoEnv", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "userId", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "appIdentifier", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: n
        }),
        Object.defineProperty(this, "webEvents", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: i
        }),
        Object.defineProperty(this, "report", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: o
        }),
        Object.defineProperty(this, "wmpClient", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "wmpGroupsClient", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "tachyonClient", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "visibilityChangeService", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "deviceId", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "version", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "ready", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "profileStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "conversationStore", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "settings", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new $(this)
        }),
        Object.defineProperty(this, "uiState", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "messageStreamService", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "localStorageSync", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new L("chatState",(function() {
            return f.toCacheJson()
          }
          ))
        }),
        Object.defineProperty(this, "sdkMessageService", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: new V(this)
        }),
        Object.defineProperty(this, "toCacheJson", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return {
              version: f.version,
              deviceId: f.deviceId,
              userId: f.userId,
              uiState: f.uiState.toCacheJson()
            }
          }
        }),
        Object.defineProperty(this, "setFromCacheJson", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            f.uiState.setFromCacheJson(e.uiState)
          }
        }),
        Object.defineProperty(this, "bootstrap", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return Te(f, void 0, void 0, (function() {
              var e;
              return Ne(this, (function(t) {
                switch (t.label) {
                case 0:
                  this.ready.set(!1, we.$.Pending),
                  t.label = 1;
                case 1:
                  return t.trys.push([1, 4, , 5]),
                  [4, this.messageStreamService.getRegistrationInfo()];
                case 2:
                  return t.sent(),
                  [4, this.bootstrapAsyncServices()];
                case 3:
                  return t.sent(),
                  this.bootstrapSyncServices(),
                  this.ready.set(!0, we.$.Success),
                  [3, 5];
                case 4:
                  return e = t.sent(),
                  this.ready.set(!1, we.$.Error),
                  this.report(e, x.w.BOOTSTRAP_CHATSTORE),
                  [3, 5];
                case 5:
                  return [2]
                }
              }
              ))
            }
            ))
          }
        }),
        Object.defineProperty(this, "startTracking", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            (0,
            r.EH)((function() {
              (0,
              A.oC)(f.webEvents, f.report, {
                visible: f.uiState.chatOpen,
                conversationSelected: !!f.uiState.selectedConversation,
                conversationNumber: f.conversationStore.conversations.length,
                unreadConversationsNumber: f.conversationStore.unreadConversationsNumber,
                unreadMessagesNumber: f.conversationStore.unreadMessagesAbsoluteNumber
              })
            }
            ))
          }
        }),
        Object.defineProperty(this, "dispose", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            f.localStorageSync.stopAutoSync(),
            f.messageStreamService.stopListening(),
            f.sdkMessageService.dispose(),
            f.visibilityChangeService.stopListening(),
            f.conversationStore.dispose()
          }
        }),
        this.ready = new we.O(!1);
        var d = this.readCacheOnConstruct()
          , p = d.cache
          , b = d.deviceId
          , m = d.version;
        this.deviceId = b,
        this.version = m,
        this.wmpClient = null !== (s = a.wmpClient) && void 0 !== s ? s : new y(e,this.userId,this.deviceId,this.appIdentifier,i,this.report),
        this.wmpGroupsClient = null !== (l = a.wmpGroupsClient) && void 0 !== l ? l : new _e(e,this.userId,this.appIdentifier),
        this.tachyonClient = null !== (u = a.tachyonClient) && void 0 !== u ? u : new T,
        this.messageStreamService = new D(this,i),
        this.visibilityChangeService = null !== (c = a.visibilityChangeService) && void 0 !== c ? c : new G,
        this.profileStore = new ye(this.wmpClient,this.wmpGroupsClient,this.userId),
        this.conversationStore = new je(this.wmpClient,this.messageStreamService,this.report,this.profileStore,this.ready),
        this.uiState = new Q(this.conversationStore),
        a.appMode && this.uiState.setAppMode(a.appMode),
        p && this.setFromCacheJson(p),
        (0,
        r.ky)(this)
      }
      return Object.defineProperty(e.prototype, "readCacheOnConstruct", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          var t = this.localStorageSync.readState();
          if (t) {
            var n = t.userId
              , r = t.deviceId
              , o = t.version
              , a = Ae(t, ["userId", "deviceId", "version"]);
            if (n === this.userId && o === e.version)
              return {
                deviceId: r,
                version: o,
                cache: a
              }
          }
          return {
            deviceId: (0,
            i.Z)(),
            version: e.version,
            cache: void 0
          }
        }
      }),
      Object.defineProperty(e.prototype, "bootstrapAsyncServices", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return Te(this, void 0, void 0, (function() {
            return Ne(this, (function(e) {
              switch (e.label) {
              case 0:
                return [4, this.conversationStore.bootstrap()];
              case 1:
                return e.sent(),
                [2]
              }
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "bootstrapSyncServices", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          var e = this;
          this.messageStreamService.startListening(),
          this.localStorageSync.startAutoSync(),
          this.sdkMessageService.init(),
          this.visibilityChangeService.listenForChange((function(t) {
            e.uiState.setPageVisible(t)
          }
          )),
          this.startTracking()
        }
      }),
      Object.defineProperty(e, "version", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: 2
      }),
      e
    }()
  }
  ,
  4295: (e,t,n)=>{
    "use strict";
    n.d(t, {
      W: ()=>i
    });
    var r = n(8819)
      , i = function() {
      function e(e, t) {
        Object.defineProperty(this, "type", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "id", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        })
      }
      return Object.defineProperty(e, "getIdentifierKey", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          return "".concat(e, "|").concat(t)
        }
      }),
      Object.defineProperty(e, "getIdentifier", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(t) {
          var n = t.type
            , r = t.id
            , i = this.getIdentifierKey(n, r)
            , o = this.identifierMap.get(i);
          return o || (o = new e(n,r),
          this.identifierMap.set(i, o)),
          o
        }
      }),
      Object.defineProperty(e, "fromWmpIdentifier", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return this.getIdentifier((0,
          r.E_)(e))
        }
      }),
      Object.defineProperty(e.prototype, "toJson", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return {
            type: this.type,
            id: this.id
          }
        }
      }),
      Object.defineProperty(e.prototype, "toUniqueString", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return "".concat(this.type, "|").concat(this.id)
        }
      }),
      Object.defineProperty(e.prototype, "toWmpIdentifier", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return (0,
          r.cJ)(this)
        }
      }),
      Object.defineProperty(e.prototype, "equalsTo", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          return this.type === e.type && this.id === e.id
        }
      }),
      Object.defineProperty(e, "identifierMap", {
        enumerable: !0,
        configurable: !0,
        writable: !0,
        value: new Map
      }),
      e
    }()
  }
  ,
  7766: (e,t,n)=>{
    "use strict";
    var r, i, o, a, s;
    n.d(t, {
      Tk: ()=>o,
      VC: ()=>i,
      p1: ()=>s,
      pq: ()=>r,
      rJ: ()=>a
    }),
    function(e) {
      e.User = "User",
      e.Group = "Group"
    }(r || (r = {})),
    function(e) {
      e.Admin = "Admin",
      e.Member = "Member"
    }(i || (i = {})),
    function(e) {
      e.Incoming = "INCOMING",
      e.Outgoing = "OUTGOING"
    }(o || (o = {})),
    function(e) {
      e[e.New = 0] = "New",
      e[e.Pending = 1] = "Pending",
      e[e.Sent = 2] = "Sent",
      e[e.SendingFailed = 3] = "SendingFailed",
      e[e.Received = 4] = "Received",
      e[e.Read = 5] = "Read"
    }(a || (a = {})),
    function(e) {
      e.Received = "Received",
      e.Read = "Read"
    }(s || (s = {}))
  }
  ,
  1169: (e,t,n)=>{
    "use strict";
    function r(e, t) {
      if (void 0 === e)
        throw new Error(t);
      return e
    }
    n.d(t, {
      N: ()=>r
    })
  }
  ,
  6677: (e,t,n)=>{
    "use strict";
    n.d(t, {
      E: ()=>a
    });
    var r = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , i = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , o = function() {
      function e(e, t, n) {
        var r = this;
        Object.defineProperty(this, "args", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "_resolve", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "_reject", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: n
        }),
        Object.defineProperty(this, "processed", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: !1
        }),
        Object.defineProperty(this, "resolve", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            r._resolve(e),
            r.processed = !0
          }
        }),
        Object.defineProperty(this, "reject", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            r._reject(e),
            r.processed = !0
          }
        })
      }
      return Object.defineProperty(e.prototype, "dispose", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          this.processed || this.reject(new Error("Batch push was not processed"))
        }
      }),
      e
    }()
      , a = function() {
      function e(e, t) {
        var n = void 0 === t ? {} : t
          , o = n.batchSize
          , a = void 0 === o ? 0 : o
          , s = n.delayMs
          , l = void 0 === s ? 0 : s
          , u = this;
        Object.defineProperty(this, "batchFn", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "pushes", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: []
        }),
        Object.defineProperty(this, "batchSize", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "delayMs", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "timeoutId", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "run", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            return r(u, void 0, void 0, (function() {
              var e, t;
              return i(this, (function(n) {
                switch (n.label) {
                case 0:
                  e = this.pushes,
                  this.pushes = [],
                  n.label = 1;
                case 1:
                  return n.trys.push([1, 3, , 4]),
                  [4, this.batchFn(e)];
                case 2:
                  return n.sent(),
                  [3, 4];
                case 3:
                  return t = n.sent(),
                  e.forEach((function(e) {
                    return e.reject(t)
                  }
                  )),
                  [2];
                case 4:
                  return e.forEach((function(e) {
                    return e.dispose()
                  }
                  )),
                  [2]
                }
              }
              ))
            }
            ))
          }
        }),
        this.batchSize = a,
        this.delayMs = l
      }
      return Object.defineProperty(e.prototype, "push", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          for (var e = this, t = [], n = 0; n < arguments.length; n++)
            t[n] = arguments[n];
          return new Promise((function(n, r) {
            var i = new o(t,n,r);
            e.pushes.push(i),
            e.batchSize > 0 && e.pushes.length >= e.batchSize ? (window.clearTimeout(e.timeoutId),
            e.timeoutId = void 0,
            e.run()) : e.timeoutId || (e.timeoutId = window.setTimeout((function() {
              e.timeoutId = void 0,
              e.run()
            }
            ), e.delayMs))
          }
          ))
        }
      }),
      e
    }()
  }
  ,
  4656: (e,t,n)=>{
    "use strict";
    n.d(t, {
      IM: ()=>s,
      So: ()=>o,
      nU: ()=>i
    });
    var r = 3155328e5;
    function i(e) {
      return e < r
    }
    function o(e) {
      return new Date(e).getFullYear()
    }
    function a(e) {
      var t = new Date(e);
      return t.setHours(0, 0, 0, 0),
      t.getTime()
    }
    function s(e, t) {
      return a(e) !== a(t)
    }
  }
  ,
  4944: (e,t,n)=>{
    "use strict";
    n.d(t, {
      o: ()=>a
    });
    var r = n(9895);
    if (900 != n.j)
      var i = n(4656);
    var o = {
      time: {
        hour: "numeric",
        minute: "numeric"
      },
      date: {
        day: "numeric",
        month: "short",
        year: "numeric"
      },
      dayMonth: {
        day: "numeric",
        month: "short"
      },
      dayMonthYear: {
        day: "numeric",
        month: "short",
        year: "numeric"
      },
      day: {
        day: "numeric"
      },
      monthName: {
        month: "short"
      },
      weekday: {
        weekday: "long"
      }
    };
    function a(e, t) {
      return void 0 === t && (t = "time"),
      (0,
      i.nU)(e) ? (console.error("Invalid input: ".concat(e, ". Expecting milliseconds, possibly received seconds")),
      console.trace(),
      "##:##") : new Intl.DateTimeFormat(r.ClientTranslator.locale,o[t]).format(e)
    }
  }
  ,
  3682: (e,t,n)=>{
    "use strict";
    n.d(t, {
      C: ()=>i
    });
    var r = n(9739)
      , i = 900 != n.j ? r.gon : null
  }
  ,
  6916: (e,t,n)=>{
    "use strict";
    n.d(t, {
      a: ()=>u
    });
    var r = n(7766)
      , i = n(449)
      , o = n(3974)
      , a = n(1529)
      , s = function() {
      return s = Object.assign || function(e) {
        for (var t, n = 1, r = arguments.length; n < r; n++)
          for (var i in t = arguments[n])
            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        return e
      }
      ,
      s.apply(this, arguments)
    }
      , l = function(e, t) {
      var n = {};
      for (var r in e)
        Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
      if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
        var i = 0;
        for (r = Object.getOwnPropertySymbols(e); i < r.length; i++)
          t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]])
      }
      return n
    }
      , u = function() {
      function e(e, t) {
        var n = this;
        Object.defineProperty(this, "chatStoreWrapper", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "conversation", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        }),
        Object.defineProperty(this, "createVirtualMessageMock", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            void 0 === e && (e = {});
            var t = e.id
              , o = e.senderId
              , a = e.direction
              , u = l(e, ["id", "senderId", "direction"])
              , c = new i.XZ(n.conversation,t);
            return c.setFromJson(s(s(s({}, c.toJson()), u), {
              sender: {
                id: o || n.generateMessageSenderId(a),
                type: r.pq.User
              }
            })),
            c
          }
        }),
        Object.defineProperty(this, "createMessageMock", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            void 0 === e && (e = {});
            var t = n.createVirtualMessageMock(e);
            return n.streamStore.messageStore.setMessage(t),
            t
          }
        }),
        Object.defineProperty(this, "createMessageMocks", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return void 0 === e && (e = []),
            e.map((function(e) {
              return n.createMessageMock(e)
            }
            ))
          }
        }),
        Object.defineProperty(this, "createSystemMessageMock", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            void 0 === e && (e = {});
            var t = new a.j(n.conversation,e.id);
            return e.timestamp && t.setTimestamp(e.timestamp),
            e.components && t.setComponents(e.components),
            e.senderIdentifier && t.setSender(e.senderIdentifier),
            n.streamStore.messageStore.setMessage(t),
            t
          }
        }),
        Object.defineProperty(this, "generateMessageSenderId", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(e) {
            return e === r.Tk.Incoming ? n.conversation.isGroup() ? (0,
            o.sample)(n.conversation.destination.membershipStore.memberships.map((function(e) {
              return e.member.identifier.id
            }
            )).filter((function(e) {
              return e !== n.chatStoreWrapper.currentUser.identifier.id
            }
            ))) : n.conversation.destination.identifier.id : n.chatStoreWrapper.currentUser.identifier.id
          }
        })
      }
      return Object.defineProperty(e.prototype, "destination", {
        get: function() {
          return this.conversation.destination
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "streamStore", {
        get: function() {
          return this.conversation.streamStore
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "unreadStore", {
        get: function() {
          return this.conversation.unreadStore
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "messageService", {
        get: function() {
          return this.conversation.messageService
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }()
  }
  ,
  2338: (e,t,n)=>{
    "use strict";
    n.d(t, {
      c: ()=>o
    });
    var r = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , i = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    }
      , o = function() {
      function e() {
        Object.defineProperty(this, "queue", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: []
        }),
        Object.defineProperty(this, "executing", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: !1
        })
      }
      return Object.defineProperty(e.prototype, "push", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          var t = this;
          return new Promise((function(n, o) {
            t.queue.push((function() {
              return r(t, void 0, void 0, (function() {
                var t, r;
                return i(this, (function(i) {
                  switch (i.label) {
                  case 0:
                    return i.trys.push([0, 2, , 3]),
                    [4, e()];
                  case 1:
                    return t = i.sent(),
                    n(t),
                    [3, 3];
                  case 2:
                    return r = i.sent(),
                    o(r),
                    [3, 3];
                  case 3:
                    return [2]
                  }
                }
                ))
              }
              ))
            }
            )),
            t.run().catch((function(e) {
              throw e
            }
            ))
          }
          ))
        }
      }),
      Object.defineProperty(e.prototype, "run", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return r(this, void 0, void 0, (function() {
            return i(this, (function(e) {
              switch (e.label) {
              case 0:
                if (this.executing || 0 === this.queue.length)
                  return [2];
                e.label = 1;
              case 1:
                return e.trys.push([1, , 3, 4]),
                this.executing = !0,
                [4, (0,
                this.queue.splice(0, 1)[0])()];
              case 2:
                return e.sent(),
                [3, 4];
              case 3:
                return this.executing = !1,
                [7];
              case 4:
                return [2, this.run()]
              }
            }
            ))
          }
          ))
        }
      }),
      e
    }()
  }
  ,
  3298: (e,t,n)=>{
    "use strict";
    n.d(t, {
      S: ()=>r
    });
    var r = function() {
      function e(e) {
        var t = this;
        Object.defineProperty(this, "createReaction", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "disposer", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "init", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.disposer || (t.disposer = t.createReaction())
          }
        }),
        Object.defineProperty(this, "dispose", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function() {
            t.disposer && (t.disposer(),
            t.disposer = void 0)
          }
        })
      }
      return Object.defineProperty(e.prototype, "active", {
        get: function() {
          return void 0 !== this.disposer
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }()
  }
  ,
  1715: (e,t,n)=>{
    "use strict";
    n.d(t, {
      V: ()=>o
    });
    var r = function(e, t, n, r) {
      return new (n || (n = Promise))((function(i, o) {
        function a(e) {
          try {
            l(r.next(e))
          } catch (e) {
            o(e)
          }
        }
        function s(e) {
          try {
            l(r.throw(e))
          } catch (e) {
            o(e)
          }
        }
        function l(e) {
          var t;
          e.done ? i(e.value) : (t = e.value,
          t instanceof n ? t : new n((function(e) {
            e(t)
          }
          ))).then(a, s)
        }
        l((r = r.apply(e, t || [])).next())
      }
      ))
    }
      , i = function(e, t) {
      var n, r, i, o, a = {
        label: 0,
        sent: function() {
          if (1 & i[0])
            throw i[1];
          return i[1]
        },
        trys: [],
        ops: []
      };
      return o = {
        next: s(0),
        throw: s(1),
        return: s(2)
      },
      "function" == typeof Symbol && (o[Symbol.iterator] = function() {
        return this
      }
      ),
      o;
      function s(s) {
        return function(l) {
          return function(s) {
            if (n)
              throw new TypeError("Generator is already executing.");
            for (; o && (o = 0,
            s[0] && (a = 0)),
            a; )
              try {
                if (n = 1,
                r && (i = 2 & s[0] ? r.return : s[0] ? r.throw || ((i = r.return) && i.call(r),
                0) : r.next) && !(i = i.call(r, s[1])).done)
                  return i;
                switch (r = 0,
                i && (s = [2 & s[0], i.value]),
                s[0]) {
                case 0:
                case 1:
                  i = s;
                  break;
                case 4:
                  return a.label++,
                  {
                    value: s[1],
                    done: !1
                  };
                case 5:
                  a.label++,
                  r = s[1],
                  s = [0];
                  continue;
                case 7:
                  s = a.ops.pop(),
                  a.trys.pop();
                  continue;
                default:
                  if (!(i = a.trys,
                  (i = i.length > 0 && i[i.length - 1]) || 6 !== s[0] && 2 !== s[0])) {
                    a = 0;
                    continue
                  }
                  if (3 === s[0] && (!i || s[1] > i[0] && s[1] < i[3])) {
                    a.label = s[1];
                    break
                  }
                  if (6 === s[0] && a.label < i[1]) {
                    a.label = i[1],
                    i = s;
                    break
                  }
                  if (i && a.label < i[2]) {
                    a.label = i[2],
                    a.ops.push(s);
                    break
                  }
                  i[2] && a.ops.pop(),
                  a.trys.pop();
                  continue
                }
                s = t.call(e, a)
              } catch (e) {
                s = [6, e],
                r = 0
              } finally {
                n = i = 0
              }
            if (5 & s[0])
              throw s[1];
            return {
              value: s[0] ? s[1] : void 0,
              done: !0
            }
          }([s, l])
        }
      }
    };
    function o(e) {
      return void 0 === e && (e = 0),
      r(this, void 0, void 0, (function() {
        return i(this, (function(t) {
          return [2, new Promise((function(t) {
            return setTimeout(t, e)
          }
          ))]
        }
        ))
      }
      ))
    }
  }
  ,
  33: (e,t,n)=>{
    "use strict";
    var r, i;
    n.d(t, {
      N: ()=>r,
      Y: ()=>i
    }),
    function(e) {
      e.SendMessage = "SEND_MESSAGE",
      e.SendReceipt = "SEND_RECEIPT",
      e.SendDelete = "SEND_DELETE",
      e.ListConversations = "LIST_CONVERSATIONS",
      e.ListMessages = "LIST_MESSAGES",
      e.AckMessages = "ACK_MESSAGES",
      e.GetMessagingProvider = "GET_MESSAGING_PROVIDER",
      e.GetProfileInfo = "GET_PROFILE_INFO",
      e.GetUserSettings = "GET_USER_SETTINGS",
      e.UpdateUserSettings = "UPDATE_USER_SETTINGS",
      e.UpdateGroupDescription = "UPDATE_GROUP_DESCRIPTION",
      e.UpdateGroupMemberRole = "UPDATE_GROUP_MEMBER_ROLE",
      e.RemoveGroupMember = "REMOVE_GROUP_MEMBER",
      e.BanUserFromGroup = "BAN_USER_FROM_GROUP",
      e.GetUnreadMessagesCount = "GET_UNREAD_MESSAGES_COUNT",
      e.GetGroupPreviewByInvitation = "GET_GROUP_PREVIEW_BY_INVITATION",
      e.JoinGroupViaInvitation = "JOIN_GROUP_VIA_INVITATION"
    }(r || (r = {})),
    function(e) {
      e.SERVER_REQUEST_RESULT = "SERVER_REQUEST_RESULT",
      e.CHAT_APP_LOADED = "CHAT_APP_LOADED",
      e.MESSAGING_SCREEN_SHOWN = "MESSAGING_SCREEN_SHOWN",
      e.CONVERSATION_LIST_SHOWN = "CONVERSATION_LIST_SHOWN",
      e.CHAT_MORE_ACTIONS_SHOWN = "CHAT_MORE_ACTIONS_SHOWN",
      e.MESSAGE_STREAM_CONNECTED = "MESSAGE_STREAM_CONNECTED",
      e.MESSAGE_STREAM_DISCONNECTED = "MESSAGE_STREAM_DISCONNECTED",
      e.CHAT_MORE_ACTIONS_CLICKED = "CHAT_MORE_ACTIONS_CLICKED",
      e.MESSAGING_SCREEN_CLICKED = "MESSAGING_SCREEN_CLICKED",
      e.CONVERSATION_LIST_CLICKED = "CONVERSATION_LIST_CLICKED",
      e.EMPTY_CONVERSATION_SHOWN = "EMPTY_CONVERSATION_SHOWN"
    }(i || (i = {}))
  }
  ,
  660: (e,t,n)=>{
    "use strict";
    n.d(t, {
      $m: ()=>p,
      Ho: ()=>b,
      Or: ()=>h,
      W4: ()=>r,
      X5: ()=>m,
      eF: ()=>f,
      oC: ()=>l,
      or: ()=>c,
      sI: ()=>d,
      wA: ()=>s,
      xx: ()=>u
    });
    var r, i = n(33), o = n(155), a = function(e, t, n) {
      e.track(n).catch((function(e) {
        return t(e, o.w.TRACK_WEB_EVENT)
      }
      ))
    }, s = function(e, t) {
      var n = document.referrer ? new URL(document.referrer).pathname : "";
      a(e, t, {
        event_name: i.Y.CHAT_APP_LOADED,
        params: {
          referrer: n
        }
      })
    }, l = function(e, t, n) {
      var r = n.conversationSelected ? i.Y.MESSAGING_SCREEN_SHOWN : i.Y.CONVERSATION_LIST_SHOWN;
      a(e, t, {
        event_name: r,
        params: {
          visible: n.visible,
          num_conversations: n.conversationNumber,
          num_unread_conversations: n.unreadConversationsNumber,
          num_unread_messages: n.unreadMessagesNumber
        }
      })
    }, u = function(e, t) {
      a(e, t, {
        event_name: i.Y.CHAT_MORE_ACTIONS_SHOWN,
        params: {}
      }),
      a(e, t, {
        event_name: i.Y.MESSAGING_SCREEN_CLICKED,
        params: {
          action: "OPTIONS"
        }
      })
    }, c = function(e, t, n) {
      a(e, t, {
        event_name: i.Y.CONVERSATION_LIST_CLICKED,
        params: {
          action: "CONVERSATION",
          other_user_name: n
        }
      })
    }, f = function(e, t, n) {
      a(e, t, {
        event_name: i.Y.MESSAGING_SCREEN_CLICKED,
        params: {
          action: n ? "SEND_KEYBOARD" : "SEND"
        }
      })
    }, d = function(e, t) {
      a(e, t, {
        event_name: i.Y.MESSAGING_SCREEN_CLICKED,
        params: {
          action: "RETRY"
        }
      })
    }, p = function(e, t) {
      a(e, t, {
        event_name: i.Y.MESSAGING_SCREEN_CLICKED,
        params: {
          action: "TEXT_BAR"
        }
      })
    }, b = function(e, t, n) {
      a(e, t, {
        event_name: i.Y.MESSAGE_STREAM_CONNECTED,
        params: {
          success: !n,
          error: n
        }
      })
    };
    !function(e) {
      e.Interrupt = "INTERRUPT",
      e.Expired = "EXPIRED",
      e.Error = "ERROR"
    }(r || (r = {}));
    var m = function(e, t, n, r) {
      a(e, t, {
        event_name: i.Y.MESSAGE_STREAM_DISCONNECTED,
        params: {
          reason: n,
          description: r
        }
      })
    }
      , h = function(e, t) {
      a(e, t, {
        event_name: i.Y.EMPTY_CONVERSATION_SHOWN,
        params: {}
      })
    }
  }
  ,
  8747: ()=>{
    "use strict";
    Promise.prototype.finally = Promise.prototype.finally || function(e) {
      var t = function(t) {
        return Promise.resolve(null == e ? void 0 : e()).then(t)
      };
      return this.then((function(e) {
        return t((function() {
          return e
        }
        ))
      }
      ), (function(e) {
        return t((function() {
          return Promise.reject(e)
        }
        ))
      }
      ))
    }
  }
  ,
  6791: (e,t,n)=>{
    "use strict";
    n.d(t, {
      $: ()=>r,
      O: ()=>o
    });
    var r, i = n(2885);
    !function(e) {
      e.Unknown = "Unknown",
      e.Pending = "Pending",
      e.Success = "Success",
      e.Error = "Error"
    }(r || (r = {}));
    var o = function() {
      function e(e, t) {
        Object.defineProperty(this, "_state", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "_value", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        this._value = e,
        this._state = null != t ? t : r.Unknown,
        (0,
        i.ky)(this)
      }
      return Object.defineProperty(e.prototype, "set", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e, t) {
          this._value = e,
          this._state = t
        }
      }),
      Object.defineProperty(e.prototype, "state", {
        get: function() {
          return this._state
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(e.prototype, "value", {
        get: function() {
          return this._value
        },
        enumerable: !1,
        configurable: !0
      }),
      e
    }()
  }
  ,
  6924: (e,t,n)=>{
    "use strict";
    n.d(t, {
      t: ()=>o,
      A: ()=>a
    });
    var r = function(e, t, n) {
      if (n || 2 === arguments.length)
        for (var r, i = 0, o = t.length; i < o; i++)
          !r && i in t || (r || (r = Array.prototype.slice.call(t, 0, i)),
          r[i] = t[i]);
      return e.concat(r || Array.prototype.slice.call(t))
    }
      , i = function() {
      function e(e, t) {
        Object.defineProperty(this, "name", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: e
        }),
        Object.defineProperty(this, "verbose", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: t
        })
      }
      return Object.defineProperty(e.prototype, "info", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          for (var e = [], t = 0; t < arguments.length; t++)
            e[t] = arguments[t];
          this.verbose && console.info.apply(console, r(["[".concat(this.name, "]")], e, !1))
        }
      }),
      e
    }()
      , o = new i("App",new URLSearchParams(window.location.search).has("verbose"))
      , a = new i("Wmp",new URLSearchParams(window.location.search).has("debugWmp"))
  }
  ,
  155: (e,t,n)=>{
    "use strict";
    var r;
    n.d(t, {
      w: ()=>r
    }),
    function(e) {
      e.INIT_CHAT_STORE = "INIT_CHAT_STORE",
      e.TRACK_WEB_EVENT = "TRACK_WEB_EVENT",
      e.BLOCK_CONTACT = "BLOCK_CONTACT",
      e.CLEAR_HISTORY = "CLEAR_HISTORY",
      e.UNBLOCK_CONTACT = "UNBLOCK_CONTACT",
      e.SUBMIT_MESSAGE_ON_ENTER = "SUBMIT_MESSAGE_ON_ENTER",
      e.SEND_MESSAGE_ON_FORM_SUBMIT = "SEND_MESSAGE_ON_FORM_SUBMIT",
      e.SEND_NEW_MESSAGE = "SEND_NEW_MESSAGE",
      e.LOAD_MESSAGES_BATCH = "LOAD_MESSAGES_BATCH",
      e.SEND_READ_RECEIPT = "SEND_READ_RECEIPT",
      e.ERROR_LINK_RESEND_MESSAGE = "ERROR_LINK_RESEND_MESSAGE",
      e.LOAD_MORE_CONVERSATIONS = "LOAD_MORE_CONVERSATIONS",
      e.HIDE_DIALOG = "HIDE_DIALOG",
      e.SHOW_DIALOG = "SHOW_DIALOG",
      e.LOAD_SETTINGS_FROM_SERVER = "LOAD_SETTINGS_FROM_SERVER",
      e.SAVE_SETTINGS = "SAVE_SETTINGS",
      e.BOOTSTRAP_CHATSTORE = "BOOTSTRAP_CHATSTORE",
      e.RECEIVE_STREAM_MESSAGE = "RECEIVE_STREAM_MESSAGE",
      e.LISTEN_AUTO_RECONNECT = "LISTEN_AUTO_RECONNECT",
      e.OPEN_CONVERSATION = "OPEN_CONVERSATION",
      e.TRACK_GRPC_CALL = "TRACK_GRPC_CALL",
      e.SEND_USER_MESSAGE = "SEND_USER_MESSAGE",
      e.UPDATE_USER_SETTINGS = "UPDATE_USER_SETTINGS",
      e.OLDER_GET_CONVERSATION_HISTORY = "OLDER_GET_CONVERSATION_HISTORY",
      e.LATEST_GET_CONVERSATION_HISTORY = "LATEST_GET_CONVERSATION_HISTORY",
      e.UNCAUGHT_ERROR = "UNCAUGHT_ERROR",
      e.UNHANDLED_PROMISE_REJECTION = "UNHANDLED_PROMISE_REJECTION",
      e.UPDATE_GROUP_DESCRIPTION = "UPDATE_GROUP_DESCRIPTION",
      e.UPDATE_GROUP_MEMBER_ROLE = "UPDATE_GROUP_MEMBER_ROLE",
      e.REMOVE_GROUP_MEMBER = "REMOVE_GROUP_MEMBER",
      e.INIT_MESSAGE_LIST = "INIT_MESSAGE_LIST",
      e.UNREAD_MESSAGES_ABSOLUTE_NUMBER = "UNREAD_MESSAGES_ABSOLUTE_NUMBER",
      e.LEAVE_GROUP = "LEAVE_GROUP"
    }(r || (r = {}))
  }
  ,
  7482: (e,t,n)=>{
    "use strict";
    n.d(t, {
      _: ()=>s,
      z: ()=>c
    });
    var r = n(9739)
      , i = n(5753)
      , o = n.n(i)
      , a = n(155)
      , s = function() {
      function e() {
        var e = this;
        Object.defineProperty(this, "userId", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: void 0
        }),
        Object.defineProperty(this, "report", {
          enumerable: !0,
          configurable: !0,
          writable: !0,
          value: function(t, n) {
            var i = [];
            if (i.push("User ".concat(e.userId)),
            i.push(n),
            t instanceof Error)
              i.push(t.message);
            else if (t && "object" == typeof t) {
              var o = JSON.stringify(t).slice(0, 1024);
              i.push(o)
            } else {
              o = String(t);
              i.push(o)
            }
            var a = new Error(i.join(" | "));
            t instanceof Error && (a.stack = t.stack),
            r.errorReporter.report(a).catch((function(e) {
              console.error("failed to report an error", e)
            }
            ))
          }
        })
      }
      return Object.defineProperty(e, "getInstance", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function() {
          return null == e.instance && (e.instance = new e),
          this.instance
        }
      }),
      Object.defineProperty(e.prototype, "setUserId", {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        value: function(e) {
          this.userId = e
        }
      }),
      e
    }()
      , l = 348 == n.j ? ["chrome-extension", "moz-extension", "webkit-masked-url"] : null;
    function u(e) {
      var t;
      try {
        for (var n = o().parse(e), r = 0, i = n; r < i.length; r++)
          for (var a = i[r], s = 0, u = l; s < u.length; s++) {
            var c = u[s];
            if (null === (t = a.fileName) || void 0 === t ? void 0 : t.startsWith(c))
              return !1
          }
        return !0
      } catch (e) {
        return console.warn("Failed to analyze stack trace", e),
        !0
      }
    }
    function c(e) {
      (0,
      r.startReportingUnhandledErrors)(e),
      window.onerror = function(e, t, n, r, i) {
        if (console.error(i),
        i && u(i))
          try {
            s.getInstance().report(i, a.w.UNCAUGHT_ERROR)
          } catch (e) {
            console.error("failed to report uncaught error", e)
          }
        return !0
      }
      ,
      window.onunhandledrejection = function(e) {
        var t = e.reason;
        if (console.error(t),
        e && u(t))
          try {
            s.getInstance().report(t, a.w.UNHANDLED_PROMISE_REJECTION)
          } catch (e) {
            console.error("failed to report unhandled promise rejection", e)
          }
        return !0
      }
    }
  }
  ,
  8829: (e,t,n)=>{
    "use strict";
    var r;
    n.d(t, {
      Hk: ()=>o,
      Tg: ()=>s,
      ly: ()=>i,
      nm: ()=>l,
      xY: ()=>a
    });
    var i = "a"
      , o = "open_chat"
      , a = "chat_invite_id"
      , s = "chat_invite_id"
      , l = ((r = {})[a] = s,
    r)
  }
  ,
  2388: (e,t,n)=>{
    "use strict";
    var r;
    n.d(t, {
      J: ()=>r
    }),
    function(e) {
      e.App = "app",
      e.Embed = "embed",
      e.MobileWeb = "mobile-web"
    }(r || (r = {}))
  }
  ,
  1011: (e,t,n)=>{
    "use strict";
    n.d(t, {
      h: ()=>i
    });
    var r = 900 != n.j ? [/^(.+\.)?gcp\.wazestg\.com/, /^(www\.)?waze\.com/] : null;
    function i(e) {
      try {
        return function(e) {
          try {
            var t = new URL(e).hostname;
            return r.some((function(e) {
              return e.test(t)
            }
            ))
          } catch (e) {
            return !1
          }
        }(e) && ["/ul", "/ul/"].includes(new URL(e).pathname)
      } catch (e) {
        return !1
      }
    }
  }
}]);
